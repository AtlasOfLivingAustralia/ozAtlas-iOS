

<!DOCTYPE html>
<head>
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    
    <script src="static/t5OGphSUjwdNOoxNKgdRTTh1RBtmzhMXxHDYYeR4lYj.js" type="text/javascript" ></script>
<link href="static/090onaZX1M508oSWqGmMeETZ9NkUA9p4CCTW3MUpRPc.css" type="text/css" rel="stylesheet" media="screen, projection" />

<link href="static/VySgOjkVOsD8Jt8ujXROVRjZeDLAAwVhMF5WqPZ8Ajf.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="http://www.ala.org.au/wp-content/themes/ala2011/images/favicon.ico" rel="shortcut icon" />
<!--[if lt IE 9]><script src="static/Yh1Txee3hFzExJ4P1str7tGV24zQMEYtxqtlYJ5ukR0.js" type="text/javascript" ></script><![endif]-->
<link href="static/Qwaw257M4sHcJuspEDRbeQoTceByqRmOCHNaZWpOxuc.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="static/AcXIjLTuc87n8sfxBjJRQSoBIUwP9RnCyK8Sv82i7eV.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="static/doSKUivnfI9gXmPKZ2XG4W5xIABYgKaf5Dwf3LtjNVr.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="static/fx5pGfEFSRJi6nyez3s8fUsjDL8WJ0IB04Njm7T2VAJ.css" type="text/css" rel="stylesheet" media="all" />
<link href="static/iHX8x0PqEmsjgyBEeq6NRvjAytsYzmt25tsjtHoHXDq.css" type="text/css" rel="stylesheet" media="screen,print" />




<link href="static/KYGDEVRRaKjNbTXJkHmicmzo9vFrnnzCnGLcxKjR04f.css" type="text/css" rel="stylesheet" media="screen,print" />

<link href="static/exPgH85S7hDuxmySlOZhM0sayvRJla83G3HHYJNzaUB.css" type="text/css" rel="stylesheet" media="screen,print" />
<link href="static/tNjfADEdRvZz6orXSyopLhQhlHwq7bH7hcAZQiGZMoc.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="/static/RrjzrZ0Ci0GPLETIr8x8KUMjfJtZKvifrUtMCedwKRB.png" rel="shortcut icon" />
<link href="static/4zsVqykqBON8U5Es5kfffXBSGJlbI8VrPDW4hSn1SWJ.css" type="text/css" rel="stylesheet" media="screen, projection" />


<link href="static/sCFm7bBsIMFGQHTSlBbhMHQCXWhOsbBr5z4bu1OueIE.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="static/tUELnv7Uvq6ppWNUWOlaow3JGSTTIf8hJ2VYvh7Oahj.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="/static/OKcRcjAeA1yuXD9r4fZA1Uw2HEwL7gYvjc6HdrZXIYP.png" rel="shortcut icon" />
<link href="/static/UxF0saaqmikaj74l2WFcCyPMm9hEEs8if7IBy0GNAnd.png" rel="shortcut icon" />
<link href="/static/zs4hrJqt7I802RlaZiXbmbDBarpNPZF8V8fCQJ2RVTM.png" rel="shortcut icon" />
<link href="/static/SvC1e8bSiCPFh8mObbEThgbJIaGZi72ATzqobK6QnnB.gif" rel="shortcut icon" />
<link href="/static/BA9MhIHZnH0zMcKJWIWsTurHhQTpDYE6akqM5excaZI.gif" rel="shortcut icon" />

<script type="text/javascript">
    var fcConfig = {
        bieUrl: "#",
        speciesProfileUrl: "https://fieldcapture-test.ala.org.au/proxy/speciesProfile",
        googleStaticUrl:"http://maps.googleapis.com/maps/api/staticmap?maptype=terrian&zoom=12&sensor=false&size=350x250&markers=color:red%7C"
        },
        here = document.location.href;
    </script>
    

    <meta name="layout" content="mobile"/>

    
    
    
</if>

    <style type="text/css">
        input[type=checkbox] {  -webkit-transform: scale(1.5); }
        .checkbox-list label { min-height: 40px; }
        .speciesAutocompleteRow {min-height:40px;}
        .datepicker td, .datepicker th {
            width:40px;
            height:40px;
            vertical-align: middle;
        }
    </style>
</head>

<body>

<div id="content" class="clearfix">
    
<div class="container-fluid validationEngineContainer" id="validation-container">
<div id="koActivityMainBlock">

    <div class="row-fluid">
        <div class="span12">
            <!-- Common activity fields -->

            <div class="row-fluid space-after">
                <div class="span4">

                    <label class="for-readonly">Type</label>
                    <span class="readonly-text" data-bind="text:type"></span>
                </div>
                <div class="span8">

                    <label class="for-readonly">Description</label>
                    <span class="readonly-text" data-bind="text:description"></span>
                </div>
            </div>


            <div class="row-fluid space-after">
                <div class="span4">
                    <label class="for-readonly inline">Planned start date</label>
                    <span class="readonly-text" data-bind="text:plannedStartDate.formattedDate"></span>
                </div>
                <div class="span8">
                    <label class="for-readonly inline">Planned end date</label>
                    <span class="readonly-text" data-bind="text:plannedEndDate.formattedDate"></span>
                </div>
            </div>

            <div class="well">
                <div class="row-fluid">

                    <span class="span8">
                    <div class="row-fluid space-after">

                        <div class="span6 required">
                            <label for="startDate"><b>Actual start date</b>
                                <a href='#' class='helphover' data-original-title='Start date' data-placement='top' data-content='Date the activity was started.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a>
                            </label>


                            <div class="input-append">
                                <input data-bind='datepicker:startDate.date' name='startDate' id='startDate' type='text' size='16' class='input-xlarge' readonly='readonly' targetField='startDate.date' data-validation-engine='validate[required]' />
<span class='add-on open-datepicker'>
  <i class='icon-th'>&nbsp;</i>
</span>
                            </div>

                        </div>
                        <div class="span6" data-bind="css:{required:transients.markedAsFinished}">
                            <label for="endDate"><b>Actual end date</b>
                                <a href='#' class='helphover' data-original-title='End date' data-placement='top' data-content='Date the activity finished.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a>
                            </label>

                            <div class="input-append">
                                <input data-bind='datepicker:endDate.date' name='endDate' id='endDate' type='text' size='16' class='input-xlarge' readonly='readonly' targetField='endDate.date' data-validation-engine='validate[future[startDate]]' />
<span class='add-on open-datepicker'>
  <i class='icon-th'>&nbsp;</i>
</span>
                            </div>

                        </div>
                    </div>
                    <div class="row-fluid space-after">
                        <div class="span6">
                            <label for="theme"><b>Major theme</b></label>
                            <select id="theme" data-bind="value:mainTheme, options:transients.themes, optionsCaption:'Choose..'" class="input-xlarge" style="width:90%">
                            </select>
                        </div>

                        <div class="span6">
                            <label><b>Progress</b></label>
                            <label for="activityComplete"><input type="checkbox" id="activityComplete" data-bind="checked:transients.markedAsFinished" style="margin-right:1em;"><span>This activity is complete</span></label>

                        </div>

                    </div>
                    <div class="row-fluid">
                        <div class="span6">
                            <label for="site"><b>Site</b></label>
                            <select id='site' style='width:90%' data-bind='options:transients.sites,optionsText:"name",optionsValue:"siteId",value:siteId,optionsCaption:"Choose a site..."'>&nbsp;</select>

                        </div>

                        <div class="span3">

                            <button class="btn btn-info" style="margin-top:25px;" data-bind="visible:transients.newSiteSupported,click:createNewSite">Create new Site</button>
                        </div>
                    </div>

                    
                        
                            
                                
                            
                            
                                
                                    
                                    
                                    
                                    

                                
                            
                        

                    
                    </span>
                    <span class="span4">

                        <img id="siteLocationImage" width="100%" data-bind="event:{error:siteLoadError}, attr:{src:transients.siteImgUrl}, visible:transients.siteImgUrl()"/>


                    </span>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- ko stopBinding: true -->

    
    
    
    <style type="text/css">
        table.underStoreyLifeforms th {white-space:normal;}
        table.underStoreyLifeforms tbody td:nth-child(2) {text-align:center;}
        table.underStoreyLifeforms tbody td:nth-child(3) {text-align:center;}
        table.underStoreyLifeforms tbody td:nth-child(4) {text-align:center;}
        table.underStoreyLifeforms tbody td:nth-child(5) {text-align:center;}
        table.underStoreyLifeforms td:last-child {width:4%;text-align:center;}
        table.underStoreyLifeforms textarea {width:100%; box-sizing:border-box; }
        table.underStoreyLifeforms select {width:100%; box-sizing:border-box; }
    </style><style type="text/css">
        table.recruitmentSpecies th {white-space:normal;}
        table.recruitmentSpecies td:last-child {width:4%;text-align:center;}
        table.recruitmentSpecies textarea {width:100%; box-sizing:border-box; }
        table.recruitmentSpecies select {width:100%; box-sizing:border-box; }
    </style><style type="text/css">
        table.neighbourhood th {white-space:normal;}
        table.neighbourhood tbody td:nth-child(1) {width:25%;text-align:center;}
        table.neighbourhood tbody td:nth-child(1)
        table.neighbourhood tbody td:nth-child(2) {width:25%;text-align:center;}
        table.neighbourhood tbody td:nth-child(2)
        table.neighbourhood tbody td:nth-child(3) {width:25%;text-align:center;}
        table.neighbourhood tbody td:nth-child(3)
        table.neighbourhood tbody td:nth-child(4) {width:25%;text-align:center;}
        table.neighbourhood tbody td:nth-child(4)
        table.neighbourhood td:last-child {width:4%;text-align:center;}
        table.neighbourhood textarea {width:100%; box-sizing:border-box; }
        table.neighbourhood select {width:100%; box-sizing:border-box; }
    </style><style type="text/css">
        table.finalHabitatScore th {white-space:normal;}
        table.finalHabitatScore tbody td:nth-child(1) {width:8%;}
        table.finalHabitatScore tbody td:nth-child(1)
        table.finalHabitatScore tbody td:nth-child(2) {width:8%;text-align:center;}
        table.finalHabitatScore tbody td:nth-child(2)
        table.finalHabitatScore tbody td:nth-child(3) {width:8%;text-align:center;}
        table.finalHabitatScore tbody td:nth-child(3)
        table.finalHabitatScore tbody td:nth-child(4) {width:8%;text-align:center;}
        table.finalHabitatScore tbody td:nth-child(4)
        table.finalHabitatScore tbody td:nth-child(5) {width:8%;text-align:center;}
        table.finalHabitatScore tbody td:nth-child(5)
        table.finalHabitatScore tbody td:nth-child(6) {width:8%;text-align:center;}
        table.finalHabitatScore tbody td:nth-child(6)
        table.finalHabitatScore tbody td:nth-child(7) {width:8%;text-align:center;}
        table.finalHabitatScore tbody td:nth-child(7)
        table.finalHabitatScore tbody td:nth-child(8) {width:8%;text-align:center;}
        table.finalHabitatScore tbody td:nth-child(8)
        table.finalHabitatScore tbody td:nth-child(9) {width:8%;text-align:center;}
        table.finalHabitatScore tbody td:nth-child(9)
        table.finalHabitatScore tbody td:nth-child(10) {width:8%;text-align:center;}
        table.finalHabitatScore tbody td:nth-child(10)
        table.finalHabitatScore tbody td:nth-child(11) {width:8%;text-align:center;}
        table.finalHabitatScore tbody td:nth-child(11)
        table.finalHabitatScore tbody td:nth-child(12) {width:8%;text-align:center;}
        table.finalHabitatScore tbody td:nth-child(12)
        table.finalHabitatScore td:last-child {width:4%;text-align:center;}
        table.finalHabitatScore textarea {width:100%; box-sizing:border-box; }
        table.finalHabitatScore select {width:100%; box-sizing:border-box; }
    </style>
    <div class="output-block" id="koTasVeg_Native_Vegetation_Assessment_Method_-_Forest_Vegetation">
            <h3 data-bind="css:{modified:dirtyFlag.isDirty},attr:{title:'Has been modified'}">TasVeg Native Vegetation Assessment Method - Forest Vegetation</h3>
        <div data-bind="if:transients.optional">
            <label class="checkbox" ><input type="checkbox" data-bind="checked:outputNotCompleted"> <span data-bind="text:transients.questionText"></span> </label>
        </div>
        <div id="TasVeg_Native_Vegetation_Assessment_Method_-_Forest_Vegetation-content" data-bind="visible:!outputNotCompleted()">
        <!-- add the dynamic components -->
            <div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h3>Survey Information</h3></span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Assessor:</label></span><input  class="span8 input-small" data-bind='value:data.assessor'  data-validation-engine='validate[required]' type='text' class='input-small'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Current land use</label></span><input  class="span8 input-small" data-bind='value:data.currentLandUse'  type='text' class='input-small'/></span></div></div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Zone No./name:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='The unique name or identifier given to the habitat zone.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input  class="span8 input-small" data-bind='value:data.habitatZone'  data-validation-engine='validate[required]' type='text' class='input-small'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Size of zone (Ha):<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='The area in hectares of the habitat zone being assessed.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.zoneAreaHa' data-validation-engine='validate[min[0],custom[number]]' type='number' class='input-mini'/></span></div></div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Location:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Short description of where the assessment zone is located'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input  class="span8 input-small" data-bind='value:data.location'  type='text' class='input-small'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>TasVeg VC code:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Select the appropriate TasVeg condition code and refer to the vegetation community benchmark. Fill all of the relevant benchmark values into the form.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><select class="span8" data-bind='value:data.tasvegVcCode,options:transients.tasvegVcCodeConstraints,optionsCaption:"Please select"'></select></span></div></div></div>
<div class="row-fluid space-after output-section" >
<div class="span12">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Comments:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Record any additional information which may be relevant/useful in understanding or interpreting the assessment results.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><textarea  class="span8" data-bind='value:data.comments'></textarea></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h3>Site Condition Components</h3></span></span></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>Large Trees</h4>Large trees are defined by diameter at breast height (dbh) – see benchmark.  *Estimate the proportion of an expected healthy canopy cover that is present (ie. not missing due to tree death or decline).</span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span6">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>No. of trees counted / Ha.:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='2. Determine number of large trees, record and compare to benchmark'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.numberOfLargeTreesObserved' data-validation-engine='validate[min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Large tree density category:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Large trees are defined by diameter at breast height (dbh) – see benchmark. Estimate proportion of an expected healthy canopy cover that is present (ie. not missing due to tree death or decline)'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><select class="span8" data-bind='value:data.largeTreeDensityClass,options:transients.largeTreeDensityClassConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Large tree canopy health (%):<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='3. Determine the canopy health of large trees'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><select class="span8" data-bind='value:data.largeTreeCanopyHealthPercent,options:transients.largeTreeCanopyHealthPercentConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div></div><div class="span6">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Large tree benchmark No. / Ha:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='1. Record benchmark large trees DBH'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.numberOfLargeTreesBenchmark' data-validation-engine='validate[min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Large tree benchmark DBH:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='1. Record benchmark large trees expected number/ha'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.largeTreeBenchmarkDbh' data-validation-engine='validate[min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label><b>Large Trees Score:</b></label></span><span  data-bind='text:data.largeTreesScore'></span></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>Tree Canopy Cover</h4>Tree canopy cover is defined as those canopy tree species reaching ≥80% of mature height – see benchmark description.  *Estimate the proportion of an expected healthy canopy cover that is present (ie not missing due to tree death or decline).</span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span6">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Tree canopy cover (observerd %):<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='2. Estimate tree canopy cover, record and compare to the benchmark'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.canopyCoverPercent' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Canopy cover category:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='3. Select the appropriate canopy cover class within the assessment zone'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><select class="span8" data-bind='value:data.canopyCoverClass,options:transients.canopyCoverClassConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Tree canopy health (%):<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='4. Determine the tree canopy health within the assessment zone'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><select class="span8" data-bind='value:data.canopyHealthPercent,options:transients.canopyHealthPercentConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div></div><div class="span6">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Canopy cover benchmark %:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='1. Record benchmark tree canopy cover'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.canopyCoverBenchmark' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label><b>Canopy Cover Score:</b></label></span><span  data-bind='text:data.canopyCoverScore'></span></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>Understory life forms</h4></span></span></div>
<div class="row-fluid space-after output-section" >
<span class="span6">    <span  class="preLabel"><label>Benchmark No. of Life forms:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='1. Record benchmark number of life forms.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.lifeformsPresentNoBenchmark' data-validation-engine='validate[custom[number],min[0]]' type='number' class='input-mini'/></span><span class="span6">    <span  class="preLabel"><label>Phytophthora cinnamomi symptoms (tick if observed):<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='3. Tick if symptoms of Phytophthora cinnamomi are observed in the zone.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="span12" name='data.lifeformsPhytophthoraPresent' data-bind='checked:data.lifeformsPhytophthoraPresent' type='checkbox' class='checkbox'/></span></div>
<div class="row-fluid output-section">
            <table class="table table-bordered underStoreyLifeforms " >
                <thead><tr><th>Life form</th><th>No. of species (Observed)<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='2. Record observed number of species for each life form.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>No. of species (Benchmark)<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='1. Record benchmark number of species for each life form.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>% cover (Observed)<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='2. Record observed % cover for each life form.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>% cover (Benchmark)<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='1. Record benchmark % cover for each life form.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>Present<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Life forms with benchmark cover of &lt; 10% are considered ‘present’ if any specimens are observed Life forms with benchmark cover of ≥ 10% are considered ‘present’ if the life form occupies at least 10% of benchmark cover.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>Modified<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='(Apply only where life form is ‘present’) Life forms with benchmark cover of &lt;10% are considered substantially modified if the life form has either: - &lt;50% of benchmark species diversity; or - no reproductively mature specimens are observed Life forms with benchmark cover of ≥ 10% are considered substantially modified if the life form has either: - &lt;50% of benchmark cover; or - &lt; 50% of benchmark species diversity.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th></th>
                </tr></thead>
                <tbody data-bind="template:{name:'underStoreyLifeformsviewTmpl', foreach: data.underStoreyLifeforms}"></tbody>
                <script id="underStoreyLifeformsviewTmpl" type="text/html"><tr>
                    <td><span  data-bind='text:lifeform'></span></td>
                    <td><input class="input-small" style="text-align:center" data-bind='value:numberObserved' data-validation-engine='validate[min[0],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-small" style="text-align:center" data-bind='value:numberBenchmark' data-validation-engine='validate[min[0],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-small" style="text-align:center" data-bind='value:coverPercentObserved' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-small" style="text-align:center" data-bind='value:coverPercentBenchmark' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><select data-bind='value:present,options:transients.presentConstraints,optionsCaption:"Please select"'></select></td>
                    <td><select data-bind='value:modified,options:transients.modifiedConstraints,optionsCaption:"Please select"'></select></td>
                    <td><i data-bind='click:$root.removeunderStoreyLifeformsRow' class='icon-remove'></i></td>
                </tr></script>
                <tfoot>
                <tr>
                    <td><span ><b>Understorey Life Forms Score</b></span></td>
                    <td><span  data-bind='text:data.understoreyScore'></span></td>
                    <td colspan='2'><span ></span></td>
                    <td><span ><b>Total</b></span></td>
                    <td><input class="input-small" style="text-align:center" data-bind='value:data.numberLifeformsPresent' type='number' class='input-mini'/></td>
                    <td><input class="input-small" style="text-align:center" data-bind='value:data.numberLifeformsModified' type='number' class='input-mini'/></td>
                    <td></td>
                </tr>
                </tfoot>
            </table>
        </div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>Understorey Summary</h4></span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span6">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Benchmark life forms present (%):<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='1. Record the % of life forms present (see Understorey Life Forms table).'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.lifeformsPresentPercentBenchmark' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Number of life forms present<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='2. Determine the % of life forms assessed as present vs the benchmark.  3. If ≥50% of benchmark no. of life forms are present determine the % modified.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><select class="span8" data-bind='value:data.lifeformsPresentClass,options:transients.lifeformsPresentClassConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div></div><div class="span6">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Understorey Summary Score</label></span><span  data-bind='text:data.understoreySummaryScore'></span></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>Lack of Weeds</h4>‘High threat’ weed species are defined as introduced species (including non-indigenous ‘natives’) that achieve >5% cover in the zone or those weed species listed as high threat weeds in Tasmania. A list of high threat weeds in Tasmania is provided in the TASVEG Vegetation Condition Assessment manual. **If total weed cover is negligible (<1%) and high threat weed species are present then score ‘13’. The Assessor should determine the threat posed by any weed listed in the zone.</span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span6">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Total weed cover %:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='1. Record the observed overall % weed cover and place in appropriate weed cover category.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.totalWeedCoverPercent' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Total weed cover category:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='1. Choose the appropriate category for total weed cover.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><select class="span8" data-bind='value:data.weedCoverClass,options:transients.weedCoverClassConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>High threat weed cover %:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='2. Estimate the % cover of ‘high threat’ weed species, record and determine appropriate category.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.highThreatWeedCoverPercent' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>High threat weed cover category:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='2. Choose the appropriate category for the percentage of &apos;high threat&apos; weeds.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><select class="span8" data-bind='value:data.highThreatWeedClass,options:transients.highThreatWeedClassConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div></div><div class="span6">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Lack of weeds Score</label></span><span  data-bind='text:data.weedsScore'></span></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>Recruitment</h4>Treat multiple canopy species as a single species. Adequate recruitment of canopy species requires at least 2 cohorts to be present (seedlings <2m and saplings >2m tall) and where canopy cover is less than benchmark, sufficient recruitment to attain benchmark cover over time. Adequate recruitment of other woody species requires observed immature individuals to be at least 10% of number of mature individuals for each species.</span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span6">
<div class="row-fluid ">
            <table class="table table-bordered recruitmentSpecies " >
                <thead><tr><th>Woody species recorded in habitat zone (S and taller)<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='1. Record each woody species observed in the zone and the total number.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>Adequate Recruitment?<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='2. Determine if recruitment of each woody species is adequate and record the number of adequately recruiting woody species.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th></th>
                </tr></thead>
                <tbody data-bind="template:{name:'recruitmentSpeciesviewTmpl', foreach: data.recruitmentSpecies}"></tbody>
                <script id="recruitmentSpeciesviewTmpl" type="text/html"><tr>
                    <td>
<span class="input-prepend input-append" data-bind="with:speciesRecruited">
    <span class="add-on" data-bind="visible:!transients.editing(), css:{'btn-success':name()}"><i class="icon-white" data-bind="css:{'icon-ok':listId()!='unmatched' && name(), 'icon-question-sign':listId()=='unmatched' || listId() == 'error-unmatched'}"></i></span><span class="add-on" data-bind="visible:transients.editing()"><img src="static/Xo2jbaJ5EFqa59u9g4c4ybpCpw3wFWKhQdzZwNmmktO.gif" alt="saving icon" /></span><input type="text" data-bind="value:transients.textFieldValue,event:{focusout:focusLost},autocomplete:{url:'https://fieldcapture-test.ala.org.au/search/species', render: renderItem, listId: list, result:speciesSelected, valueChangeCallback:textFieldChanged}" />
    <span class="add-on" data-bind="visible: !transients.editing() && name()">
        <a href="#" data-bind="popover: {title: name, content: transients.speciesInformation}"><i class="icon-info-sign"></i></a>
    </span>
</span>
</td>
                    <td><select data-bind='value:recruitmentAdequate,options:transients.recruitmentAdequateConstraints,optionsCaption:"Please select"'></select></td>
                    <td><i data-bind='click:$root.removerecruitmentSpeciesRow' class='icon-remove'></i></td>
                </tr></script>
                <tfoot>
                <tr>
                    <td><span ><b>Total recruiting species</b></span></td>
                    <td><input class="input-small" style="text-align:center" data-bind='value:data.recruitmentTotal' type='number' class='input-mini'/></td>
                    <td></td>
                </tr>
                <tr><td colspan="3" style="text-align:left;">
                        <button type="button" class="btn btn-small" data-bind="click:addrecruitmentSpeciesRow">
                        <i class="icon-plus"></i> Add a row</button></td></tr> <script id="recruitmentSpeciestemplate-upload" type="text/x-tmpl">{% %}</script>
                       <script id="recruitmentSpeciestemplate-download" type="text/x-tmpl">{% %}</script>                </tfoot>
            </table>
        </div>
</div><div class="span6">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Recruitment cohort category:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='1. Is there any evidence of woody recruitment? 2. Is vegetation community reliant on episodic events for recruitment? 3. Determine if episodic event has occurred. 4. Determine proportion of woody spp. with adequate recruitment. ’Cohort’ refers to a group of woody plants established in a single episode (can include suppressed canopy species individuals). Refer to benchmark for clarification.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><select class="span8" data-bind='value:data.recruitmentCohorts,options:transients.recruitmentCohortsConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Recruitment diversity:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='4. Determine proportion of woody spp. with adequate recruitment. High diversity defined as ≥50% of benchmark woody species diversity.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><select class="span8" data-bind='value:data.recruitmentDiversity,options:transients.recruitmentDiversityConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Recruitment Score:</label></span><span  data-bind='text:data.recruitmentScore'></span></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>Organic Litter</h4>Litter is defined as dead organic material detached from the parent plant, including plant debris, fallen leaves and twigs <10cm.</span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span6">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Organic litter benchmark %:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='1. Refer to vegetation community benchmark and record benchmark % litter cover.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.organicLitterBenchmarkPercent' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Observed cover of organic litter %:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='2. Determine the % cover of organic litter in the zone and record. Compare to benchmark %.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.organicLitterObservedPercent' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Organic litter cover category:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='3. Select the appropriate organic litter cover category.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><select class="span8" data-bind='value:data.organicLitterCoverCategory,options:transients.organicLitterCoverCategoryConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Dominant type of organic litter:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='4. Determine if organic litter dominated by native or non-native litter.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><select class="span8" data-bind='value:data.organicLitterType,options:transients.organicLitterTypeConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div></div><div class="span6">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Organic litter Score:</label></span><span  data-bind='text:data.organicLitterScore'></span></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>Logs</h4>Large logs defined as those with diameter ≥0.5 of benchmark large tree DBH.</span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span6">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Benchmark log length (m):<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='1. Refer to vegetation community benchmark and record benchmark log length.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.logLengthBenchmark' data-validation-engine='validate[min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Average length of observed logs (m):<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='2. Record the total length of logs within the zone. Compare to benchmark.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.logLengthObserved' data-validation-engine='validate[min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Log length category:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='3. Select the appropriate large logs category.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><select class="span8" data-bind='value:data.logLengthCategory,options:transients.logLengthCategoryConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Are large logs present?:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='4. Determine the presence of &apos;large logs&apos; in the zone.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><select class="span8" data-bind='value:data.largeLogsPresent,options:transients.largeLogsPresentConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div></div><div class="span6">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Logs Score:</label></span><span  data-bind='text:data.logScore'></span></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h3>Landscape Context Components</h3></span></span></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>Patch Size</h4>The patch is the area of native vegetation continuous with the assessment area (zone), regardless of EVC, condition or land tenure. Includes adjoining wetlands. It will be 'significantly disturbed' if activities such as grazing, timber harvesting, roading, fuel reduction burning or Phytophthora infestation have occurred. Effectively most patches within fragmented landscapes are significantly disturbed.</span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span6">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Patch size (Ha):<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='1. Determine the size of the patch. Record and assign to a patch size class.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.patchSize' data-validation-engine='validate[min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Patch size category:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='2. Select the appropriate patch size category. If patch &gt;20ha, decide if it is &apos;significantly disturbed&apos;.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><select class="span8" data-bind='value:data.patchCategory,options:transients.patchCategoryConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div></div><div class="span6">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Patch Size Score:</label></span><span  data-bind='text:data.patchSizeScore'></span></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>Neighbourhood</h4>The neighbourhood score represents the amount and configuration of native vegetation within proximity of the zone being assessed.</span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span6">
<div class="row-fluid ">
            <table class="table table-bordered neighbourhood " >
                <thead><tr><th>Radius from site</th><th>% native vegetation<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='1. Determine and record the % of native vegetation within 3 radii from perimeter of the zone to nearest 20%.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>Weighting</th><th>Weighted Score</th><th></th>
                </tr></thead>
                <tbody data-bind="template:{name:'neighbourhoodviewTmpl', foreach: data.neighbourhood}"></tbody>
                <script id="neighbourhoodviewTmpl" type="text/html"><tr>
                    <td><span  data-bind='text:radiusFromSite'></span></td>
                    <td><input class="input-medium" style="text-align:center" data-bind='value:nativeVegetationPercent' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><span  data-bind='text:neighbourhoodWeighting'></span></td>
                    <td><span  data-bind='text:weightedScore'></span></td>
                    <td><i data-bind='click:$root.removeneighbourhoodRow' class='icon-remove'></i></td>
                </tr></script>
                <tfoot>
                <tr>
                    <td><span >Is the neighbourhood of the assessed patch significantly disturbed?:</span></td>
                    <td><select data-bind='value:data.neighbourhoodSignificantlyDisturbed,options:transients.neighbourhoodSignificantlyDisturbedConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></td>
                    <td><span >Total Weighted Score</span></td>
                    <td><span  data-bind='text:data.totalWeightedScore'></span></td>
                    <td></td>
                </tr>
                </tfoot>
            </table>
        </div>
</div><div class="span6">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Neighbourhood Score</label></span><span  data-bind='text:data.neighbourhoodScore'></span></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>Distance to Core Area</h4>A ‘core area’ is native vegetation > 50 ha regardless of type, condition or tenure. Includes natural wetlands and lakes, estuaries and rivers. Determine the shortest distance from the edge of the zone being assessed to the edge of the nearest core area and place the vegetation in the appropriate core area distance category.</span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span6">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Distance to core area:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='1. Determine the distance to the nearest core area.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><select class="span8" data-bind='value:data.distanceToCoreArea,options:transients.distanceToCoreAreaConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Core area significantly disturbed:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='2. Determine if core area is significantly disturbed.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><select class="span8" data-bind='value:data.coreAreaSignificantlyDisturbed,options:transients.coreAreaSignificantlyDisturbedConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div></div><div class="span6">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Distance to Core Area Score:</label></span><span  data-bind='text:data.distanceToCoreScore'></span></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h3>Final Habitat Score</h3></span></span></div>
<div class="row-fluid space-after output-section" >
<div class="row-fluid ">
            <table class="table table-bordered finalHabitatScore " >
                <thead><tr><th> </th><th>Large Trees</th><th>Tree Canopy Cover</th><th>Lack of Weeds</th><th>Understorey Summary</th><th>Recruitment</th><th>Organic Litter</th><th>Logs</th><th>Patch Size</th><th>Neighbourhood</th><th>Distance to Core</th><th>Total Score</th><th></th>
                </tr></thead>
                <tbody data-bind="template:{name:'finalHabitatScoreviewTmpl', foreach: data.finalHabitatScore}"></tbody>
                <script id="finalHabitatScoreviewTmpl" type="text/html"><tr>
                    <td><span  data-bind='text:component'></span></td>
                    <td><span  data-bind='text:largeTreesScore'></span></td>
                    <td><span  data-bind='text:canopyCoverScore'></span></td>
                    <td><span  data-bind='text:weedsScore'></span></td>
                    <td><span  data-bind='text:understoreySummaryScore'></span></td>
                    <td><span  data-bind='text:recruitmentScore'></span></td>
                    <td><span  data-bind='text:organicLitterScore'></span></td>
                    <td><span  data-bind='text:logScore'></span></td>
                    <td><span  data-bind='text:patchSizeScore'></span></td>
                    <td><span  data-bind='text:neighbourhoodScore'></span></td>
                    <td><span  data-bind='text:distanceToCoreScore'></span></td>
                    <td><span  data-bind='text:totalScore'></span></td>
                    <td><i data-bind='click:$root.removefinalHabitatScoreRow' class='icon-remove'></i></td>
                </tr></script>
                <tfoot>
                <tr>
                    <td><span ><b>Score</b></span></td>
                    <td><span  class="value" data-bind='text:data.largeTreesScore'></span></td>
                    <td><span  data-bind='text:data.canopyCoverScore'></span></td>
                    <td><span  data-bind='text:data.weedsScore'></span></td>
                    <td><span  data-bind='text:data.understoreySummaryScore'></span></td>
                    <td><span  data-bind='text:data.recruitmentScore'></span></td>
                    <td><span  data-bind='text:data.organicLitterScore'></span></td>
                    <td><span  data-bind='text:data.logScore'></span></td>
                    <td><span  data-bind='text:data.patchSizeScore'></span></td>
                    <td><span  data-bind='text:data.neighbourhoodScore'></span></td>
                    <td><span  data-bind='text:data.distanceToCoreScore'></span></td>
                    <td><span  data-bind='text:data.totalScore'></span></td>
                    <td></td>
                </tr>
                </tfoot>
            </table>
        </div>
</div>

        </div>
        
    </div>
    

<!-- /ko -->

</div>




</div>

<script src="static/Zbj0J8XhmZDqWqIAz5C46TWLOULGl7LNvdJeBlO9fMb.js" type="text/javascript" ></script>





<script src="static/5zeDycYZFxJsfDd3W1kuhrN47XnIMrbhS6gdHDvcExv.js" type="text/javascript" ></script>

<script src="static/ulxBmo4RrKTNT3DuFHethb4EOZpwQfvefxNXivDIbzp.js" type="text/javascript" ></script>








<!--[if gte IE 8]><script src="static/knxjs4G9Cquc79O3iYW107XikPB1Z1ii8QWrtBpzlSP.js" type="text/javascript" ></script><![endif]-->
<script src="static/nRrltgvxdEHd5BqRR1v4XU3ZStOrhDScuH03g4r8E6O.js" type="text/javascript" ></script>

<script src="static/zP22SFJVnKXoWuBJdbsNhcivH2iXiC57wEOHXSDNudf.js" type="text/javascript" ></script>

<script src="static/QjmKsgTA1QWYxF0gcpdSFROG8mBnzaabMZcvDxBb9Xo.js" type="text/javascript" ></script>






<script src="static/IZCc6ZgD3MepYbz4UqlDLzMDNNghSCivcfGebmF9V2d.js" type="text/javascript" ></script>
<script src="static/I4NiLd8qMXMMgs4hAqHb5YT0jGlQhM4Yp0dku4W1Wng.js" type="text/javascript" ></script>



<script src="static/e9gGniNN5cG3OR4oPVWd5lYoxE5Xf282hFe7d4FTQbq.js" type="text/javascript" ></script>


<script src="static/CRNxISj7t7ZCV7B8M8dFtBK7x7R4tGVO36INoBz8gQX.js" type="text/javascript" ></script>

<script src="static/QhlSgFWjl35vcaCRa5cKxHZxRWSSluzptQUKz3PHr9s.js" type="text/javascript" ></script>


<script src="static/8WCQyXwicnBgTdLQ4F5jUFtmVXmqG9eUZKvo74wOnIT.js" type="text/javascript" ></script>
<script src="static/9HtLc6nfgO9H72LVVZxetW45ZR623Fx8EhEdydgOq2F.js" type="text/javascript" ></script>
<script src="static/wkrwT3eqoZlWXFPCQRTvkdsdvwzT5Lw2H89f9eTkQdb.js" type="text/javascript" ></script>


<script type="text/javascript">
        $(function(){

            var viewModelName = "TasVeg_Native_Vegetation_Assessment_Method_-_Forest_VegetationViewModel",
                viewModelInstance = viewModelName + "Instance";

            // load dynamic models - usually objects in a list
                    var UnderStoreyLifeformsRow = function (data) {
            var self = this;
            if (!data) data = {};
            self.transients = {};
            this.lifeform = ko.observable(orBlank(data['lifeform']));
            this.numberObserved = ko.observable(orZero(data['numberObserved']));
            this.numberBenchmark = ko.observable(orZero(data['numberBenchmark']));
            this.coverPercentObserved = ko.observable(orZero(data['coverPercentObserved']));
            this.coverPercentBenchmark = ko.observable(orZero(data['coverPercentBenchmark']));
            this.present = ko.observable(orBlank(data['present']));
            self.transients.presentConstraints = ["Yes","No"];
            this.modified = ko.observable(orBlank(data['modified']));
            self.transients.modifiedConstraints = ["Yes","No"];
        };
        var RecruitmentSpeciesRow = function (data) {
            var self = this;
            if (!data) data = {};
            self.transients = {};
            this.speciesRecruited =  new SpeciesViewModel(data['speciesRecruited'], speciesLists);
            this.recruitmentAdequate = ko.observable(orBlank(data['recruitmentAdequate']));
            self.transients.recruitmentAdequateConstraints = ["Yes","No"];
        };
        var NeighbourhoodRow = function (data) {
            var self = this;
            if (!data) data = {};
            self.transients = {};
            this.radiusFromSite = ko.observable(orZero(data['radiusFromSite']));
            this.nativeVegetationPercent = ko.observable(orZero(data['nativeVegetationPercent']));
            this.neighbourhoodWeighting = ko.observable(orZero(data['neighbourhoodWeighting']));
            this.weightedScore = ko.observable(orZero(data['weightedScore']));
        };
        var speciesLists = [];
        var site = {};


            this[viewModelName] = function (output, config) {
                var self = this;
                self.name = "TasVeg Native Vegetation Assessment Method - Forest Vegetation";
                self.outputId = orBlank(output.outputId);

                self.data = {};
                self.transients = {};
                var notCompleted = output.outputNotCompleted;

                if (notCompleted === undefined) {
                    notCompleted = config.collapsedByDefault;
                }
                self.outputNotCompleted = ko.observable(notCompleted);
                self.transients.optional = config.optional || false;
                self.transients.questionText = config.optionalQuestionText || 'Not applicable';
                self.transients.dummy = ko.observable();

                // add declarations for dynamic data
                
            self.data.assessor = ko.observable();

            self.data.currentLandUse = ko.observable();

            self.data.habitatZone = ko.observable();

            self.data.zoneAreaHa = ko.observable();

            self.data.tasvegVcCode = ko.observable();
            self.transients.tasvegVcCodeConstraints = ["DAD - Eucalyptus amygdalina forest and woodland on dolerite","DAM - Eucalyptus amygdalina forest on mudstone","DAS - Eucalyptus amygdalina forest and woodland on sandstone","DAZ - Eucalyptus amygdalina inland forest and woodland on Cainozoic deposits","DBA - Eucalyptus barberi forest and woodland","DCO - Eucalyptus coccifera forest and woodland","DCR - Eucalyptus cordata forest","DDE - Eucalyptus delegatensis dry forest and woodland","DDP - Eucalyptus dalrympleana - Eucalyptus pauciflora forest and woodland","DGL - Eucalyptus globulus dry forest and woodland","DGW - Eucalyptus gunnii woodland","DKW - King Island eucalypt woodland","DMO - Eucalyptus morrisbyi forest and woodland","DMW - Midlands woodland complex","DNF - Eucalyptus nitida Furneaux forest","DNI - Eucalyptus nitida dry forest and woodland","DOB - Eucalyptus obliqua dry forest","DOV - Eucalyptus ovata forest and woodland","DOW - Eucalyptus ovata heathy woodland","DPD - Eucalyptus pauciflora forest and woodland on dolerite","DPE - Eucalyptus perriniana forest and woodland","DPO - Eucalyptus pauciflora forest and woodland not on dolerite","DPU - Eucalyptus pulchella forest and woodland","DRI - Eucalyptus risdonii forest and woodland","DRO - Eucalyptus rodwayi forest and woodland","DSC - Eucalyptus amygdalina - Eucalyptus obliqua damp sclerophyll forest","DSG - Eucalyptus sieberi forest and woodland on granite","DSO - Eucalyptus sieberi forest and woodland not on granite","DTD - Eucalyptus tenuiramis forest and woodland on dolerite","DTG - Eucalyptus tenuiramis forest and woodland on granite","DTO - Eucalyptus tenuiramis forest and woodland on sediments","DVC - Eucalyptus viminalis - Eucalyptus globulus coastal forest and woodland","DVF - Eucalyptus viminalis Furneaux forest and woodland","DVG - Eucalyptus viminalis grassy forest and woodland","FPL - Plantations for silviculture","FPU - Unverified plantations for silviculture","NAD - Acacia dealbata forest","NAF - Acacia melanoxylon swamp forest","NAL - Allocasuarina littoralis forest","NAR - Acacia melanoxylon forest on rises","NAV - Allocasuarina verticillata forest","NBA - Bursaria - Acacia woodland and scrub","NBS - Banksia serrata woodland","NCR - Callitris rhomboidea forest","NLA - Leptospermum scoparium - Acacia mucronata forest","NLE - Leptospermum forest","NLM - Leptospermum lanigerum - Melaleuca squarrosa swamp forest","NLN - Subalpine Leptospermum nitidum woodland","NME - Melaleuca ericifolia swamp forest","RCO - Coastal rainforest","RFE - Rainforest fernland","RFS - Nothofagus gunnii rainforest and scrub","RHP - Lagarostrobos franklinii rainforest and scrub","RKF - Athrotaxis selaginoides - Nothofagus gunnii short rainforest","RKP - Athrotaxis selaginoides rainforest","RKS - Athrotaxis selaginoides subalpine scrub","RKX - Highland rainforest scrub with dead Athrotaxis selaginoides","RML - Nothofagus - Leptospermum short rainforest","RMS - Nothofagus-Phyllocladus short rainforest","RMT - Nothofagus-Atherosperma rainforest","RMU - Nothofagus rainforest undifferentiated","RPF - Athrotaxis cupressoides - Nothofagus gunnii short rainforest","RPP - Athrotaxis cupressoides rainforest","RPW - Athrotaxis cupressoides open woodland","RSH - Highland low rainforest and scrub","WBR - Eucalyptus brookeriana wet forest","WDA - Eucalyptus dalrympleana forest","WDB - Eucalyptus delegatensis forest with broad-leaf shrubs","WDL - Eucalyptus delegatensis forest over Leptospermum","WDR - Eucalyptus delegatensis forest over rainforest","WDU - Eucalyptus delegatensis wet forest (undifferentiated)","WGK - Eucalyptus globulus King Island forest","WGL - Eucalyptus globulus wet forest","WNL - Eucalyptus nitida forest over Leptospermum","WNR - Eucalyptus nitida forest over rainforest","WNU - Eucalyptus nitida wet forest (undifferentiated)","WOB - Eucalyptus obliqua forest with broad-leaf shrubs","WOL - Eucalyptus obliqua forest over Leptospermum","WOR - Eucalyptus obliqua forest over rainforest","WOU - Eucalyptus obliqua wet forest (undifferentiated)","WRE - Eucalyptus regnans forest","WSU - Eucalyptus subcrenulata forest and woodland","WVI - Eucalyptus viminalis wet forest"];

            self.data.location = ko.observable();

            self.data.comments = ko.observable();

            self.data.surveyArea = ko.observable();

            self.data.numberOfLargeTreesBenchmark = ko.observable();

            self.data.largeTreeBenchmarkDbh = ko.observable();

            self.data.numberOfLargeTreesObserved = ko.observable();

            self.data.largeTreeDensityClass = ko.observable();
            self.transients.largeTreeDensityClassConstraints = ["None present",">0 to 20% of the benchmark No. of large trees / Ha.",">20 to 40% of the benchmark No. of large trees / Ha.",">40 to 70% of the benchmark No. of large trees / Ha.",">70 to 100% of the benchmark No. of large trees / Ha.",">= the benchmark No. of large trees / Ha."];

            self.data.largeTreeCanopyHealthPercent = ko.observable();
            self.transients.largeTreeCanopyHealthPercentConstraints = ["> 70%","30 - 70%","< 30%"];

            self.data.largeTreesScore = ko.observable();

            self.data.canopyCoverPercent = ko.observable();

            self.data.canopyCoverClass = ko.observable();
            self.transients.canopyCoverClassConstraints = ["< 10% of benchmark cover","< 50% or > 150% of benchmark cover",">= 50% or <= 150% of benchmark cover"];

            self.data.canopyHealthPercent = ko.observable();
            self.transients.canopyHealthPercentConstraints = ["> 70%","30 - 70%","< 30%"];

            self.data.canopyCoverBenchmark = ko.observable();

            self.data.canopyCoverScore = ko.observable();

            self.data.underStoreyLifeforms = ko.observableArray([]);
            self.selectedunderStoreyLifeformsRow = ko.observable();
        

            self.loadunderStoreyLifeforms = function (data, append) {
                if (!append) {
                    self.data.underStoreyLifeforms([]);
                }
                if (data === undefined) {
                                        self.data.underStoreyLifeforms.push(new UnderStoreyLifeformsRow({"numberObserved":"","coverPercentBenchmark":"","numberBenchmark":"","modified":"","lifeform":"IT - Immature tree","present":"","coverPercentObserved":""}));
                    self.data.underStoreyLifeforms.push(new UnderStoreyLifeformsRow({"numberObserved":"","coverPercentBenchmark":"","numberBenchmark":"","modified":"","lifeform":"T - Tree (sub-canopy) or large shrub","present":"","coverPercentObserved":""}));
                    self.data.underStoreyLifeforms.push(new UnderStoreyLifeformsRow({"numberObserved":"","coverPercentBenchmark":"","numberBenchmark":"","modified":"","lifeform":"S - Medium shrub/small shrub","present":"","coverPercentObserved":""}));
                    self.data.underStoreyLifeforms.push(new UnderStoreyLifeformsRow({"numberObserved":"","numberBenchmark":"","noEdit":"true","lifeform":"Total"}));
                    self.data.underStoreyLifeforms.push(new UnderStoreyLifeformsRow({"numberObserved":"","coverPercentBenchmark":"","numberBenchmark":"","modified":"","lifeform":"PS - Prostrate and mat forming shrubs, including cushion plants","present":"","coverPercentObserved":""}));
                    self.data.underStoreyLifeforms.push(new UnderStoreyLifeformsRow({"numberObserved":"","coverPercentBenchmark":"","numberBenchmark":"","modified":"","lifeform":"H - Herbs and orchids","present":"","coverPercentObserved":""}));
                    self.data.underStoreyLifeforms.push(new UnderStoreyLifeformsRow({"numberObserved":"","coverPercentBenchmark":"","numberBenchmark":"","modified":"","lifeform":"G - Grass","present":"","coverPercentObserved":""}));
                    self.data.underStoreyLifeforms.push(new UnderStoreyLifeformsRow({"numberObserved":"","coverPercentBenchmark":"","numberBenchmark":"","modified":"","lifeform":"LSR - Large sedge/rush/sagg/lily","present":"","coverPercentObserved":""}));
                    self.data.underStoreyLifeforms.push(new UnderStoreyLifeformsRow({"numberObserved":"","coverPercentBenchmark":"","numberBenchmark":"","modified":"","lifeform":"MSR - Medium to small sedge/rush/sagg/lily","present":"","coverPercentObserved":""}));
                    self.data.underStoreyLifeforms.push(new UnderStoreyLifeformsRow({"numberObserved":"","coverPercentBenchmark":"","numberBenchmark":"","modified":"","lifeform":"GF - Ground fern","present":"","coverPercentObserved":""}));
                    self.data.underStoreyLifeforms.push(new UnderStoreyLifeformsRow({"numberObserved":"","coverPercentBenchmark":"","numberBenchmark":"","modified":"","lifeform":"TF - Tree fern","present":"","coverPercentObserved":""}));
                    self.data.underStoreyLifeforms.push(new UnderStoreyLifeformsRow({"numberObserved":"","coverPercentBenchmark":"","numberBenchmark":"","modified":"","lifeform":"SCE - Scrambler/Climber and Epiphytes","present":"","coverPercentObserved":""}));
                    self.data.underStoreyLifeforms.push(new UnderStoreyLifeformsRow({"numberObserved":"","coverPercentBenchmark":"","numberBenchmark":"","modified":"","lifeform":"ML - Mosses and Lichens","present":"","coverPercentObserved":""}));
                    self.data.underStoreyLifeforms.push(new UnderStoreyLifeformsRow({"numberObserved":"","coverPercentBenchmark":"","numberBenchmark":"","modified":"","lifeform":"SC - Soil crust","present":"","coverPercentObserved":""}));
                } else {
                    $.each(data, function (i, obj) {
                        self.data.underStoreyLifeforms.push(new UnderStoreyLifeformsRow(obj));
                    });
                }
            };

            self.addunderStoreyLifeformsRow = function () {
                var newRow = new UnderStoreyLifeformsRow();
                self.data.underStoreyLifeforms.push(newRow);
                
            };
            self.removeunderStoreyLifeformsRow = function (row) {
                self.data.underStoreyLifeforms.remove(row);
                
            };
            self.underStoreyLifeformsrowCount = function () {
                return self.data.underStoreyLifeforms().length;
            };

            self.underStoreyLifeformsTableDataUploadVisible = ko.observable(false);
            self.showunderStoreyLifeformsTableDataUpload = function() {
                self.underStoreyLifeformsTableDataUploadVisible(!self.underStoreyLifeformsTableDataUploadVisible());
            };

            self.underStoreyLifeformsTableDataUploadOptions = {
                    url:'/activity/ajaxUpload',
                    done:function(e, data) {
                        if (data.result.error) {
                            self.uploadFailed(data.result.error);
                        }
                        else {
                            self.loadunderStoreyLifeforms(data.result.data, self.appendTableRows());
                        }
                    },
                    fail:function(e, data) {
                        var message = 'Please contact MERIT support and attach your spreadsheet to help us resolve the problem';
                        self.uploadFailed(data);

                    },
                    uploadTemplateId: "underStoreyLifeformstemplate-upload",
                    downloadTemplateId: "underStoreyLifeformstemplate-download",
                    formData:{type:'TasVeg Native Vegetation Assessment Method - Forest Vegetation', listName:'underStoreyLifeforms'}
            };
            self.appendTableRows = ko.observable(true);
            self.uploadFailed = function(message) {
                        var text = "<span class='label label-important'>Important</span><h4>There was an error uploading your data.</h4>";
                        text += "<p>"+message+"</p>";
                        bootbox.alert(text)
            };

            self.data.lifeformsPresentNoBenchmark = ko.observable();

            self.data.understoreyScore = ko.observable();

            self.data.lifeformsPresentPercentBenchmark = ko.observable();

            self.data.lifeformsPresentClass = ko.observable();
            self.transients.lifeformsPresentClassConstraints = ["All strata and life forms effectively absent","Up to 50% of life forms present",">= 50% to 90% of life forms present - of those >= 50% substantially modified",">= 50% to 90% of life forms present - of those < 50% substantially modified",">= 90% of life forms present - of those >= 50% substantially modified",">= 90% of life forms present - of those < 50% substantially modified",">= 90% of life forms present - of those none substantially modified"];

            self.data.understoreySummaryScore = ko.observable();

            self.data.totalWeedCoverPercent = ko.observable();

            self.data.highThreatWeedCoverPercent = ko.observable();

            self.data.weedCoverClass = ko.observable();
            self.transients.weedCoverClassConstraints = ["> 75% cover of weeds","25 - 75% cover of weeds","10 - 25% cover of weeds","5 - 10% cover of weeds","< 5% cover of weeds"];

            self.data.highThreatWeedClass = ko.observable();
            self.transients.highThreatWeedClassConstraints = ["None","<= 50%","> 50%"];

            self.data.weedsScore = ko.observable();

            self.data.recruitmentSpecies = ko.observableArray([]);
            self.selectedrecruitmentSpeciesRow = ko.observable();
        

            self.loadrecruitmentSpecies = function (data, append) {
                if (!append) {
                    self.data.recruitmentSpecies([]);
                }
                if (data === undefined) {
                    self.addrecruitmentSpeciesRow();
                } else {
                    $.each(data, function (i, obj) {
                        self.data.recruitmentSpecies.push(new RecruitmentSpeciesRow(obj));
                    });
                }
            };

            self.addrecruitmentSpeciesRow = function () {
                var newRow = new RecruitmentSpeciesRow();
                self.data.recruitmentSpecies.push(newRow);
                
            };
            self.removerecruitmentSpeciesRow = function (row) {
                self.data.recruitmentSpecies.remove(row);
                
            };
            self.recruitmentSpeciesrowCount = function () {
                return self.data.recruitmentSpecies().length;
            };

            self.recruitmentSpeciesTableDataUploadVisible = ko.observable(false);
            self.showrecruitmentSpeciesTableDataUpload = function() {
                self.recruitmentSpeciesTableDataUploadVisible(!self.recruitmentSpeciesTableDataUploadVisible());
            };

            self.recruitmentSpeciesTableDataUploadOptions = {
                    url:'/activity/ajaxUpload',
                    done:function(e, data) {
                        if (data.result.error) {
                            self.uploadFailed(data.result.error);
                        }
                        else {
                            self.loadrecruitmentSpecies(data.result.data, self.appendTableRows());
                        }
                    },
                    fail:function(e, data) {
                        var message = 'Please contact MERIT support and attach your spreadsheet to help us resolve the problem';
                        self.uploadFailed(data);

                    },
                    uploadTemplateId: "recruitmentSpeciestemplate-upload",
                    downloadTemplateId: "recruitmentSpeciestemplate-download",
                    formData:{type:'TasVeg Native Vegetation Assessment Method - Forest Vegetation', listName:'recruitmentSpecies'}
            };
            self.appendTableRows = ko.observable(true);
            self.uploadFailed = function(message) {
                        var text = "<span class='label label-important'>Important</span><h4>There was an error uploading your data.</h4>";
                        text += "<p>"+message+"</p>";
                        bootbox.alert(text)
            };

            self.data.recruitmentCohorts = ko.observable();
            self.transients.recruitmentCohortsConstraints = ["No evidence of a recruitment cohort within community - not driven by episodic events","No evidence of a recruitment cohort - driven by episodic events - clear evidence of appropriate episodic event","No evidence of a recruitment cohort - driven by episodic events - no clear evidence of appropriate episodic event","Evidence of >=1 recruitment cohort in >=1 life form - < 30% species with adequate recruitment","Evidence of >=1 recruitment cohort in >=1 life form - 30% - 70% species with adequate recruitment","Evidence of >=1 recruitment cohort in >=1 life form - >= 70% species with adequate recruitment"];

            self.data.recruitmentDiversity = ko.observable();
            self.transients.recruitmentDiversityConstraints = ["High diversity","Low diversity"];

            self.data.recruitmentScore = ko.observable();

            self.data.organicLitterBenchmarkPercent = ko.observable();

            self.data.organicLitterObservedPercent = ko.observable();

            self.data.organicLitterCoverCategory = ko.observable();
            self.transients.organicLitterCoverCategoryConstraints = ["< 10% of benchmark cover","< 50% of benchmark cover",">= 50% of benchmark cover"];

            self.data.organicLitterType = ko.observable();
            self.transients.organicLitterTypeConstraints = ["Dominated by native organic litter","Dominated by non-native organic litter"];

            self.data.organicLitterScore = ko.observable();

            self.data.logLengthBenchmark = ko.observable();

            self.data.logLengthObserved = ko.observable();

            self.data.logLengthCategory = ko.observable();
            self.transients.logLengthCategoryConstraints = ["< 10% of benchmark length","< 50% of benchmark length",">= 50% of benchmark length"];

            self.data.largeLogsPresent = ko.observable();
            self.transients.largeLogsPresentConstraints = ["Large logs present","Large logs absent"];

            self.data.logScore = ko.observable();

            self.data.benchmarkTreesPerHa = ko.observable();

            self.data.patchSize = ko.observable();

            self.data.patchCategory = ko.observable();
            self.transients.patchCategoryConstraints = ["< 2 ha","Between 2 and 5 ha","Between 5 and 10 ha","Between 10 and 20 ha","More than 20 ha, but significantly disturbed","More than 20 ha but not significantly disturbed"];

            self.data.patchSizeScore = ko.observable();

            self.data.neighbourhood = ko.observableArray([]);
            self.selectedneighbourhoodRow = ko.observable();
        

            self.loadneighbourhood = function (data, append) {
                if (!append) {
                    self.data.neighbourhood([]);
                }
                if (data === undefined) {
                                        self.data.neighbourhood.push(new NeighbourhoodRow({"radiusFromSite":"100 m","nativeVegetationPercent":"","neighbourhoodWeighting":"0.03","weightedScore":""}));
                    self.data.neighbourhood.push(new NeighbourhoodRow({"radiusFromSite":"1 km","nativeVegetationPercent":"","neighbourhoodWeighting":"0.04","weightedScore":""}));
                    self.data.neighbourhood.push(new NeighbourhoodRow({"radiusFromSite":"5 km","nativeVegetationPercent":"","neighbourhoodWeighting":"0.03","weightedScore":""}));
                } else {
                    $.each(data, function (i, obj) {
                        self.data.neighbourhood.push(new NeighbourhoodRow(obj));
                    });
                }
            };

            self.addneighbourhoodRow = function () {
                var newRow = new NeighbourhoodRow();
                self.data.neighbourhood.push(newRow);
                
            };
            self.removeneighbourhoodRow = function (row) {
                self.data.neighbourhood.remove(row);
                
            };
            self.neighbourhoodrowCount = function () {
                return self.data.neighbourhood().length;
            };

            self.neighbourhoodTableDataUploadVisible = ko.observable(false);
            self.showneighbourhoodTableDataUpload = function() {
                self.neighbourhoodTableDataUploadVisible(!self.neighbourhoodTableDataUploadVisible());
            };

            self.neighbourhoodTableDataUploadOptions = {
                    url:'/activity/ajaxUpload',
                    done:function(e, data) {
                        if (data.result.error) {
                            self.uploadFailed(data.result.error);
                        }
                        else {
                            self.loadneighbourhood(data.result.data, self.appendTableRows());
                        }
                    },
                    fail:function(e, data) {
                        var message = 'Please contact MERIT support and attach your spreadsheet to help us resolve the problem';
                        self.uploadFailed(data);

                    },
                    uploadTemplateId: "neighbourhoodtemplate-upload",
                    downloadTemplateId: "neighbourhoodtemplate-download",
                    formData:{type:'TasVeg Native Vegetation Assessment Method - Forest Vegetation', listName:'neighbourhood'}
            };
            self.appendTableRows = ko.observable(true);
            self.uploadFailed = function(message) {
                        var text = "<span class='label label-important'>Important</span><h4>There was an error uploading your data.</h4>";
                        text += "<p>"+message+"</p>";
                        bootbox.alert(text)
            };

            self.data.totalWeightedScore = ko.observable();

            self.data.neighbourhoodSignificantlyDisturbed = ko.observable();
            self.transients.neighbourhoodSignificantlyDisturbedConstraints = ["Yes","No"];

            self.data.neighbourhoodScore = ko.observable();

            self.data.distanceToCoreArea = ko.observable();
            self.transients.distanceToCoreAreaConstraints = ["> 5 km","1 to 5 km","< 1 km","contiguous"];

            self.data.coreAreaSignificantlyDisturbed = ko.observable();
            self.transients.coreAreaSignificantlyDisturbedConstraints = ["Yes","No"];

            self.data.distanceToCoreScore = ko.observable();

            self.data.totalScore = ko.observable();
            self.transients.site = site;

                // this will be called when generating a savable model to remove transient properties
                self.removeBeforeSave = function (jsData) {
                    // add code to remove any transients added by the dynamic tags
                                    delete jsData.selectedunderStoreyLifeformsRow;
                delete jsData.underStoreyLifeformsTableDataUploadOptions
                delete jsData.underStoreyLifeformsTableDataUploadVisible

                    delete jsData.activityType;
                    delete jsData.transients;
                    return jsData;
                };

                // this returns a JS object ready for saving
                self.modelForSaving = function () {
                    // get model as a plain javascript object
                    var jsData = ko.mapping.toJS(self, {'ignore':['transients']});
                    if (self.outputNotCompleted()) {
                        jsData.data = {};
                    }
                    // get rid of any transient observables
                    return self.removeBeforeSave(jsData);
                };

                // this is a version of toJSON that just returns the model as it will be saved
                // it is used for detecting when the model is modified (in a way that should invoke a save)
                // the ko.toJSON conversion is preserved so we can use it to view the active model for debugging
                self.modelAsJSON = function () {
                    return JSON.stringify(self.modelForSaving());
                };

                self.loadData = function (data) {
                    // load dynamic data
                                    self.data['assessor'](data['assessor']);
                self.data['currentLandUse'](data['currentLandUse']);
                self.data['habitatZone'](data['habitatZone']);
                self.data['zoneAreaHa'](orZero(data['zoneAreaHa']));
                self.data['tasvegVcCode'](data['tasvegVcCode']);
                self.data['location'](data['location']);
                self.data['comments'](data['comments']);
                self.data['surveyArea'](orZero(data['surveyArea']));
                self.data['numberOfLargeTreesBenchmark'](orZero(data['numberOfLargeTreesBenchmark']));
                self.data['largeTreeBenchmarkDbh'](orZero(data['largeTreeBenchmarkDbh']));
                self.data['numberOfLargeTreesObserved'](orZero(data['numberOfLargeTreesObserved']));
                self.data['largeTreeDensityClass'](data['largeTreeDensityClass']);
                self.data['largeTreeCanopyHealthPercent'](data['largeTreeCanopyHealthPercent']);
                self.data['largeTreesScore'](orZero(data['largeTreesScore']));
                self.data['canopyCoverPercent'](orZero(data['canopyCoverPercent']));
                self.data['canopyCoverClass'](data['canopyCoverClass']);
                self.data['canopyHealthPercent'](data['canopyHealthPercent']);
                self.data['canopyCoverBenchmark'](orZero(data['canopyCoverBenchmark']));
                self.data['canopyCoverScore'](orZero(data['canopyCoverScore']));
                self.loadunderStoreyLifeforms(data.underStoreyLifeforms);
                self.data['lifeformsPresentNoBenchmark'](orZero(data['lifeformsPresentNoBenchmark']));
                self.data['understoreyScore'](orZero(data['understoreyScore']));
                self.data['lifeformsPresentPercentBenchmark'](orZero(data['lifeformsPresentPercentBenchmark']));
                self.data['lifeformsPresentClass'](data['lifeformsPresentClass']);
                self.data['understoreySummaryScore'](orZero(data['understoreySummaryScore']));
                self.data['totalWeedCoverPercent'](orZero(data['totalWeedCoverPercent']));
                self.data['highThreatWeedCoverPercent'](orZero(data['highThreatWeedCoverPercent']));
                self.data['weedCoverClass'](data['weedCoverClass']);
                self.data['highThreatWeedClass'](data['highThreatWeedClass']);
                self.data['weedsScore'](orZero(data['weedsScore']));
                self.loadrecruitmentSpecies(data.recruitmentSpecies);
                self.data['recruitmentCohorts'](data['recruitmentCohorts']);
                self.data['recruitmentDiversity'](data['recruitmentDiversity']);
                self.data['recruitmentScore'](orZero(data['recruitmentScore']));
                self.data['organicLitterBenchmarkPercent'](orZero(data['organicLitterBenchmarkPercent']));
                self.data['organicLitterObservedPercent'](orZero(data['organicLitterObservedPercent']));
                self.data['organicLitterCoverCategory'](data['organicLitterCoverCategory']);
                self.data['organicLitterType'](data['organicLitterType']);
                self.data['organicLitterScore'](orZero(data['organicLitterScore']));
                self.data['logLengthBenchmark'](orZero(data['logLengthBenchmark']));
                self.data['logLengthObserved'](orZero(data['logLengthObserved']));
                self.data['logLengthCategory'](data['logLengthCategory']);
                self.data['largeLogsPresent'](data['largeLogsPresent']);
                self.data['logScore'](orZero(data['logScore']));
                self.data['benchmarkTreesPerHa'](orZero(data['benchmarkTreesPerHa']));
                self.data['patchSize'](orZero(data['patchSize']));
                self.data['patchCategory'](data['patchCategory']);
                self.data['patchSizeScore'](orZero(data['patchSizeScore']));
                self.loadneighbourhood(data.neighbourhood);
                self.data['totalWeightedScore'](orZero(data['totalWeightedScore']));
                self.data['neighbourhoodSignificantlyDisturbed'](data['neighbourhoodSignificantlyDisturbed']);
                self.data['neighbourhoodScore'](orZero(data['neighbourhoodScore']));
                self.data['distanceToCoreArea'](data['distanceToCoreArea']);
                self.data['coreAreaSignificantlyDisturbed'](data['coreAreaSignificantlyDisturbed']);
                self.data['distanceToCoreScore'](orZero(data['distanceToCoreScore']));
                self.data['totalScore'](orZero(data['totalScore']));


                    // if there is no data in tables then add an empty row for the user to add data
                    if (typeof self.addRow === 'function' && self.rowCount() === 0) {
                        self.addRow();
                    }
                    self.transients.dummy.notifySubscribers();
                };
            };


            var savedData = activity;
            if (!savedData.outputs) {
                savedData.outputs = [];
            }
            var savedOutput = {};
            if (savedData) {

                $.each(savedData.outputs, function(i, tmpOutput) {
                    if (tmpOutput.name === 'TasVeg Native Vegetation Assessment Method - Forest Vegetation') {
                        savedOutput = tmpOutput;
                    }
                });
            }

            var config = JSON.parse('\u007b\u007d');
            window[viewModelInstance] = new this[viewModelName](savedOutput, config);
            var output = savedOutput.data ? savedOutput.data : {};

            window[viewModelInstance].loadData(output);
            window[viewModelInstance].dirtyFlag = ko.dirtyFlag(window[viewModelInstance], false);

            ko.applyBindings(window[viewModelInstance], document.getElementById("koTasVeg_Native_Vegetation_Assessment_Method_-_Forest_Vegetation"));

            // this resets the baseline for detecting changes to the model
            // - shouldn't be required if everything behaves itself but acts as a backup for
            //   any binding side-effects
            // - note that it is not foolproof as applying the bindings happens asynchronously and there
            //   is no easy way to detect its completion
            window[viewModelInstance].dirtyFlag.reset();

            // register with the master controller so this model can participate in the save cycle
            master.register(window[viewModelInstance], window[viewModelInstance].modelForSaving,
            window[viewModelInstance].dirtyFlag.isDirty, window[viewModelInstance].dirtyFlag.reset);
        });

        </script><script type="text/javascript">


    /* Master controller for page. This handles saving each model as required. */
    var Master = function () {
        var self = this;
        this.subscribers = [];
        // client models register their name and methods to participate in saving
        self.register = function (modelInstanceName, getMethod, isDirtyMethod, resetMethod) {
            this.subscribers.push({
                model: modelInstanceName,
                get: getMethod,
                isDirty: isDirtyMethod,
                reset: resetMethod
            });
        };
        // master isDirty flag for the whole page - can control button enabling
        this.isDirty  = function () {
            var dirty = false;
            $.each(this.subscribers, function(i, obj) {
                dirty = dirty || obj.isDirty();
            });
            return dirty;
        };

        this.validate = function() {
            var valid = $('#validation-container').validationEngine('validate');
            if (valid) {
                // Check that forms with multiple optional sections have at least one of those sections completed.
                var optionalCount = 0;
                var notCompletedCount = 0;
                $.each(self.subscribers, function(i, obj) {
                    if (obj.model !== 'activityModel' && obj.model !== 'photoPoints') {
                        if (obj.model.transients.optional) {
                            optionalCount++;
                            if (obj.model.outputNotCompleted()) {
                                notCompletedCount++;
                            }
                        }
                    }
                });
                if (optionalCount > 1 && notCompletedCount == optionalCount) {
                   valid = false;
                   bootbox.alert("<p>To 'Save changes', the mandatory fields of at least one section of this form must be completed.</p>"+
                        "<p>If all sections are 'Not applicable' please contact your grant manager to discuss alternate form options</p>");
                }
            }

            return valid;
        };
        /**
         * Makes an ajax call to save any sections that have been modified. This includes the activity
         * itself and each output.
         *
         * Modified outputs are injected as a list into the activity object. If there is nothing to save
         * in the activity itself, then the root is an object that is empty except for the outputs list.
         *
         * NOTE that the model for each section must register itself to be included in this save.
         *
         * Validates the entire page before saving.
         * @return -1 if the page was not modified, 0 if validation failed, 1 if validation succeeded (or was not requested).
         */
        this.save = function (validate) {
            // Ensure any active change is committed - the knockout binding typically fires on blur.
            $( document.activeElement ).blur();

            if (validate === undefined) {
                validate = true;
            }
            var activityData, outputs = [];

            var success = true;
            if (validate) {
                success = self.validate();
            }
            if (!self.isDirty()) {
                mobileBindings.onSaveActivity(-1, null);
                return -1;
            }
            if (success) {
                $.each(this.subscribers, function(i, obj) {
                    if (obj.model === 'activityModel') {
                        activityData = obj.get();
                    } else {
                        outputs.push(obj.get());
                    }
                });

                if (activityData === undefined) { activityData = {}}
                activityData.outputs = outputs;

                var toSave = JSON.stringify(activityData);
                mobileBindings.onSaveActivity(1, toSave);

            }
            else {
                mobileBindings.onSaveActivity(0, null);
            }
            return success?1:0;
        };

        this.reset = function () {
            $.each(this.subscribers, function(i, obj) {
                if (obj.isDirty()) {
                    obj.reset();
                }
            });
        };

        this.addSite = function(site) {
            var viewModel = ko.dataFor(document.getElementById('site'));
            viewModel.transients.sites.push(site);
            viewModel.siteId(site.siteId);
        }
    };

    if (mobileBindings == undefined) {
        var mobileBindings = {
        
            loadActivity:function(){return "{}"},
        
        
            loadSites:function(){return "[]"},
        
        
            loadThemes:function(){return "[]"},
        

        supportsNewSite:function() { return true; },
        onSaveActivity:function(){},
        createNewSite:function(){}
    };
}
var master = new Master();
var activity = JSON.parse(mobileBindings.loadActivity());
var sites = JSON.parse(mobileBindings.loadSites());
var themes = JSON.parse(mobileBindings.loadThemes());

$(function(){

var scroll = false;

$('#validation-container').validationEngine('attach', {scroll: scroll});

$('.helphover').popover({animation: true, trigger:'hover'});

$('#reset').click(function () {
master.reset();
});

function ViewModel (act, sites, themes) {
var self = this;
var today = new Date().toISOStringNoMillis();

self.activityId = act.activityId;
self.description = ko.observable(act.description);
self.notes = ko.observable(act.notes);
self.startDate = ko.observable(act.startDate || today).extend({simpleDate: false});
self.endDate = ko.observable(act.endDate).extend({simpleDate: false});
self.plannedStartDate = ko.observable(act.plannedStartDate).extend({simpleDate: false});
self.plannedEndDate = ko.observable(act.plannedEndDate).extend({simpleDate: false});
self.eventPurpose = ko.observable(act.eventPurpose);
self.fieldNotes = ko.observable(act.fieldNotes);
self.associatedProgram = ko.observable(act.associatedProgram);
self.associatedSubProgram = ko.observable(act.associatedSubProgram);
self.progress = ko.observable(act.progress);
self.mainTheme = ko.observable(act.mainTheme);
self.type = ko.observable(act.type);
self.siteId = ko.observable(act.siteId);
self.projectId = act.projectId;
self.transients = {};
self.transients.sites = ko.observableArray(sites);
self.transients.photoPoints = ko.computed(function() {
    var site = $.grep(self.transients.sites(), function(site, index) { return site.siteId == self.siteId(); })[0];
     if (site) {
         return site.photoPoints ? site.photoPoints : site.poi;
     }
     return [];
});
self.transients.activityProgressValues = ['planned','started','finished'];
self.transients.themes = themes?themes:[];
self.transients.markedAsFinished = ko.observable(act.progress === 'finished');
self.transients.markedAsFinished.subscribe(function (finished) {
    self.progress(finished ? 'finished' : 'started');
    if (finished || !self.endDate()) {
        self.endDate(today);
    }
});
self.transients.siteImgUrl = ko.computed(function() {
    if (self.siteId()) {
         var site = $.grep(self.transients.sites(), function(site, index) { return site.siteId == self.siteId(); })[0];
         if (site) {
            var lat,lon;
            if (site.centroidLat !== undefined && site.centroidLon !== undefined) {
                lat = site.centroidLat;
                lon = site.centroidLon;
            }
            else if (site.extent && site.extent.geometry && site.extent.geometry.centre) {
                lat = site.extent.geometry.centre[1];
                lon = site.extent.geometry.centre[0];
            }
            if (lat !== undefined && lon !== undefined) {
                $('#siteLocationImage').show();
                return fcConfig.googleStaticUrl+lat+","+lon;
            }
         }
    }
    return "";
});
self.siteLoadError = function(data, event) {
    $('#siteLocationImage').hide();
};

self.transients.newSiteSupported = ko.observable( mobileBindings.supportsNewSite());

self.modelForSaving = function () {
    // get model as a plain javascript object
    var jsData = ko.toJS(self);
    delete jsData.transients;
    return jsData;
};
self.modelAsJSON = function () {
    return JSON.stringify(self.modelForSaving());
};

self.save = function (callback, key) {
};

self.createNewSite = function() {
    mobileBindings.createNewSite();
}

self.notImplemented = function () {
    alert("Not implemented yet.")
};

self.attachPhotoPoint = function(e) {
    console.log(e);
};
self.dirtyFlag = ko.dirtyFlag(self, false);

// make sure progress moves to started if we save any data (unless already finished)
// (do this here so the model becomes dirty)
self.progress(self.transients.markedAsFinished() ? 'finished' : 'started');
}


var viewModel = new ViewModel(activity, sites, themes);

ko.applyBindings(viewModel);

master.register('activityModel', viewModel.modelForSaving, viewModel.dirtyFlag.isDirty, viewModel.dirtyFlag.reset);


});


</script>
</body>
</html>