

<!DOCTYPE html>
<head>
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    
    <script src="static/t5OGphSUjwdNOoxNKgdRTTh1RBtmzhMXxHDYYeR4lYj.js" type="text/javascript" ></script>
<link href="static/090onaZX1M508oSWqGmMeETZ9NkUA9p4CCTW3MUpRPc.css" type="text/css" rel="stylesheet" media="screen, projection" />

<link href="static/VySgOjkVOsD8Jt8ujXROVRjZeDLAAwVhMF5WqPZ8Ajf.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="http://www.ala.org.au/wp-content/themes/ala2011/images/favicon.ico" rel="shortcut icon" />
<!--[if lt IE 9]><script src="static/Yh1Txee3hFzExJ4P1str7tGV24zQMEYtxqtlYJ5ukR0.js" type="text/javascript" ></script><![endif]-->
<link href="static/Qwaw257M4sHcJuspEDRbeQoTceByqRmOCHNaZWpOxuc.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="static/AcXIjLTuc87n8sfxBjJRQSoBIUwP9RnCyK8Sv82i7eV.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="static/doSKUivnfI9gXmPKZ2XG4W5xIABYgKaf5Dwf3LtjNVr.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="static/fx5pGfEFSRJi6nyez3s8fUsjDL8WJ0IB04Njm7T2VAJ.css" type="text/css" rel="stylesheet" media="all" />
<link href="static/iHX8x0PqEmsjgyBEeq6NRvjAytsYzmt25tsjtHoHXDq.css" type="text/css" rel="stylesheet" media="screen,print" />




<link href="static/KYGDEVRRaKjNbTXJkHmicmzo9vFrnnzCnGLcxKjR04f.css" type="text/css" rel="stylesheet" media="screen,print" />

<link href="static/exPgH85S7hDuxmySlOZhM0sayvRJla83G3HHYJNzaUB.css" type="text/css" rel="stylesheet" media="screen,print" />
<link href="static/tNjfADEdRvZz6orXSyopLhQhlHwq7bH7hcAZQiGZMoc.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="/static/RrjzrZ0Ci0GPLETIr8x8KUMjfJtZKvifrUtMCedwKRB.png" rel="shortcut icon" />
<link href="static/4zsVqykqBON8U5Es5kfffXBSGJlbI8VrPDW4hSn1SWJ.css" type="text/css" rel="stylesheet" media="screen, projection" />


<link href="static/sCFm7bBsIMFGQHTSlBbhMHQCXWhOsbBr5z4bu1OueIE.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="static/tUELnv7Uvq6ppWNUWOlaow3JGSTTIf8hJ2VYvh7Oahj.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="/static/OKcRcjAeA1yuXD9r4fZA1Uw2HEwL7gYvjc6HdrZXIYP.png" rel="shortcut icon" />
<link href="/static/UxF0saaqmikaj74l2WFcCyPMm9hEEs8if7IBy0GNAnd.png" rel="shortcut icon" />
<link href="/static/zs4hrJqt7I802RlaZiXbmbDBarpNPZF8V8fCQJ2RVTM.png" rel="shortcut icon" />
<link href="/static/SvC1e8bSiCPFh8mObbEThgbJIaGZi72ATzqobK6QnnB.gif" rel="shortcut icon" />
<link href="/static/BA9MhIHZnH0zMcKJWIWsTurHhQTpDYE6akqM5excaZI.gif" rel="shortcut icon" />

<script type="text/javascript">
    var fcConfig = {
        bieUrl: "#",
        speciesProfileUrl: "https://fieldcapture-test.ala.org.au/proxy/speciesProfile",
        googleStaticUrl:"http://maps.googleapis.com/maps/api/staticmap?maptype=terrian&zoom=12&sensor=false&size=350x250&markers=color:red%7C"
        },
        here = document.location.href;
    </script>
    

    <meta name="layout" content="mobile"/>

    
    
    
</if>

    <style type="text/css">
        input[type=checkbox] {  -webkit-transform: scale(1.5); }
        .checkbox-list label { min-height: 40px; }
        .speciesAutocompleteRow {min-height:40px;}
        .datepicker td, .datepicker th {
            width:40px;
            height:40px;
            vertical-align: middle;
        }
    </style>
</head>

<body>

<div id="content" class="clearfix">
    
<div class="container-fluid validationEngineContainer" id="validation-container">
<div id="koActivityMainBlock">

    <div class="row-fluid">
        <div class="span12">
            <!-- Common activity fields -->

            <div class="row-fluid space-after">
                <div class="span4">

                    <label class="for-readonly">Type</label>
                    <span class="readonly-text" data-bind="text:type"></span>
                </div>
                <div class="span8">

                    <label class="for-readonly">Description</label>
                    <span class="readonly-text" data-bind="text:description"></span>
                </div>
            </div>


            <div class="row-fluid space-after">
                <div class="span4">
                    <label class="for-readonly inline">Planned start date</label>
                    <span class="readonly-text" data-bind="text:plannedStartDate.formattedDate"></span>
                </div>
                <div class="span8">
                    <label class="for-readonly inline">Planned end date</label>
                    <span class="readonly-text" data-bind="text:plannedEndDate.formattedDate"></span>
                </div>
            </div>

            <div class="well">
                <div class="row-fluid">

                    <span class="span8">
                    <div class="row-fluid space-after">

                        <div class="span6 required">
                            <label for="startDate"><b>Actual start date</b>
                                <a href='#' class='helphover' data-original-title='Start date' data-placement='top' data-content='Date the activity was started.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a>
                            </label>


                            <div class="input-append">
                                <input data-bind='datepicker:startDate.date' name='startDate' id='startDate' type='text' size='16' class='input-xlarge' readonly='readonly' targetField='startDate.date' data-validation-engine='validate[required]' />
<span class='add-on open-datepicker'>
  <i class='icon-th'>&nbsp;</i>
</span>
                            </div>

                        </div>
                        <div class="span6" data-bind="css:{required:transients.markedAsFinished}">
                            <label for="endDate"><b>Actual end date</b>
                                <a href='#' class='helphover' data-original-title='End date' data-placement='top' data-content='Date the activity finished.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a>
                            </label>

                            <div class="input-append">
                                <input data-bind='datepicker:endDate.date' name='endDate' id='endDate' type='text' size='16' class='input-xlarge' readonly='readonly' targetField='endDate.date' data-validation-engine='validate[future[startDate]]' />
<span class='add-on open-datepicker'>
  <i class='icon-th'>&nbsp;</i>
</span>
                            </div>

                        </div>
                    </div>
                    <div class="row-fluid space-after">
                        <div class="span6">
                            <label for="theme"><b>Major theme</b></label>
                            <select id="theme" data-bind="value:mainTheme, options:transients.themes, optionsCaption:'Choose..'" class="input-xlarge" style="width:90%">
                            </select>
                        </div>

                        <div class="span6">
                            <label><b>Progress</b></label>
                            <label for="activityComplete"><input type="checkbox" id="activityComplete" data-bind="checked:transients.markedAsFinished" style="margin-right:1em;"><span>This activity is complete</span></label>

                        </div>

                    </div>
                    <div class="row-fluid">
                        <div class="span6">
                            <label for="site"><b>Site</b></label>
                            <select id='site' style='width:90%' data-bind='options:transients.sites,optionsText:"name",optionsValue:"siteId",value:siteId,optionsCaption:"Choose a site..."'>&nbsp;</select>

                        </div>

                        <div class="span3">

                            <button class="btn btn-info" style="margin-top:25px;" data-bind="visible:transients.newSiteSupported,click:createNewSite">Create new Site</button>
                        </div>
                    </div>

                    
                        
                            
                                
                            
                            
                                
                                    
                                    
                                    
                                    

                                
                            
                        

                    
                    </span>
                    <span class="span4">

                        <img id="siteLocationImage" width="100%" data-bind="event:{error:siteLoadError}, attr:{src:transients.siteImgUrl}, visible:transients.siteImgUrl()"/>


                    </span>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- ko stopBinding: true -->

    
    
    
    <style type="text/css">
        table.issues th {white-space:normal;}
        table.issues tbody td:nth-child(1) {width:10%;text-align:center;}
        table.issues tbody td:nth-child(1)
        table.issues tbody td:nth-child(2) {width:25%;}
        table.issues tbody td:nth-child(2)
        table.issues tbody td:nth-child(3) {width:25%;}
        table.issues tbody td:nth-child(3)
        table.issues tbody td:nth-child(4) {width:25%;}
        table.issues tbody td:nth-child(4)
        table.issues td:last-child {width:4%;text-align:center;}
        table.issues textarea {width:100%; box-sizing:border-box; }
        table.issues select {width:100%; box-sizing:border-box; }
    </style><style type="text/css">
        table.budgetIssues th {white-space:normal;}
        table.budgetIssues tbody td:nth-child(1) {width:10%;}
        table.budgetIssues tbody td:nth-child(1)
        table.budgetIssues tbody td:nth-child(2) {width:30%;}
        table.budgetIssues tbody td:nth-child(2)
        table.budgetIssues tbody td:nth-child(3) {width:30%;}
        table.budgetIssues tbody td:nth-child(3)
        table.budgetIssues tbody td:nth-child(4) {width:30%;}
        table.budgetIssues tbody td:nth-child(4)
        table.budgetIssues td:last-child {width:4%;text-align:center;}
        table.budgetIssues textarea {width:100%; box-sizing:border-box; }
        table.budgetIssues select {width:100%; box-sizing:border-box; }
    </style>
    <div class="output-block" id="koProgress_Report_Details">
            <h3 data-bind="css:{modified:dirtyFlag.isDirty},attr:{title:'Has been modified'}">Progress Report Details</h3>
        <div data-bind="if:transients.optional">
            <label class="checkbox" ><input type="checkbox" data-bind="checked:outputNotCompleted"> <span data-bind="text:transients.questionText"></span> </label>
        </div>
        <div id="Progress_Report_Details-content" data-bind="visible:!outputNotCompleted()">
        <!-- add the dynamic components -->
            <div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>1. Organisation and contact Details</h4></span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span12">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>1.1 Has there been a change in the details of your organisation or key project personnel that you have not yet advised the Department of the Environment?<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Indicate whether there has been a change in the details of your organisation or key project personnel since the application or previous report. Changes may include: Organisation name, Trust Deed; name, position, role, email, telephone, or address of key contacts. If ‘Yes’, provide details to the Department by email prior to submitting your project report.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><select class="span8" data-bind='value:data.orgDetailsChange,options:transients.orgDetailsChangeConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>2. Summary of Project Progress for the Period</h4></span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span12">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>2.1 Provide a summary of what has been achieved to date against each Activity and the Outcomes identified in your Funding Agreement.<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='a) May include activities such as photopoints, feedback surveys, flora/fauna/pest/weed surveys, mapping, analyses undertaken, etc.;  b) comment on what the findings are revealing about the issue, trends, and progress or how aspects can be done better? (Attachments may be added to your project record);  c) Is there a need to change your current approach? If so, what, when and how?            '>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><textarea  class="span8" data-bind='value:data.achievementsSummary'></textarea></span></div><div class="row-fluid"><span class="span12">    <span  class="span8"><h5>2.2 If you have encountered any issues or delays in delivering the project's Activities and / or Outcomes, please explain here: a) the nature of the issues, b) how you are managing (or proposing to manage) the issues, and c) implications for the project.</h5> <i>(only complete this question if relevant)</i></span></span></div><div class="row-fluid output-section">
            <table class="table table-bordered issues " >
                <thead><tr><th>Issue No.<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='A sequential reference number for the issue (e.g. 1, 2, 3, etc.). Please do not duplicate reference numbers.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>Nature of the Issue<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Describe the nature of the issue. (e.g. The order placed with our preferred supplier for tubestock and seed could not be fully met)'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>How you are managing, or proposing to manage, the issue?<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Indicate how you are intending to manage, or are currently managing this issue (e.g. An alternate supplier has been found with seed and tubestock in stock. An order was placed on 10 April 2015.). Note – variations from what is contracted must first be approved by the Department.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>Implications for the project<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Indicate what impacts (if any) the issue may have on the project – such as timeframes, feasibility, costs, ability to meet contracted deliverables. (e.g. This will cause a temporary delay of one month but seasonal conditions will still allow planting. Other project elements remain on-track and project objectives and outputs can still be met. The order will cost $60 more than originally budgeted, but costs will be met by savings gained in herbicide purchase). Note – Changes to budget line item expenditure of &gt;10% are to first be approved by the Department.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th></th>
                </tr></thead>
                <tbody data-bind="template:{name:'issuesviewTmpl', foreach: data.issues}"></tbody>
                <script id="issuesviewTmpl" type="text/html"><tr>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:issueReference' data-validation-engine='validate[custom[number],min[0]]' type='number' class='input-mini'/></td>
                    <td><textarea  data-bind='value:issueDescription'></textarea></td>
                    <td><textarea  data-bind='value:issueManagement'></textarea></td>
                    <td><textarea  data-bind='value:issuesImpacts'></textarea></td>
                    <td><i data-bind='click:$root.removeissuesRow' class='icon-remove'></i></td>
                </tr></script>
                <tfoot>
                <tr><td colspan="5" style="text-align:left;">
                        <button type="button" class="btn btn-small" data-bind="click:addissuesRow">
                        <i class="icon-plus"></i> Add a row</button></td></tr> <script id="issuestemplate-upload" type="text/x-tmpl">{% %}</script>
                       <script id="issuestemplate-download" type="text/x-tmpl">{% %}</script>                </tfoot>
            </table>
        </div>
</div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>3. Monitoring, Evaluation and Project Learnings</h4></span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span12">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>3.1 Provide a summary of a) what project monitoring and/or evaluation activities have been undertaken to date; b) any key findings and / or learnings gained from the project; and c) any changes you are making in response to these.<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='May include: a) Photopoints, feedback surveys, flora/fauna/pest/weed surveys, mapping, analyses undertaken, etc.; b) Comments on what the findings are revealing about the issue, trends, and progress or how aspects can be done better? (Attachments may be added to your project record); and c) Whether there is a need to change your current approach? If so, what, when and how?'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><textarea  class="span8" data-bind='value:data.monitoringEvaluationLearning'></textarea></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>4. Other Comments</h4></span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span12">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Please provide any further comments you may wish to make on the project and / or programme.<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='You may provide here: information on the project that does not fit more appropriately in other questions; notice of, or invitations to, important events (including those suitable for the Minister(s)); feedback to the Department on its programme and processes.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><textarea  class="span8" data-bind='value:data.notes'></textarea></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>5. Project Income and Expenditure</h4></span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span12">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>5.1 Is the project's expenditure proceeding in accordance with the budget, the expected rate of expenditure and within the total project budget?<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Note – variations of &gt;10% to budget line items will require Departmental approval. If you answer ‘No’ an explanation is required at 5.3.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><select class="span8" data-bind='value:data.budgetTracking,options:transients.budgetTrackingConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>5.2 If your project budget includes 'Recipient' or 'Other' cash contributions, have they been received and / or been contracted to be received?<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='This question is mandatory and seeks confirmation that these funds are being (or will be) provided to the project. If you have no CASH contributions (‘Recipient’ or ‘Other’) in your project budget, select “N/A”. If you answer ‘No’ an explanation is required at 5.3.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><select class="span8" data-bind='value:data.budgetReceiptsReceived,options:transients.budgetReceiptsReceivedConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div><div class="row-fluid"><span class="span12">    <span  class="span8"><h5>5.3 If you answered 'No' to question 5.1 or 5.2, please explain here: a) the nature of the issues; b) how you are managing (or proposing to manage) the issues, and c) implications for the project.</h5><i>Only complete if applicable. Note - cash contributions are expected to be provided in line with the Funding Agreement, otherwise it constitutes a variation. The Government has a right under the Agreement (which it may or may not exercise) to reduce its contribution and recover some funds paid, or to terminate an Agreement.</i></span></span></div><div class="row-fluid output-section">
            <table class="table table-bordered budgetIssues " >
                <thead><tr><th>Issue No.<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='A sequential reference number for the issue (e.g. 1, 2, 3, etc.). Please do not duplicate reference numbers.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>Nature of the budget issue<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Please clearly identify whether ‘Department’, ‘Recipient’ and/or ‘Other’ cash is involved, the amounts of each and the budget line item(s) affected.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>How you are managing, or proposing to manage, the issue?<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='If already covered at Q2.2, you may enter - Refer to Q2.2.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>Implications for the project<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='If already covered at Q2.2, you may enter &apos;Refer to Q2.2.&apos; Otherwise, indicate what impacts (if any) the issue may have on the project – e.g. timeframes, feasibility, costs, ability to meet contracted contributions/deliverables.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th></th>
                </tr></thead>
                <tbody data-bind="template:{name:'budgetIssuesviewTmpl', foreach: data.budgetIssues}"></tbody>
                <script id="budgetIssuesviewTmpl" type="text/html"><tr>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:budgetIssueReference' type='number' class='input-mini'/></td>
                    <td><textarea  data-bind='value:budgetIssueDescription'></textarea></td>
                    <td><textarea  data-bind='value:budgetIssueManagement'></textarea></td>
                    <td><textarea  data-bind='value:budgetIssueImpacts'></textarea></td>
                    <td><i data-bind='click:$root.removebudgetIssuesRow' class='icon-remove'></i></td>
                </tr></script>
                <tfoot>
                <tr><td colspan="5" style="text-align:left;">
                        <button type="button" class="btn btn-small" data-bind="click:addbudgetIssuesRow">
                        <i class="icon-plus"></i> Add a row</button></td></tr> <script id="budgetIssuestemplate-upload" type="text/x-tmpl">{% %}</script>
                       <script id="budgetIssuestemplate-download" type="text/x-tmpl">{% %}</script>                </tfoot>
            </table>
        </div>
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>5.4 If you have additional comments on the project's income, expenditure or budget, please provide them here.<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Optional. You may add here information related to the budget that does not fit more appropriately in other fields.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><textarea  class="span8" data-bind='value:data.budgetNotes'></textarea></span></div></div></div>

        </div>
        
    </div>
    

    
    
    
    
    <div class="output-block" id="koAttachments">
            <h3 data-bind="css:{modified:dirtyFlag.isDirty},attr:{title:'Has been modified'}">Attachments</h3>
        <div data-bind="if:transients.optional">
            <label class="checkbox" ><input type="checkbox" data-bind="checked:outputNotCompleted"> <span data-bind="text:transients.questionText"></span> </label>
        </div>
        <div id="Attachments-content" data-bind="visible:!outputNotCompleted()">
        <!-- add the dynamic components -->
            <div class="row-fluid space-after " >
<span class="span12">    <span  class="span12">Supporting documents are required (where available) to support the statements you have made regarding your progress/achievement.</span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span6">
<div class="row-fluid"><span class="span12">    <span  class="span8"><h4>Supporting Documents</h4><i>Please attach relevant supporting documents (e.g. photos, media clips, survey data, information products/publications, etc.) that provide evidence of the project's progress and / or impacts.</i></span></span></div><div class="row-fluid"><span class="span12">    <div data-bind="if:(data.supportingDocs1())">    <div data-bind="editDocument:data.supportingDocs1"></div></div><div data-bind="ifnot:data.supportingDocs1()">    <button class="btn" id="doAttach" data-bind="click:function(target) {attachDocument(data.supportingDocs1)}">Attach Document</button></div></span></div><div class="row-fluid"><span class="span12">    <div data-bind="if:(data.supportingDocs2())">    <div data-bind="editDocument:data.supportingDocs2"></div></div><div data-bind="ifnot:data.supportingDocs2()">    <button class="btn" id="doAttach" data-bind="click:function(target) {attachDocument(data.supportingDocs2)}">Attach Document</button></div></span></div><div class="row-fluid"><span class="span12">    <div data-bind="if:(data.supportingDocs3())">    <div data-bind="editDocument:data.supportingDocs3"></div></div><div data-bind="ifnot:data.supportingDocs3()">    <button class="btn" id="doAttach" data-bind="click:function(target) {attachDocument(data.supportingDocs3)}">Attach Document</button></div></span></div></div><div class="span6">
<div class="row-fluid"><span class="span12">    <span  class="span8"><h4>Additional Information (optional)</h4><i>You may attach other documents relevant to your project for the Department's information.</i></span></span></div><div class="row-fluid"><span class="span12">    <div data-bind="if:(data.additionalInfo1())">    <div data-bind="editDocument:data.additionalInfo1"></div></div><div data-bind="ifnot:data.additionalInfo1()">    <button class="btn" id="doAttach" data-bind="click:function(target) {attachDocument(data.additionalInfo1)}">Attach Document</button></div></span></div><div class="row-fluid"><span class="span12">    <div data-bind="if:(data.additionalInfo2())">    <div data-bind="editDocument:data.additionalInfo2"></div></div><div data-bind="ifnot:data.additionalInfo2()">    <button class="btn" id="doAttach" data-bind="click:function(target) {attachDocument(data.additionalInfo2)}">Attach Document</button></div></span></div><div class="row-fluid"><span class="span12">    <div data-bind="if:(data.additionalInfo3())">    <div data-bind="editDocument:data.additionalInfo3"></div></div><div data-bind="ifnot:data.additionalInfo3()">    <button class="btn" id="doAttach" data-bind="click:function(target) {attachDocument(data.additionalInfo3)}">Attach Document</button></div></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12">If you have additional documents, please add them via the <b>Admin > Documents</b> tab.</span></span></div>

        </div>
        
    </div>
    

<!-- /ko -->

</div>




</div>

<script src="static/Zbj0J8XhmZDqWqIAz5C46TWLOULGl7LNvdJeBlO9fMb.js" type="text/javascript" ></script>





<script src="static/5zeDycYZFxJsfDd3W1kuhrN47XnIMrbhS6gdHDvcExv.js" type="text/javascript" ></script>

<script src="static/ulxBmo4RrKTNT3DuFHethb4EOZpwQfvefxNXivDIbzp.js" type="text/javascript" ></script>








<!--[if gte IE 8]><script src="static/knxjs4G9Cquc79O3iYW107XikPB1Z1ii8QWrtBpzlSP.js" type="text/javascript" ></script><![endif]-->
<script src="static/nRrltgvxdEHd5BqRR1v4XU3ZStOrhDScuH03g4r8E6O.js" type="text/javascript" ></script>

<script src="static/zP22SFJVnKXoWuBJdbsNhcivH2iXiC57wEOHXSDNudf.js" type="text/javascript" ></script>

<script src="static/QjmKsgTA1QWYxF0gcpdSFROG8mBnzaabMZcvDxBb9Xo.js" type="text/javascript" ></script>






<script src="static/IZCc6ZgD3MepYbz4UqlDLzMDNNghSCivcfGebmF9V2d.js" type="text/javascript" ></script>
<script src="static/I4NiLd8qMXMMgs4hAqHb5YT0jGlQhM4Yp0dku4W1Wng.js" type="text/javascript" ></script>



<script src="static/e9gGniNN5cG3OR4oPVWd5lYoxE5Xf282hFe7d4FTQbq.js" type="text/javascript" ></script>


<script src="static/CRNxISj7t7ZCV7B8M8dFtBK7x7R4tGVO36INoBz8gQX.js" type="text/javascript" ></script>

<script src="static/QhlSgFWjl35vcaCRa5cKxHZxRWSSluzptQUKz3PHr9s.js" type="text/javascript" ></script>


<script src="static/8WCQyXwicnBgTdLQ4F5jUFtmVXmqG9eUZKvo74wOnIT.js" type="text/javascript" ></script>
<script src="static/9HtLc6nfgO9H72LVVZxetW45ZR623Fx8EhEdydgOq2F.js" type="text/javascript" ></script>
<script src="static/wkrwT3eqoZlWXFPCQRTvkdsdvwzT5Lw2H89f9eTkQdb.js" type="text/javascript" ></script>


<script type="text/javascript">
        $(function(){

            var viewModelName = "Progress_Report_DetailsViewModel",
                viewModelInstance = viewModelName + "Instance";

            // load dynamic models - usually objects in a list
                    var IssuesRow = function (data) {
            var self = this;
            if (!data) data = {};
            self.transients = {};
            this.issueReference = ko.observable(orZero(data['issueReference']));
            this.issueDescription = ko.observable(orBlank(data['issueDescription']));
            this.issueManagement = ko.observable(orBlank(data['issueManagement']));
            this.issuesImpacts = ko.observable(orBlank(data['issuesImpacts']));
        };
        var BudgetIssuesRow = function (data) {
            var self = this;
            if (!data) data = {};
            self.transients = {};
            this.budgetIssueReference = ko.observable(orBlank(data['budgetIssueReference']));
            this.budgetIssueDescription = ko.observable(orBlank(data['budgetIssueDescription']));
            this.budgetIssueManagement = ko.observable(orBlank(data['budgetIssueManagement']));
            this.budgetIssueImpacts = ko.observable(orBlank(data['budgetIssueImpacts']));
        };
        var speciesLists = [];
        var site = {};


            this[viewModelName] = function (output, config) {
                var self = this;
                self.name = "Progress Report Details";
                self.outputId = orBlank(output.outputId);

                self.data = {};
                self.transients = {};
                var notCompleted = output.outputNotCompleted;

                if (notCompleted === undefined) {
                    notCompleted = config.collapsedByDefault;
                }
                self.outputNotCompleted = ko.observable(notCompleted);
                self.transients.optional = config.optional || false;
                self.transients.questionText = config.optionalQuestionText || 'Not applicable';
                self.transients.dummy = ko.observable();

                // add declarations for dynamic data
                
            self.data.orgDetailsChange = ko.observable();
            self.transients.orgDetailsChangeConstraints = ["Yes","No"];

            self.data.achievementsSummary = ko.observable();

            self.data.issues = ko.observableArray([]);
            self.selectedissuesRow = ko.observable();
        

            self.loadissues = function (data, append) {
                if (!append) {
                    self.data.issues([]);
                }
                if (data === undefined) {
                    self.addissuesRow();
                } else {
                    $.each(data, function (i, obj) {
                        self.data.issues.push(new IssuesRow(obj));
                    });
                }
            };

            self.addissuesRow = function () {
                var newRow = new IssuesRow();
                self.data.issues.push(newRow);
                
            };
            self.removeissuesRow = function (row) {
                self.data.issues.remove(row);
                
            };
            self.issuesrowCount = function () {
                return self.data.issues().length;
            };

            self.issuesTableDataUploadVisible = ko.observable(false);
            self.showissuesTableDataUpload = function() {
                self.issuesTableDataUploadVisible(!self.issuesTableDataUploadVisible());
            };

            self.issuesTableDataUploadOptions = {
                    url:'/activity/ajaxUpload',
                    done:function(e, data) {
                        if (data.result.error) {
                            self.uploadFailed(data.result.error);
                        }
                        else {
                            self.loadissues(data.result.data, self.appendTableRows());
                        }
                    },
                    fail:function(e, data) {
                        var message = 'Please contact MERIT support and attach your spreadsheet to help us resolve the problem';
                        self.uploadFailed(data);

                    },
                    uploadTemplateId: "issuestemplate-upload",
                    downloadTemplateId: "issuestemplate-download",
                    formData:{type:'Progress Report Details', listName:'issues'}
            };
            self.appendTableRows = ko.observable(true);
            self.uploadFailed = function(message) {
                        var text = "<span class='label label-important'>Important</span><h4>There was an error uploading your data.</h4>";
                        text += "<p>"+message+"</p>";
                        bootbox.alert(text)
            };

            self.data.monitoringEvaluationLearning = ko.observable();

            self.data.notes = ko.observable();

            self.data.budgetTracking = ko.observable();
            self.transients.budgetTrackingConstraints = ["Yes","No"];

            self.data.budgetReceiptsReceived = ko.observable();
            self.transients.budgetReceiptsReceivedConstraints = ["Yes","No","Not applicable"];

            self.data.budgetIssues = ko.observableArray([]);
            self.selectedbudgetIssuesRow = ko.observable();
        

            self.loadbudgetIssues = function (data, append) {
                if (!append) {
                    self.data.budgetIssues([]);
                }
                if (data === undefined) {
                    self.addbudgetIssuesRow();
                } else {
                    $.each(data, function (i, obj) {
                        self.data.budgetIssues.push(new BudgetIssuesRow(obj));
                    });
                }
            };

            self.addbudgetIssuesRow = function () {
                var newRow = new BudgetIssuesRow();
                self.data.budgetIssues.push(newRow);
                
            };
            self.removebudgetIssuesRow = function (row) {
                self.data.budgetIssues.remove(row);
                
            };
            self.budgetIssuesrowCount = function () {
                return self.data.budgetIssues().length;
            };

            self.budgetIssuesTableDataUploadVisible = ko.observable(false);
            self.showbudgetIssuesTableDataUpload = function() {
                self.budgetIssuesTableDataUploadVisible(!self.budgetIssuesTableDataUploadVisible());
            };

            self.budgetIssuesTableDataUploadOptions = {
                    url:'/activity/ajaxUpload',
                    done:function(e, data) {
                        if (data.result.error) {
                            self.uploadFailed(data.result.error);
                        }
                        else {
                            self.loadbudgetIssues(data.result.data, self.appendTableRows());
                        }
                    },
                    fail:function(e, data) {
                        var message = 'Please contact MERIT support and attach your spreadsheet to help us resolve the problem';
                        self.uploadFailed(data);

                    },
                    uploadTemplateId: "budgetIssuestemplate-upload",
                    downloadTemplateId: "budgetIssuestemplate-download",
                    formData:{type:'Progress Report Details', listName:'budgetIssues'}
            };
            self.appendTableRows = ko.observable(true);
            self.uploadFailed = function(message) {
                        var text = "<span class='label label-important'>Important</span><h4>There was an error uploading your data.</h4>";
                        text += "<p>"+message+"</p>";
                        bootbox.alert(text)
            };

            self.data.budgetNotes = ko.observable();
            self.transients.site = site;

                // this will be called when generating a savable model to remove transient properties
                self.removeBeforeSave = function (jsData) {
                    // add code to remove any transients added by the dynamic tags
                    
                    delete jsData.activityType;
                    delete jsData.transients;
                    return jsData;
                };

                // this returns a JS object ready for saving
                self.modelForSaving = function () {
                    // get model as a plain javascript object
                    var jsData = ko.mapping.toJS(self, {'ignore':['transients']});
                    if (self.outputNotCompleted()) {
                        jsData.data = {};
                    }
                    // get rid of any transient observables
                    return self.removeBeforeSave(jsData);
                };

                // this is a version of toJSON that just returns the model as it will be saved
                // it is used for detecting when the model is modified (in a way that should invoke a save)
                // the ko.toJSON conversion is preserved so we can use it to view the active model for debugging
                self.modelAsJSON = function () {
                    return JSON.stringify(self.modelForSaving());
                };

                self.loadData = function (data) {
                    // load dynamic data
                                    self.data['orgDetailsChange'](data['orgDetailsChange']);
                self.data['achievementsSummary'](data['achievementsSummary']);
                self.loadissues(data.issues);
                self.data['monitoringEvaluationLearning'](data['monitoringEvaluationLearning']);
                self.data['notes'](data['notes']);
                self.data['budgetTracking'](data['budgetTracking']);
                self.data['budgetReceiptsReceived'](data['budgetReceiptsReceived']);
                self.loadbudgetIssues(data.budgetIssues);
                self.data['budgetNotes'](data['budgetNotes']);


                    // if there is no data in tables then add an empty row for the user to add data
                    if (typeof self.addRow === 'function' && self.rowCount() === 0) {
                        self.addRow();
                    }
                    self.transients.dummy.notifySubscribers();
                };
            };


            var savedData = activity;
            if (!savedData.outputs) {
                savedData.outputs = [];
            }
            var savedOutput = {};
            if (savedData) {

                $.each(savedData.outputs, function(i, tmpOutput) {
                    if (tmpOutput.name === 'Progress Report Details') {
                        savedOutput = tmpOutput;
                    }
                });
            }

            var config = JSON.parse('\u007b\u007d');
            window[viewModelInstance] = new this[viewModelName](savedOutput, config);
            var output = savedOutput.data ? savedOutput.data : {};

            window[viewModelInstance].loadData(output);
            window[viewModelInstance].dirtyFlag = ko.dirtyFlag(window[viewModelInstance], false);

            ko.applyBindings(window[viewModelInstance], document.getElementById("koProgress_Report_Details"));

            // this resets the baseline for detecting changes to the model
            // - shouldn't be required if everything behaves itself but acts as a backup for
            //   any binding side-effects
            // - note that it is not foolproof as applying the bindings happens asynchronously and there
            //   is no easy way to detect its completion
            window[viewModelInstance].dirtyFlag.reset();

            // register with the master controller so this model can participate in the save cycle
            master.register(window[viewModelInstance], window[viewModelInstance].modelForSaving,
            window[viewModelInstance].dirtyFlag.isDirty, window[viewModelInstance].dirtyFlag.reset);
        });

        </script><script type="text/javascript">
        $(function(){

            var viewModelName = "AttachmentsViewModel",
                viewModelInstance = viewModelName + "Instance";

            // load dynamic models - usually objects in a list
                    var speciesLists = [];
        var site = {};


            this[viewModelName] = function (output, config) {
                var self = this;
                self.name = "Attachments";
                self.outputId = orBlank(output.outputId);

                self.data = {};
                self.transients = {};
                var notCompleted = output.outputNotCompleted;

                if (notCompleted === undefined) {
                    notCompleted = config.collapsedByDefault;
                }
                self.outputNotCompleted = ko.observable(notCompleted);
                self.transients.optional = config.optional || false;
                self.transients.questionText = config.optionalQuestionText || 'Not applicable';
                self.transients.dummy = ko.observable();

                // add declarations for dynamic data
                
            self.data.supportingDocs1 = ko.observable();

            self.data.supportingDocs2 = ko.observable();

            self.data.supportingDocs3 = ko.observable();

            self.data.additionalInfo1 = ko.observable();

            self.data.additionalInfo2 = ko.observable();

            self.data.additionalInfo3 = ko.observable();
            self.transients.site = site;

                // this will be called when generating a savable model to remove transient properties
                self.removeBeforeSave = function (jsData) {
                    // add code to remove any transients added by the dynamic tags
                                    if (jsData.data && jsData.data.supportingDocs1) { jsData.data.supportingDocs1 = jsData.data.supportingDocs1.documentId; }                if (jsData.data && jsData.data.supportingDocs2) { jsData.data.supportingDocs2 = jsData.data.supportingDocs2.documentId; }                if (jsData.data && jsData.data.supportingDocs3) { jsData.data.supportingDocs3 = jsData.data.supportingDocs3.documentId; }                if (jsData.data && jsData.data.additionalInfo1) { jsData.data.additionalInfo1 = jsData.data.additionalInfo1.documentId; }                if (jsData.data && jsData.data.additionalInfo2) { jsData.data.additionalInfo2 = jsData.data.additionalInfo2.documentId; }                if (jsData.data && jsData.data.additionalInfo3) { jsData.data.additionalInfo3 = jsData.data.additionalInfo3.documentId; }
                    delete jsData.activityType;
                    delete jsData.transients;
                    return jsData;
                };

                // this returns a JS object ready for saving
                self.modelForSaving = function () {
                    // get model as a plain javascript object
                    var jsData = ko.mapping.toJS(self, {'ignore':['transients']});
                    if (self.outputNotCompleted()) {
                        jsData.data = {};
                    }
                    // get rid of any transient observables
                    return self.removeBeforeSave(jsData);
                };

                // this is a version of toJSON that just returns the model as it will be saved
                // it is used for detecting when the model is modified (in a way that should invoke a save)
                // the ko.toJSON conversion is preserved so we can use it to view the active model for debugging
                self.modelAsJSON = function () {
                    return JSON.stringify(self.modelForSaving());
                };

                self.loadData = function (data) {
                    // load dynamic data
                                    var doc = findDocumentById(documents, data['supportingDocs1']);
                if (doc) {
                                self.data['supportingDocs1'](new DocumentViewModel(doc));
                }
                var doc = findDocumentById(documents, data['supportingDocs2']);
                if (doc) {
                                self.data['supportingDocs2'](new DocumentViewModel(doc));
                }
                var doc = findDocumentById(documents, data['supportingDocs3']);
                if (doc) {
                                self.data['supportingDocs3'](new DocumentViewModel(doc));
                }
                var doc = findDocumentById(documents, data['additionalInfo1']);
                if (doc) {
                                self.data['additionalInfo1'](new DocumentViewModel(doc));
                }
                var doc = findDocumentById(documents, data['additionalInfo2']);
                if (doc) {
                                self.data['additionalInfo2'](new DocumentViewModel(doc));
                }
                var doc = findDocumentById(documents, data['additionalInfo3']);
                if (doc) {
                                self.data['additionalInfo3'](new DocumentViewModel(doc));
                }


                    // if there is no data in tables then add an empty row for the user to add data
                    if (typeof self.addRow === 'function' && self.rowCount() === 0) {
                        self.addRow();
                    }
                    self.transients.dummy.notifySubscribers();
                };
            };


            var savedData = activity;
            if (!savedData.outputs) {
                savedData.outputs = [];
            }
            var savedOutput = {};
            if (savedData) {

                $.each(savedData.outputs, function(i, tmpOutput) {
                    if (tmpOutput.name === 'Attachments') {
                        savedOutput = tmpOutput;
                    }
                });
            }

            var config = JSON.parse('\u007b\u007d');
            window[viewModelInstance] = new this[viewModelName](savedOutput, config);
            var output = savedOutput.data ? savedOutput.data : {};

            window[viewModelInstance].loadData(output);
            window[viewModelInstance].dirtyFlag = ko.dirtyFlag(window[viewModelInstance], false);

            ko.applyBindings(window[viewModelInstance], document.getElementById("koAttachments"));

            // this resets the baseline for detecting changes to the model
            // - shouldn't be required if everything behaves itself but acts as a backup for
            //   any binding side-effects
            // - note that it is not foolproof as applying the bindings happens asynchronously and there
            //   is no easy way to detect its completion
            window[viewModelInstance].dirtyFlag.reset();

            // register with the master controller so this model can participate in the save cycle
            master.register(window[viewModelInstance], window[viewModelInstance].modelForSaving,
            window[viewModelInstance].dirtyFlag.isDirty, window[viewModelInstance].dirtyFlag.reset);
        });

        </script><script type="text/javascript">


    /* Master controller for page. This handles saving each model as required. */
    var Master = function () {
        var self = this;
        this.subscribers = [];
        // client models register their name and methods to participate in saving
        self.register = function (modelInstanceName, getMethod, isDirtyMethod, resetMethod) {
            this.subscribers.push({
                model: modelInstanceName,
                get: getMethod,
                isDirty: isDirtyMethod,
                reset: resetMethod
            });
        };
        // master isDirty flag for the whole page - can control button enabling
        this.isDirty  = function () {
            var dirty = false;
            $.each(this.subscribers, function(i, obj) {
                dirty = dirty || obj.isDirty();
            });
            return dirty;
        };

        this.validate = function() {
            var valid = $('#validation-container').validationEngine('validate');
            if (valid) {
                // Check that forms with multiple optional sections have at least one of those sections completed.
                var optionalCount = 0;
                var notCompletedCount = 0;
                $.each(self.subscribers, function(i, obj) {
                    if (obj.model !== 'activityModel' && obj.model !== 'photoPoints') {
                        if (obj.model.transients.optional) {
                            optionalCount++;
                            if (obj.model.outputNotCompleted()) {
                                notCompletedCount++;
                            }
                        }
                    }
                });
                if (optionalCount > 1 && notCompletedCount == optionalCount) {
                   valid = false;
                   bootbox.alert("<p>To 'Save changes', the mandatory fields of at least one section of this form must be completed.</p>"+
                        "<p>If all sections are 'Not applicable' please contact your grant manager to discuss alternate form options</p>");
                }
            }

            return valid;
        };
        /**
         * Makes an ajax call to save any sections that have been modified. This includes the activity
         * itself and each output.
         *
         * Modified outputs are injected as a list into the activity object. If there is nothing to save
         * in the activity itself, then the root is an object that is empty except for the outputs list.
         *
         * NOTE that the model for each section must register itself to be included in this save.
         *
         * Validates the entire page before saving.
         * @return -1 if the page was not modified, 0 if validation failed, 1 if validation succeeded (or was not requested).
         */
        this.save = function (validate) {
            // Ensure any active change is committed - the knockout binding typically fires on blur.
            $( document.activeElement ).blur();

            if (validate === undefined) {
                validate = true;
            }
            var activityData, outputs = [];

            var success = true;
            if (validate) {
                success = self.validate();
            }
            if (!self.isDirty()) {
                mobileBindings.onSaveActivity(-1, null);
                return -1;
            }
            if (success) {
                $.each(this.subscribers, function(i, obj) {
                    if (obj.model === 'activityModel') {
                        activityData = obj.get();
                    } else {
                        outputs.push(obj.get());
                    }
                });

                if (activityData === undefined) { activityData = {}}
                activityData.outputs = outputs;

                var toSave = JSON.stringify(activityData);
                mobileBindings.onSaveActivity(1, toSave);

            }
            else {
                mobileBindings.onSaveActivity(0, null);
            }
            return success?1:0;
        };

        this.reset = function () {
            $.each(this.subscribers, function(i, obj) {
                if (obj.isDirty()) {
                    obj.reset();
                }
            });
        };

        this.addSite = function(site) {
            var viewModel = ko.dataFor(document.getElementById('site'));
            viewModel.transients.sites.push(site);
            viewModel.siteId(site.siteId);
        }
    };

    if (mobileBindings == undefined) {
        var mobileBindings = {
        
            loadActivity:function(){return "{}"},
        
        
            loadSites:function(){return "[]"},
        
        
            loadThemes:function(){return "[]"},
        

        supportsNewSite:function() { return true; },
        onSaveActivity:function(){},
        createNewSite:function(){}
    };
}
var master = new Master();
var activity = JSON.parse(mobileBindings.loadActivity());
var sites = JSON.parse(mobileBindings.loadSites());
var themes = JSON.parse(mobileBindings.loadThemes());

$(function(){

var scroll = false;

$('#validation-container').validationEngine('attach', {scroll: scroll});

$('.helphover').popover({animation: true, trigger:'hover'});

$('#reset').click(function () {
master.reset();
});

function ViewModel (act, sites, themes) {
var self = this;
var today = new Date().toISOStringNoMillis();

self.activityId = act.activityId;
self.description = ko.observable(act.description);
self.notes = ko.observable(act.notes);
self.startDate = ko.observable(act.startDate || today).extend({simpleDate: false});
self.endDate = ko.observable(act.endDate).extend({simpleDate: false});
self.plannedStartDate = ko.observable(act.plannedStartDate).extend({simpleDate: false});
self.plannedEndDate = ko.observable(act.plannedEndDate).extend({simpleDate: false});
self.eventPurpose = ko.observable(act.eventPurpose);
self.fieldNotes = ko.observable(act.fieldNotes);
self.associatedProgram = ko.observable(act.associatedProgram);
self.associatedSubProgram = ko.observable(act.associatedSubProgram);
self.progress = ko.observable(act.progress);
self.mainTheme = ko.observable(act.mainTheme);
self.type = ko.observable(act.type);
self.siteId = ko.observable(act.siteId);
self.projectId = act.projectId;
self.transients = {};
self.transients.sites = ko.observableArray(sites);
self.transients.photoPoints = ko.computed(function() {
    var site = $.grep(self.transients.sites(), function(site, index) { return site.siteId == self.siteId(); })[0];
     if (site) {
         return site.photoPoints ? site.photoPoints : site.poi;
     }
     return [];
});
self.transients.activityProgressValues = ['planned','started','finished'];
self.transients.themes = themes?themes:[];
self.transients.markedAsFinished = ko.observable(act.progress === 'finished');
self.transients.markedAsFinished.subscribe(function (finished) {
    self.progress(finished ? 'finished' : 'started');
    if (finished || !self.endDate()) {
        self.endDate(today);
    }
});
self.transients.siteImgUrl = ko.computed(function() {
    if (self.siteId()) {
         var site = $.grep(self.transients.sites(), function(site, index) { return site.siteId == self.siteId(); })[0];
         if (site) {
            var lat,lon;
            if (site.centroidLat !== undefined && site.centroidLon !== undefined) {
                lat = site.centroidLat;
                lon = site.centroidLon;
            }
            else if (site.extent && site.extent.geometry && site.extent.geometry.centre) {
                lat = site.extent.geometry.centre[1];
                lon = site.extent.geometry.centre[0];
            }
            if (lat !== undefined && lon !== undefined) {
                $('#siteLocationImage').show();
                return fcConfig.googleStaticUrl+lat+","+lon;
            }
         }
    }
    return "";
});
self.siteLoadError = function(data, event) {
    $('#siteLocationImage').hide();
};

self.transients.newSiteSupported = ko.observable( mobileBindings.supportsNewSite());

self.modelForSaving = function () {
    // get model as a plain javascript object
    var jsData = ko.toJS(self);
    delete jsData.transients;
    return jsData;
};
self.modelAsJSON = function () {
    return JSON.stringify(self.modelForSaving());
};

self.save = function (callback, key) {
};

self.createNewSite = function() {
    mobileBindings.createNewSite();
}

self.notImplemented = function () {
    alert("Not implemented yet.")
};

self.attachPhotoPoint = function(e) {
    console.log(e);
};
self.dirtyFlag = ko.dirtyFlag(self, false);

// make sure progress moves to started if we save any data (unless already finished)
// (do this here so the model becomes dirty)
self.progress(self.transients.markedAsFinished() ? 'finished' : 'started');
}


var viewModel = new ViewModel(activity, sites, themes);

ko.applyBindings(viewModel);

master.register('activityModel', viewModel.modelForSaving, viewModel.dirtyFlag.isDirty, viewModel.dirtyFlag.reset);


});


</script>
</body>
</html>