

<!DOCTYPE html>
<head>
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    
    <script src="static/t5OGphSUjwdNOoxNKgdRTTh1RBtmzhMXxHDYYeR4lYj.js" type="text/javascript" ></script>
<link href="static/090onaZX1M508oSWqGmMeETZ9NkUA9p4CCTW3MUpRPc.css" type="text/css" rel="stylesheet" media="screen, projection" />

<link href="static/VySgOjkVOsD8Jt8ujXROVRjZeDLAAwVhMF5WqPZ8Ajf.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="http://www.ala.org.au/wp-content/themes/ala2011/images/favicon.ico" rel="shortcut icon" />
<!--[if lt IE 9]><script src="static/Yh1Txee3hFzExJ4P1str7tGV24zQMEYtxqtlYJ5ukR0.js" type="text/javascript" ></script><![endif]-->
<link href="static/Qwaw257M4sHcJuspEDRbeQoTceByqRmOCHNaZWpOxuc.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="static/AcXIjLTuc87n8sfxBjJRQSoBIUwP9RnCyK8Sv82i7eV.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="static/doSKUivnfI9gXmPKZ2XG4W5xIABYgKaf5Dwf3LtjNVr.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="static/fx5pGfEFSRJi6nyez3s8fUsjDL8WJ0IB04Njm7T2VAJ.css" type="text/css" rel="stylesheet" media="all" />
<link href="static/iHX8x0PqEmsjgyBEeq6NRvjAytsYzmt25tsjtHoHXDq.css" type="text/css" rel="stylesheet" media="screen,print" />




<link href="static/KYGDEVRRaKjNbTXJkHmicmzo9vFrnnzCnGLcxKjR04f.css" type="text/css" rel="stylesheet" media="screen,print" />

<link href="static/exPgH85S7hDuxmySlOZhM0sayvRJla83G3HHYJNzaUB.css" type="text/css" rel="stylesheet" media="screen,print" />
<link href="static/tNjfADEdRvZz6orXSyopLhQhlHwq7bH7hcAZQiGZMoc.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="/static/RrjzrZ0Ci0GPLETIr8x8KUMjfJtZKvifrUtMCedwKRB.png" rel="shortcut icon" />
<link href="static/4zsVqykqBON8U5Es5kfffXBSGJlbI8VrPDW4hSn1SWJ.css" type="text/css" rel="stylesheet" media="screen, projection" />


<link href="static/sCFm7bBsIMFGQHTSlBbhMHQCXWhOsbBr5z4bu1OueIE.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="static/tUELnv7Uvq6ppWNUWOlaow3JGSTTIf8hJ2VYvh7Oahj.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="/static/OKcRcjAeA1yuXD9r4fZA1Uw2HEwL7gYvjc6HdrZXIYP.png" rel="shortcut icon" />
<link href="/static/UxF0saaqmikaj74l2WFcCyPMm9hEEs8if7IBy0GNAnd.png" rel="shortcut icon" />
<link href="/static/zs4hrJqt7I802RlaZiXbmbDBarpNPZF8V8fCQJ2RVTM.png" rel="shortcut icon" />
<link href="/static/SvC1e8bSiCPFh8mObbEThgbJIaGZi72ATzqobK6QnnB.gif" rel="shortcut icon" />
<link href="/static/BA9MhIHZnH0zMcKJWIWsTurHhQTpDYE6akqM5excaZI.gif" rel="shortcut icon" />

<script type="text/javascript">
    var fcConfig = {
        bieUrl: "#",
        speciesProfileUrl: "https://fieldcapture-test.ala.org.au/proxy/speciesProfile",
        googleStaticUrl:"http://maps.googleapis.com/maps/api/staticmap?maptype=terrian&zoom=12&sensor=false&size=350x250&markers=color:red%7C"
        },
        here = document.location.href;
    </script>
    

    <meta name="layout" content="mobile"/>

    
    
    
</if>

    <style type="text/css">
        input[type=checkbox] {  -webkit-transform: scale(1.5); }
        .checkbox-list label { min-height: 40px; }
        .speciesAutocompleteRow {min-height:40px;}
        .datepicker td, .datepicker th {
            width:40px;
            height:40px;
            vertical-align: middle;
        }
    </style>
</head>

<body>

<div id="content" class="clearfix">
    
<div class="container-fluid validationEngineContainer" id="validation-container">
<div id="koActivityMainBlock">

    <div class="row-fluid">
        <div class="span12">
            <!-- Common activity fields -->

            <div class="row-fluid space-after">
                <div class="span4">

                    <label class="for-readonly">Type</label>
                    <span class="readonly-text" data-bind="text:type"></span>
                </div>
                <div class="span8">

                    <label class="for-readonly">Description</label>
                    <span class="readonly-text" data-bind="text:description"></span>
                </div>
            </div>


            <div class="row-fluid space-after">
                <div class="span4">
                    <label class="for-readonly inline">Planned start date</label>
                    <span class="readonly-text" data-bind="text:plannedStartDate.formattedDate"></span>
                </div>
                <div class="span8">
                    <label class="for-readonly inline">Planned end date</label>
                    <span class="readonly-text" data-bind="text:plannedEndDate.formattedDate"></span>
                </div>
            </div>

            <div class="well">
                <div class="row-fluid">

                    <span class="span8">
                    <div class="row-fluid space-after">

                        <div class="span6 required">
                            <label for="startDate"><b>Actual start date</b>
                                <a href='#' class='helphover' data-original-title='Start date' data-placement='top' data-content='Date the activity was started.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a>
                            </label>


                            <div class="input-append">
                                <input data-bind='datepicker:startDate.date' name='startDate' id='startDate' type='text' size='16' class='input-xlarge' readonly='readonly' targetField='startDate.date' data-validation-engine='validate[required]' />
<span class='add-on open-datepicker'>
  <i class='icon-th'>&nbsp;</i>
</span>
                            </div>

                        </div>
                        <div class="span6" data-bind="css:{required:transients.markedAsFinished}">
                            <label for="endDate"><b>Actual end date</b>
                                <a href='#' class='helphover' data-original-title='End date' data-placement='top' data-content='Date the activity finished.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a>
                            </label>

                            <div class="input-append">
                                <input data-bind='datepicker:endDate.date' name='endDate' id='endDate' type='text' size='16' class='input-xlarge' readonly='readonly' targetField='endDate.date' data-validation-engine='validate[future[startDate]]' />
<span class='add-on open-datepicker'>
  <i class='icon-th'>&nbsp;</i>
</span>
                            </div>

                        </div>
                    </div>
                    <div class="row-fluid space-after">
                        <div class="span6">
                            <label for="theme"><b>Major theme</b></label>
                            <select id="theme" data-bind="value:mainTheme, options:transients.themes, optionsCaption:'Choose..'" class="input-xlarge" style="width:90%">
                            </select>
                        </div>

                        <div class="span6">
                            <label><b>Progress</b></label>
                            <label for="activityComplete"><input type="checkbox" id="activityComplete" data-bind="checked:transients.markedAsFinished" style="margin-right:1em;"><span>This activity is complete</span></label>

                        </div>

                    </div>
                    <div class="row-fluid">
                        <div class="span6">
                            <label for="site"><b>Site</b></label>
                            <select id='site' style='width:90%' data-bind='options:transients.sites,optionsText:"name",optionsValue:"siteId",value:siteId,optionsCaption:"Choose a site..."'>&nbsp;</select>

                        </div>

                        <div class="span3">

                            <button class="btn btn-info" style="margin-top:25px;" data-bind="visible:transients.newSiteSupported,click:createNewSite">Create new Site</button>
                        </div>
                    </div>

                    
                        
                            
                                
                            
                            
                                
                                    
                                    
                                    
                                    

                                
                            
                        

                    
                    </span>
                    <span class="span4">

                        <img id="siteLocationImage" width="100%" data-bind="event:{error:siteLoadError}, attr:{src:transients.siteImgUrl}, visible:transients.siteImgUrl()"/>


                    </span>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- ko stopBinding: true -->

    
    
    
    <style type="text/css">
        table.treeSpeciesRichness th {white-space:normal;}
        table.treeSpeciesRichness td:last-child {width:4%;text-align:center;}
        table.treeSpeciesRichness textarea {width:100%; box-sizing:border-box; }
        table.treeSpeciesRichness select {width:100%; box-sizing:border-box; }
    </style><style type="text/css">
        table.shrubSpeciesRichness th {white-space:normal;}
        table.shrubSpeciesRichness td:last-child {width:4%;text-align:center;}
        table.shrubSpeciesRichness textarea {width:100%; box-sizing:border-box; }
        table.shrubSpeciesRichness select {width:100%; box-sizing:border-box; }
    </style><style type="text/css">
        table.grassSpeciesRichness th {white-space:normal;}
        table.grassSpeciesRichness td:last-child {width:4%;text-align:center;}
        table.grassSpeciesRichness textarea {width:100%; box-sizing:border-box; }
        table.grassSpeciesRichness select {width:100%; box-sizing:border-box; }
    </style><style type="text/css">
        table.forbsAndOtherNonGrassGroundSpeciesRichness th {white-space:normal;}
        table.forbsAndOtherNonGrassGroundSpeciesRichness td:last-child {width:4%;text-align:center;}
        table.forbsAndOtherNonGrassGroundSpeciesRichness textarea {width:100%; box-sizing:border-box; }
        table.forbsAndOtherNonGrassGroundSpeciesRichness select {width:100%; box-sizing:border-box; }
    </style><style type="text/css">
        table.nonNativeSpeciesRichness th {white-space:normal;}
        table.nonNativeSpeciesRichness td:last-child {width:4%;text-align:center;}
        table.nonNativeSpeciesRichness textarea {width:100%; box-sizing:border-box; }
        table.nonNativeSpeciesRichness select {width:100%; box-sizing:border-box; }
    </style><style type="text/css">
        table.cwdLengths th {white-space:normal;}
        table.cwdLengths tbody td:nth-child(1) {text-align:center;}
        table.cwdLengths td:last-child {width:4%;text-align:center;}
        table.cwdLengths textarea {width:100%; box-sizing:border-box; }
        table.cwdLengths select {width:100%; box-sizing:border-box; }
    </style><style type="text/css">
        table.groundCover th {white-space:normal;}
        table.groundCover tbody td:nth-child(2) {text-align:center;}
        table.groundCover tbody td:nth-child(3) {text-align:center;}
        table.groundCover tbody td:nth-child(4) {text-align:center;}
        table.groundCover tbody td:nth-child(5) {text-align:center;}
        table.groundCover tbody td:nth-child(6) {text-align:center;}
        table.groundCover tbody td:nth-child(7) {text-align:center;}
        table.groundCover tbody td:nth-child(8) {text-align:center;}
        table.groundCover td:last-child {width:4%;text-align:center;}
        table.groundCover textarea {width:100%; box-sizing:border-box; }
        table.groundCover select {width:100%; box-sizing:border-box; }
    </style><style type="text/css">
        table.treeCanopyRecords th {white-space:normal;}
        table.treeCanopyRecords tbody td:nth-child(1) {width:20%;}
        table.treeCanopyRecords tbody td:nth-child(1)
        table.treeCanopyRecords tbody td:nth-child(2) {width:30%;}
        table.treeCanopyRecords tbody td:nth-child(2)
        table.treeCanopyRecords tbody td:nth-child(3) {width:20%;text-align:center;}
        table.treeCanopyRecords tbody td:nth-child(3)
        table.treeCanopyRecords tbody td:nth-child(4) {width:15%;text-align:center;}
        table.treeCanopyRecords tbody td:nth-child(4)
        table.treeCanopyRecords td:last-child {width:4%;text-align:center;}
        table.treeCanopyRecords textarea {width:100%; box-sizing:border-box; }
        table.treeCanopyRecords select {width:100%; box-sizing:border-box; }
    </style><style type="text/css">
        table.shrubCanopyRecords th {white-space:normal;}
        table.shrubCanopyRecords tbody td:nth-child(1) {width:45%;}
        table.shrubCanopyRecords tbody td:nth-child(1)
        table.shrubCanopyRecords tbody td:nth-child(2) {width:30%;text-align:center;}
        table.shrubCanopyRecords tbody td:nth-child(2)
        table.shrubCanopyRecords tbody td:nth-child(3) {width:20%;text-align:center;}
        table.shrubCanopyRecords tbody td:nth-child(3)
        table.shrubCanopyRecords td:last-child {width:4%;text-align:center;}
        table.shrubCanopyRecords textarea {width:100%; box-sizing:border-box; }
        table.shrubCanopyRecords select {width:100%; box-sizing:border-box; }
    </style>
    <div class="output-block" id="koBioCondition_Method">
            <h3 data-bind="css:{modified:dirtyFlag.isDirty},attr:{title:'Has been modified'}">BioCondition Method</h3>
        <div data-bind="if:transients.optional">
            <label class="checkbox" ><input type="checkbox" data-bind="checked:outputNotCompleted"> <span data-bind="text:transients.questionText"></span> </label>
        </div>
        <div id="BioCondition_Method-content" data-bind="visible:!outputNotCompleted()">
        <!-- add the dynamic components -->
            <div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h2>Assessment Area Information</h2></span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Bioregion:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='The bioregion in which the assessment unit is located.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><select class="span8" data-bind='value:data.bioregion,options:transients.bioregionConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Regional ecosystem / Landtype:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='The code for the regional ecosystem (RE) in which the assessment unit is located.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><select class="span8" data-bind='value:data.regionalEcosystem,options:transients.regionalEcosystemConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div></div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Property name:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='The name of the property in which the assessment unit is situated.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input  class="span8 input-small" data-bind='value:data.property'  type='text' class='input-small'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Transect bearing (degrees):<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='The compass bearing of the 100m transect and long axis of the 100x50m assessment plot.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.transectBearing' data-validation-engine='validate[required,min[1],max[360],custom[number]]' type='number' class='input-mini'/></span></div></div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Area of patch (Ha):<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='The area in hectares of the the patch of vegetation in which this assessment unit occurs.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.patchArea' data-validation-engine='validate[required,min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>General description:</label></span><textarea  class="span8" data-bind='value:data.assessmentAreaDescription'></textarea></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>Regional ecosystem benchmark values</h4>Please enter the published benchmark values which are applicable to the selected regional ecosystem. These values are required for the calculation of scores.<br>If a particular value is not applicable for the selected RE, leave the value as '0'.</span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>No. of eucalypt large trees:</label></span><input class="input-small" style="text-align:center" data-bind='value:data.benchmarkEucalyptLargeTreeNo' data-validation-engine='validate[required,min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Eucalypt large tree DBH (cm):</label></span><input class="input-small" style="text-align:center" data-bind='value:data.benchmarkEucalyptLargeTreeDBH' data-validation-engine='validate[required,min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>No. of non-eucalypt large trees:</label></span><input class="input-small" style="text-align:center" data-bind='value:data.benchmarkNonEucalyptLargeTreeNo' data-validation-engine='validate[required,min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Non-Eucalypt large tree DBH (cm):</label></span><input class="input-small" style="text-align:center" data-bind='value:data.benchmarkNonEucalyptLargeTreeDBH' data-validation-engine='validate[required,min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Length of coarse woody debris (m):</label></span><input class="input-small" style="text-align:center" data-bind='value:data.benchmarkCWD' data-validation-engine='validate[required,min[0],custom[number]]' type='number' class='input-mini'/></span></div></div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Tree canopy EDL average height (m):</label></span><input class="input-small" style="text-align:center" data-bind='value:data.benchmarkTreeEDLHeight' data-validation-engine='validate[required,min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Tree subcanopy average height (m):</label></span><input class="input-small" style="text-align:center" data-bind='value:data.benchmarkSubCanopyHeight' data-validation-engine='validate[required,min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>% of dominant canopy EDL species with evidence of recruitment:</label></span><input class="input-small" style="text-align:center" data-bind='value:data.benchmarkEdlSpeciesRecruitment' data-validation-engine='validate[required,min[0],max[100],custom[number]]' type='number' class='input-mini'/></span></div></div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Total No. of tree species:</label></span><input class="input-small" style="text-align:center" data-bind='value:data.benchmarkNumTreeSpeciesTotal' data-validation-engine='validate[required,min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Total No. of shrub species:</label></span><input class="input-small" style="text-align:center" data-bind='value:data.benchmarkNumShrubSpeciesTotal' data-validation-engine='validate[required,min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Total No. of grass species:</label></span><input class="input-small" style="text-align:center" data-bind='value:data.benchmarkNumGrassSpeciesTotal' data-validation-engine='validate[required,min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Total No. of forb & other species:</label></span><input class="input-small" style="text-align:center" data-bind='value:data.benchmarkNumForbSpeciesTotal' data-validation-engine='validate[required,min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Non-native species cover (%):</label></span><input class="input-small" style="text-align:center" data-bind='value:data.benchmarkSpeciesCoverExotic' data-validation-engine='validate[required,min[0],max[100],custom[number]]' type='number' class='input-mini'/></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h2>Assessment - Site Attributes</h2></span></span></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>100 x 50m Area - Ecologically Dominant Layer</h4>Record details for the ecologically dominant stratum over the 100 x 50m survey area.</span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>No. of large eucalypt trees (> benchmark DBH):<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Count the number of living large eucalypt trees within the 100x50m area. Large trees are defined as having a DBH greater than the DBH threshold provided in the benchmark document.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.numLargeEucalypt' data-validation-engine='validate[required,min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>No. of large non-eucalypt trees (> benchmark DBH):<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Count the number of living large non-eucalypt trees within the 100x50m area.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.numLargeNonEucalypt' data-validation-engine='validate[required,min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Total No. of large trees counted:</label></span><span  data-bind='text:data.totalLargeTrees'></span></span></div></div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>No. of large eucalypt trees / Ha:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='The number of eucalypt large trees multiplied by 2 to give a per hectare figure.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><span  data-bind='text:data.numLargeEucalyptPerHa'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>No. of large non-eucalypt trees / Ha:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='The number of non-eucalypt large trees multiplied by 2 to give a per hectare figure.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><span  data-bind='text:data.numLargeNonEucalyptPerHa'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Total No. of large trees / Ha.:</label></span><span  data-bind='text:data.totalLargeTreesPerHa'></span></span></div></div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Large trees score:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Calculated score for large trees.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><span  data-bind='text:data.largeTreesScore'></span></span></div></div></div>
<div class="row-fluid space-after output-section" >
<div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Emergent height (m):<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.emergentHeight' data-validation-engine='validate[min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Tree Canopy (EDL) Height (m):<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.treeCanopyHeight' data-validation-engine='validate[required,min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Tree subcanopy height (m):<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.subcanopyHeight' data-validation-engine='validate[min[0],custom[number]]' type='number' class='input-mini'/></span></div></div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Emergent canopy height score:</label></span><span  data-bind='text:data.emergentHeightScore'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>EDL tree canopy height score:</label></span><span  data-bind='text:data.edlCanopyHeightScore'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Tree subcanopy height score:</label></span><span  data-bind='text:data.subcanopyHeightScore'></span></span></div></div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Averaged canopy height score:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Calculated canopy height score as an average of individual layer scores &gt;0.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><span  data-bind='text:data.aveCanopyHeightScore'></span></span></div></div></div>
<div class="row-fluid space-after output-section" >
<div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Proportion of canopy EDL species with evidence of recruitment (%):<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='The proportion of dominant species present at a site that are regenerating, i.e. having individuals with a DBH &lt;5 cm.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.proportionDominantCanopySpeciesWithEvidenceOfRecruitment' data-validation-engine='validate[required,min[0],max[100],custom[number]]' type='number' class='input-mini'/></span></div></div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label> </label></span><span  data-bind='text:data.emptyColumn'></span></span></div></div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>EDL species recruitment score:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Calculated recruitment score for all species in the EDL with evidence of recruitment.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><span  data-bind='text:data.edlRecruitmentScore'></span></span></div></div></div>
<div class="row-fluid space-after output-section" >
<div class="span4">
<div class="row-fluid ">
            <table class="table table-bordered treeSpeciesRichness " >
                <thead><tr><th>Native tree species names<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='List the names of all native tree species which can be identified in the 100x50m area.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th></th>
                </tr></thead>
                <tbody data-bind="template:{name:'treeSpeciesRichnessviewTmpl', foreach: data.treeSpeciesRichness}"></tbody>
                <script id="treeSpeciesRichnessviewTmpl" type="text/html"><tr>
                    <td>
<span class="input-prepend input-append" data-bind="with:speciesNameTree">
    <span class="add-on" data-bind="visible:!transients.editing(), css:{'btn-success':name()}"><i class="icon-white" data-bind="css:{'icon-ok':listId()!='unmatched' && name(), 'icon-question-sign':listId()=='unmatched' || listId() == 'error-unmatched'}"></i></span><span class="add-on" data-bind="visible:transients.editing()"><img src="static/Xo2jbaJ5EFqa59u9g4c4ybpCpw3wFWKhQdzZwNmmktO.gif" alt="saving icon" /></span><input type="text" data-bind="value:transients.textFieldValue,event:{focusout:focusLost},autocomplete:{url:'https://fieldcapture-test.ala.org.au/search/species', render: renderItem, listId: list, result:speciesSelected, valueChangeCallback:textFieldChanged}" />
    <span class="add-on" data-bind="visible: !transients.editing() && name()">
        <a href="#" data-bind="popover: {title: name, content: transients.speciesInformation}"><i class="icon-info-sign"></i></a>
    </span>
</span>
</td>
                    <td><i data-bind='click:$root.removetreeSpeciesRichnessRow' class='icon-remove'></i></td>
                </tr></script>
                <tfoot>
                <tr>
                    <td><span >No. of listed tree species:</span></td>
                    <td><span  class="value" data-bind='text:data.numTreeSpecies'></span></td>
                    <td></td>
                </tr>
                <tr><td colspan="2" style="text-align:left;">
                        <button type="button" class="btn btn-small" data-bind="click:addtreeSpeciesRichnessRow">
                        <i class="icon-plus"></i> Add a row</button></td></tr> <script id="treeSpeciesRichnesstemplate-upload" type="text/x-tmpl">{% %}</script>
                       <script id="treeSpeciesRichnesstemplate-download" type="text/x-tmpl">{% %}</script>                </tfoot>
            </table>
        </div>
</div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>No. of unknown native tree species:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Enter the number of native tree species in the 100x50m area which cannot be identified.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.numUnknownTreeSpecies' data-validation-engine='validate[required,min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Total native tree species richness:</label></span><span  data-bind='text:data.numTreeSpeciesTotal'></span></span></div></div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span8">The number of native tree species is combined with the total number of other native plant life forms present to calculate a total native plant species richness score.</span></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>50 x 10m Area - Understorey & Sub-dominant Layer</h4>Record all understorey species within the 50 x 10m area boundary.</span></span></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h5>Native shrub species richness</h5> (List all species for plants which are: single-stemmed below 2m height, multi-stemmed from base, or below 20cm above ground level):</span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span4">
<div class="row-fluid ">
            <table class="table table-bordered shrubSpeciesRichness " >
                <thead><tr><th>Native shrub species names<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='List the names of all native shrub species which can be identified in the 50x10m area.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th></th>
                </tr></thead>
                <tbody data-bind="template:{name:'shrubSpeciesRichnessviewTmpl', foreach: data.shrubSpeciesRichness}"></tbody>
                <script id="shrubSpeciesRichnessviewTmpl" type="text/html"><tr>
                    <td>
<span class="input-prepend input-append" data-bind="with:speciesNameShrub">
    <span class="add-on" data-bind="visible:!transients.editing(), css:{'btn-success':name()}"><i class="icon-white" data-bind="css:{'icon-ok':listId()!='unmatched' && name(), 'icon-question-sign':listId()=='unmatched' || listId() == 'error-unmatched'}"></i></span><span class="add-on" data-bind="visible:transients.editing()"><img src="static/Xo2jbaJ5EFqa59u9g4c4ybpCpw3wFWKhQdzZwNmmktO.gif" alt="saving icon" /></span><input type="text" data-bind="value:transients.textFieldValue,event:{focusout:focusLost},autocomplete:{url:'https://fieldcapture-test.ala.org.au/search/species', render: renderItem, listId: list, result:speciesSelected, valueChangeCallback:textFieldChanged}" />
    <span class="add-on" data-bind="visible: !transients.editing() && name()">
        <a href="#" data-bind="popover: {title: name, content: transients.speciesInformation}"><i class="icon-info-sign"></i></a>
    </span>
</span>
</td>
                    <td><i data-bind='click:$root.removeshrubSpeciesRichnessRow' class='icon-remove'></i></td>
                </tr></script>
                <tfoot>
                <tr>
                    <td><span >No. of listed native shrub species:</span></td>
                    <td><span  class="value" data-bind='text:data.numShrubSpecies'></span></td>
                    <td></td>
                </tr>
                <tr><td colspan="2" style="text-align:left;">
                        <button type="button" class="btn btn-small" data-bind="click:addshrubSpeciesRichnessRow">
                        <i class="icon-plus"></i> Add a row</button></td></tr> <script id="shrubSpeciesRichnesstemplate-upload" type="text/x-tmpl">{% %}</script>
                       <script id="shrubSpeciesRichnesstemplate-download" type="text/x-tmpl">{% %}</script>                </tfoot>
            </table>
        </div>
</div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>No. of unknown native shrub species:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Enter the number of native shrub species in the 50x10m area which cannot be identified.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.numUnknownShrubSpecies' data-validation-engine='validate[required,min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Total native shrub species richness:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Count of the total number of different species of native shrubs within the 50x10m plot area.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><span  data-bind='text:data.numShrubSpeciesTotal'></span></span></div></div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span8">The number of native shrub species is combined with the total number of other native plant life forms present to calculate a total native plant species richness score.</span></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h5>Native grass species richness</h5></span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span4">
<div class="row-fluid ">
            <table class="table table-bordered grassSpeciesRichness " >
                <thead><tr><th>Native grass species names<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='List the names of all native grass species which can be identified in the 50x10m area.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th></th>
                </tr></thead>
                <tbody data-bind="template:{name:'grassSpeciesRichnessviewTmpl', foreach: data.grassSpeciesRichness}"></tbody>
                <script id="grassSpeciesRichnessviewTmpl" type="text/html"><tr>
                    <td>
<span class="input-prepend input-append" data-bind="with:speciesNameGrass">
    <span class="add-on" data-bind="visible:!transients.editing(), css:{'btn-success':name()}"><i class="icon-white" data-bind="css:{'icon-ok':listId()!='unmatched' && name(), 'icon-question-sign':listId()=='unmatched' || listId() == 'error-unmatched'}"></i></span><span class="add-on" data-bind="visible:transients.editing()"><img src="static/Xo2jbaJ5EFqa59u9g4c4ybpCpw3wFWKhQdzZwNmmktO.gif" alt="saving icon" /></span><input type="text" data-bind="value:transients.textFieldValue,event:{focusout:focusLost},autocomplete:{url:'https://fieldcapture-test.ala.org.au/search/species', render: renderItem, listId: list, result:speciesSelected, valueChangeCallback:textFieldChanged}" />
    <span class="add-on" data-bind="visible: !transients.editing() && name()">
        <a href="#" data-bind="popover: {title: name, content: transients.speciesInformation}"><i class="icon-info-sign"></i></a>
    </span>
</span>
</td>
                    <td><i data-bind='click:$root.removegrassSpeciesRichnessRow' class='icon-remove'></i></td>
                </tr></script>
                <tfoot>
                <tr>
                    <td><span >No. of listed native grass species:</span></td>
                    <td><span  class="value" data-bind='text:data.numGrassSpecies'></span></td>
                    <td></td>
                </tr>
                <tr><td colspan="2" style="text-align:left;">
                        <button type="button" class="btn btn-small" data-bind="click:addgrassSpeciesRichnessRow">
                        <i class="icon-plus"></i> Add a row</button></td></tr> <script id="grassSpeciesRichnesstemplate-upload" type="text/x-tmpl">{% %}</script>
                       <script id="grassSpeciesRichnesstemplate-download" type="text/x-tmpl">{% %}</script>                </tfoot>
            </table>
        </div>
</div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>No. of unknown grass species:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.numUnknownGrassSpecies' data-validation-engine='validate[required,min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Total grass species richness:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><span  data-bind='text:data.numGrassSpeciesTotal'></span></span></div></div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span8">The number of native grass species is combined with the total number of other native plant life forms present to calculate a total native plant species richness score.</span></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h5>Native forbs and other (non-grass groundcover) species richness:</h5></span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span4">
<div class="row-fluid ">
            <table class="table table-bordered forbsAndOtherNonGrassGroundSpeciesRichness " >
                <thead><tr><th>Native forb species and other life form names<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='List the names of all native species of forbs and other life forms which can be identified in the 50x10m area.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th></th>
                </tr></thead>
                <tbody data-bind="template:{name:'forbsAndOtherNonGrassGroundSpeciesRichnessviewTmpl', foreach: data.forbsAndOtherNonGrassGroundSpeciesRichness}"></tbody>
                <script id="forbsAndOtherNonGrassGroundSpeciesRichnessviewTmpl" type="text/html"><tr>
                    <td>
<span class="input-prepend input-append" data-bind="with:speciesNameForb">
    <span class="add-on" data-bind="visible:!transients.editing(), css:{'btn-success':name()}"><i class="icon-white" data-bind="css:{'icon-ok':listId()!='unmatched' && name(), 'icon-question-sign':listId()=='unmatched' || listId() == 'error-unmatched'}"></i></span><span class="add-on" data-bind="visible:transients.editing()"><img src="static/Xo2jbaJ5EFqa59u9g4c4ybpCpw3wFWKhQdzZwNmmktO.gif" alt="saving icon" /></span><input type="text" data-bind="value:transients.textFieldValue,event:{focusout:focusLost},autocomplete:{url:'https://fieldcapture-test.ala.org.au/search/species', render: renderItem, listId: list, result:speciesSelected, valueChangeCallback:textFieldChanged}" />
    <span class="add-on" data-bind="visible: !transients.editing() && name()">
        <a href="#" data-bind="popover: {title: name, content: transients.speciesInformation}"><i class="icon-info-sign"></i></a>
    </span>
</span>
</td>
                    <td><i data-bind='click:$root.removeforbsAndOtherNonGrassGroundSpeciesRichnessRow' class='icon-remove'></i></td>
                </tr></script>
                <tfoot>
                <tr>
                    <td><span >No. of listed native forbs and other species:</span></td>
                    <td><span  class="value" data-bind='text:data.numForbSpecies'></span></td>
                    <td></td>
                </tr>
                <tr><td colspan="2" style="text-align:left;">
                        <button type="button" class="btn btn-small" data-bind="click:addforbsAndOtherNonGrassGroundSpeciesRichnessRow">
                        <i class="icon-plus"></i> Add a row</button></td></tr> <script id="forbsAndOtherNonGrassGroundSpeciesRichnesstemplate-upload" type="text/x-tmpl">{% %}</script>
                       <script id="forbsAndOtherNonGrassGroundSpeciesRichnesstemplate-download" type="text/x-tmpl">{% %}</script>                </tfoot>
            </table>
        </div>
</div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Number of unknown native forbs & other species:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.numUnknownForbSpecies' data-validation-engine='validate[required,min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Total richness of native forbs & other species:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><span  data-bind='text:data.numForbSpeciesTotal'></span></span></div></div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span8">The number of native forbs and other species is combined with the total number of other native plant life forms present to calculate a total native plant species richness score.</span></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h5>Non-native species richness:</h5></span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span4">
<div class="row-fluid ">
            <table class="table table-bordered nonNativeSpeciesRichness " >
                <thead><tr><th>Non-native species names<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='List the names of all non-native species which can be identified in the 50x10m area.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th></th>
                </tr></thead>
                <tbody data-bind="template:{name:'nonNativeSpeciesRichnessviewTmpl', foreach: data.nonNativeSpeciesRichness}"></tbody>
                <script id="nonNativeSpeciesRichnessviewTmpl" type="text/html"><tr>
                    <td>
<span class="input-prepend input-append" data-bind="with:speciesNameNonNative">
    <span class="add-on" data-bind="visible:!transients.editing(), css:{'btn-success':name()}"><i class="icon-white" data-bind="css:{'icon-ok':listId()!='unmatched' && name(), 'icon-question-sign':listId()=='unmatched' || listId() == 'error-unmatched'}"></i></span><span class="add-on" data-bind="visible:transients.editing()"><img src="static/Xo2jbaJ5EFqa59u9g4c4ybpCpw3wFWKhQdzZwNmmktO.gif" alt="saving icon" /></span><input type="text" data-bind="value:transients.textFieldValue,event:{focusout:focusLost},autocomplete:{url:'https://fieldcapture-test.ala.org.au/search/species', render: renderItem, listId: list, result:speciesSelected, valueChangeCallback:textFieldChanged}" />
    <span class="add-on" data-bind="visible: !transients.editing() && name()">
        <a href="#" data-bind="popover: {title: name, content: transients.speciesInformation}"><i class="icon-info-sign"></i></a>
    </span>
</span>
</td>
                    <td><i data-bind='click:$root.removenonNativeSpeciesRichnessRow' class='icon-remove'></i></td>
                </tr></script>
                <tfoot>
                <tr>
                    <td><span >No. of listed non-native species:</span></td>
                    <td><span  class="value" data-bind='text:data.numNonNativeSpecies'></span></td>
                    <td></td>
                </tr>
                <tr><td colspan="2" style="text-align:left;">
                        <button type="button" class="btn btn-small" data-bind="click:addnonNativeSpeciesRichnessRow">
                        <i class="icon-plus"></i> Add a row</button></td></tr> <script id="nonNativeSpeciesRichnesstemplate-upload" type="text/x-tmpl">{% %}</script>
                       <script id="nonNativeSpeciesRichnesstemplate-download" type="text/x-tmpl">{% %}</script>                </tfoot>
            </table>
        </div>
</div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Number of unknown non-native species:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.numUnknownNonNativeSpecies' data-validation-engine='validate[required,min[0],custom[number]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Total richness of non-native species:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><span  data-bind='text:data.numNonNativeSpeciesTotal'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Total cover of non-native species (%):<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Estimated percentage cover of the total vegetation cover that is comprised of exotic and non-indigenous species, assessed within the 50 x 10 m sub-plot.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><input class="input-small" style="text-align:center" data-bind='value:data.nonNativePlantCoverPercent' data-validation-engine='validate[min[0],custom[number]]' type='number' class='input-mini'/></span></div></div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span8">Non-native plant species richness is recorded, but is not included in condition score calculations.</span></span></div><div class="row-fluid"><span class="span12">    <span  class="span8"> </span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Non-native plant cover score:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Calculated score for vegetation cover that is comprised of exotic and non-indigenous species.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><span  data-bind='text:data.nonNativePlantCoverScore'></span></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>50 x 20m area - Coarse Woody Debris</h4> Includes all logs > 10cm diameter and > 0.5m length (and >80% contact with the ground), within the boundary of the 50 x 20m plot area.</span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span4">
<div class="row-fluid ">
            <table class="table table-bordered cwdLengths " >
                <thead><tr><th>CWD Length (m):</th><th></th>
                </tr></thead>
                <tbody data-bind="template:{name:'cwdLengthsviewTmpl', foreach: data.cwdLengths}"></tbody>
                <script id="cwdLengthsviewTmpl" type="text/html"><tr>
                    <td><input class="input-small" style="text-align:center" data-bind='value:cwdLength' data-validation-engine='validate[min[0],custom[number]]' type='number' class='input-mini'/></td>
                    <td><i data-bind='click:$root.removecwdLengthsRow' class='icon-remove'></i></td>
                </tr></script>
                <tfoot>
                <tr>
                    <td colspan='1'><span > </span></td>
                    <td></td>
                </tr>
                <tr><td colspan="2" style="text-align:left;">
                        <button type="button" class="btn btn-small" data-bind="click:addcwdLengthsRow">
                        <i class="icon-plus"></i> Add a row</button></td></tr> <script id="cwdLengthstemplate-upload" type="text/x-tmpl">{% %}</script>
                       <script id="cwdLengthstemplate-download" type="text/x-tmpl">{% %}</script>                </tfoot>
            </table>
        </div>
</div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Total length of coarse woody debris (m):</label></span><span  data-bind='text:data.totalCwdLength'></span></span></div></div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Coarse woody debris score:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Calculated score for coarse woody debris.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><span  data-bind='text:data.cwdScore'></span></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>Five 1x1m plots - Ground Cover</h4>* attributes are essential to assess as used in scoring, however assessment of all attributes improves your ability to more accurately visualise proportions on each of the attributes)</span></span></div>
<div class="row-fluid output-section">
            <table class="table table-bordered groundCover " >
                <thead><tr><th>Ground cover</th><th>Plot 1</th><th>Plot 2</th><th>Plot 3</th><th>Plot 4</th><th>Plot 5</th><th>Mean</th><th>Score</th><th></th>
                </tr></thead>
                <tbody data-bind="template:{name:'groundCoverviewTmpl', foreach: data.groundCover}"></tbody>
                <script id="groundCoverviewTmpl" type="text/html"><tr>
                    <td><span  data-bind='text:groundCoverType'></span></td>
                    <td><input class="input-small" style="text-align:center" data-bind='value:plot1' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-small" style="text-align:center" data-bind='value:plot2' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-small" style="text-align:center" data-bind='value:plot3' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-small" style="text-align:center" data-bind='value:plot4' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-small" style="text-align:center" data-bind='value:plot5' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><span  data-bind='text:plotsMean'></span></td>
                    <td><span  data-bind='text:groundCoverScore'></span></td>
                    <td><i data-bind='click:$root.removegroundCoverRow' class='icon-remove'></i></td>
                </tr></script>
                <tfoot>
                <tr>
                    <td><span >Total (%) - each column must be <= 100%</span></td>
                    <td><span  class="value" data-bind='text:data.totalPlot1'></span></td>
                    <td><span  class="value" data-bind='text:data.totalPlot2'></span></td>
                    <td><span  class="value" data-bind='text:data.totalPlot3'></span></td>
                    <td><span  class="value" data-bind='text:data.totalPlot4'></span></td>
                    <td><span  class="value" data-bind='text:data.totalPlot5'></span></td>
                    <td></td>
                </tr>
                </tfoot>
            </table>
        </div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>100m Transect</h4></span></span></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h5>Tree canopy cover</h5> Estimate of the length of vertically projected foliage cover (over the 100 m transect) of the species making up the EDL or tree canopy cover, if applicable for the RE. Canopy cover equates to crown cover as defined by Walker and Hopkins (1990).<br>(Only assess Emergent (E) or Subcanopy (S) layers if the RE benchmark document stipulates that layers are present.) *If trees are in the same layer and continuous along the transect you can group them</span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span4">
<div class="row-fluid ">
            <table class="table table-bordered treeCanopyRecords " >
                <thead><tr><th>Tree or tree group</th><th>Type of tree</th><th>Distance along transect (m)</th><th>Length (m)</th><th></th>
                </tr></thead>
                <tbody data-bind="template:{name:'treeCanopyRecordsviewTmpl', foreach: data.treeCanopyRecords}"></tbody>
                <script id="treeCanopyRecordsviewTmpl" type="text/html"><tr>
                    <td><select data-bind='value:treeOrTreeGroup,options:transients.treeOrTreeGroupConstraints,optionsCaption:"Please select"'></select></td>
                    <td><select data-bind='value:treeType,options:transients.treeTypeConstraints,optionsCaption:"Please select"'></select></td>
                    <td><input class="input-small" style="text-align:center" data-bind='value:distance' data-validation-engine='validate[min[0],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-small" style="text-align:center" data-bind='value:totalTCCover' data-validation-engine='validate[min[0],custom[number]]' type='number' class='input-mini'/></td>
                    <td><i data-bind='click:$root.removetreeCanopyRecordsRow' class='icon-remove'></i></td>
                </tr></script>
                <tfoot>
                <tr>
                    <td colspan='4'><span > </span></td>
                    <td></td>
                </tr>
                <tr><td colspan="5" style="text-align:left;">
                        <button type="button" class="btn btn-small" data-bind="click:addtreeCanopyRecordsRow">
                        <i class="icon-plus"></i> Add a row</button></td></tr> <script id="treeCanopyRecordstemplate-upload" type="text/x-tmpl">{% %}</script>
                       <script id="treeCanopyRecordstemplate-download" type="text/x-tmpl">{% %}</script>                </tfoot>
            </table>
        </div>
</div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>% cover of C:</label></span><span  data-bind='text:data.percentCoverC'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>% cover of S:</label></span><span  data-bind='text:data.percentCoverS'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>% cover of E:</label></span><span  data-bind='text:data.percentCoverE'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span8">Note: Only the projected foliage cover for native species is included in the calculated score.</span></span></div></div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Canopy cover score:</label></span><span  data-bind='text:data.coverScoreC'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Sub-canopy cover score:</label></span><span  data-bind='text:data.coverScoreS'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Emergent cover score:</label></span><span  data-bind='text:data.coverScoreE'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Average tree canopy cover score:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Calculated score for native tree canopy cover.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><span  data-bind='text:data.treeCanopyCoverScoreAve'></span></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h5>Shrub canopy cover</h5></span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span4">
<div class="row-fluid ">
            <table class="table table-bordered shrubCanopyRecords " >
                <thead><tr><th>Shrub type*</th><th>Distance along transect (m)</th><th>Length (m)</th><th></th>
                </tr></thead>
                <tbody data-bind="template:{name:'shrubCanopyRecordsviewTmpl', foreach: data.shrubCanopyRecords}"></tbody>
                <script id="shrubCanopyRecordsviewTmpl" type="text/html"><tr>
                    <td><select data-bind='value:shrubType,options:transients.shrubTypeConstraints,optionsCaption:"Please select"'></select></td>
                    <td><input class="input-medium" style="text-align:center" data-bind='value:distance' data-validation-engine='validate[min[0],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-small" style="text-align:center" data-bind='value:totalSCCover' data-validation-engine='validate[min[0],custom[number]]' type='number' class='input-mini'/></td>
                    <td><i data-bind='click:$root.removeshrubCanopyRecordsRow' class='icon-remove'></i></td>
                </tr></script>
                <tfoot>
                <tr>
                    <td colspan='3'><span > </span></td>
                    <td></td>
                </tr>
                <tr><td colspan="4" style="text-align:left;">
                        <button type="button" class="btn btn-small" data-bind="click:addshrubCanopyRecordsRow">
                        <i class="icon-plus"></i> Add a row</button></td></tr> <script id="shrubCanopyRecordstemplate-upload" type="text/x-tmpl">{% %}</script>
                       <script id="shrubCanopyRecordstemplate-download" type="text/x-tmpl">{% %}</script>                </tfoot>
            </table>
        </div>
</div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>% cover of natives:</label></span><span  data-bind='text:data.percentCoverNative'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>% cover of exotics:</label></span><span  data-bind='text:data.percentCoverExotic'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span8">Note: Only the projected foliage cover for native species is included in the calculated score.</span></span></div></div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Native shrub cover score:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Calculated score for native shrub canopy cover.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><span  data-bind='text:data.shrubCanopyCoverScoreN'></span></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h2>Assessment - Landscape Attributes</h2></span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span6">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Patch size:</label></span><select class="span8" data-bind='value:data.patchSize,options:transients.patchSizeConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Connectivity:</label></span><select class="span8" data-bind='value:data.connectivity,options:transients.connectivityConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Landscape context:</label></span><select class="span8" data-bind='value:data.landscapeContext,options:transients.landscapeContextConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Distance from permanent water:</label></span><select class="span8" data-bind='value:data.distanceFromWater,options:transients.distanceFromWaterConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel required"><label>Is the patch in a fragmented landscape?:</label></span><select class="span8" data-bind='value:data.fragmentedLandscape,options:transients.fragmentedLandscapeConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></span></div></div><div class="span6">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Patch size score:</label></span><span  data-bind='text:data.patchSizeScore'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Connectivity score:</label></span><span  data-bind='text:data.connectivityScore'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Landscape context score:</label></span><span  data-bind='text:data.landscapeContextScore'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Distance from water score:</label></span><span  data-bind='text:data.distanceFromWaterScore'></span></span></div></div></div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h2>BioCondition Score</h2></span></span></div>
<div class="row-fluid space-after output-section" >
<div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span8"><h4>Site-based Condition Attributes</h4></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Large trees score:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Calculated score for large trees.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><span  data-bind='text:data.largeTreesScore'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Tree canopy height score:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Calculated canopy height score as an average of individual layer scores &gt;0.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><span  data-bind='text:data.aveCanopyHeightScore'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Recruitment of canopy species:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Calculated recruitment score for all species in the EDL with evidence of recruitment.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><span  data-bind='text:data.edlRecruitmentScore'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Tree canopy cover (%) score:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Calculated score for native tree canopy cover.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><span  data-bind='text:data.treeCanopyCoverScoreAve'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Shrub layer cover (%):<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Calculated score for native shrub canopy cover.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><span  data-bind='text:data.shrubCanopyCoverScoreN'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Coarse woody debris score:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Calculated score for coarse woody debris.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><span  data-bind='text:data.cwdScore'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Native plant species richness score (4 life forms):</label></span><span  data-bind='text:data.nativePlantSpeciesRichnessScore'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Non-native plant cover score:<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Calculated score for vegetation cover that is comprised of exotic and non-indigenous species.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></label></span><span  data-bind='text:data.nonNativePlantCoverScore'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Native perennial grass cover score:</label></span><span  data-bind='text:data.nativePerennialGrassCoverScore'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Litter cover score:</label></span><span  data-bind='text:data.litterCoverScore'></span></span></div></div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span8"><h4>Landscape Attributes</h4></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Patch size:</label></span><span  data-bind='text:data.patchSizeScore'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Connectivity:</label></span><span  data-bind='text:data.connectivityScore'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Landscape context:</label></span><span  class="span8" data-bind='text:data.landscapeContextScore'></span></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Distance from water:</label></span><span  data-bind='text:data.distanceFromWaterScore'></span></span></div></div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Site BC Score:</label></span><span  data-bind='text:data.siteBcScore'></span></span></div></div></div>

        </div>
        
    </div>
    

<!-- /ko -->

</div>




</div>

<script src="static/Zbj0J8XhmZDqWqIAz5C46TWLOULGl7LNvdJeBlO9fMb.js" type="text/javascript" ></script>





<script src="static/5zeDycYZFxJsfDd3W1kuhrN47XnIMrbhS6gdHDvcExv.js" type="text/javascript" ></script>

<script src="static/ulxBmo4RrKTNT3DuFHethb4EOZpwQfvefxNXivDIbzp.js" type="text/javascript" ></script>








<!--[if gte IE 8]><script src="static/knxjs4G9Cquc79O3iYW107XikPB1Z1ii8QWrtBpzlSP.js" type="text/javascript" ></script><![endif]-->
<script src="static/nRrltgvxdEHd5BqRR1v4XU3ZStOrhDScuH03g4r8E6O.js" type="text/javascript" ></script>

<script src="static/zP22SFJVnKXoWuBJdbsNhcivH2iXiC57wEOHXSDNudf.js" type="text/javascript" ></script>

<script src="static/QjmKsgTA1QWYxF0gcpdSFROG8mBnzaabMZcvDxBb9Xo.js" type="text/javascript" ></script>






<script src="static/IZCc6ZgD3MepYbz4UqlDLzMDNNghSCivcfGebmF9V2d.js" type="text/javascript" ></script>
<script src="static/I4NiLd8qMXMMgs4hAqHb5YT0jGlQhM4Yp0dku4W1Wng.js" type="text/javascript" ></script>



<script src="static/e9gGniNN5cG3OR4oPVWd5lYoxE5Xf282hFe7d4FTQbq.js" type="text/javascript" ></script>


<script src="static/CRNxISj7t7ZCV7B8M8dFtBK7x7R4tGVO36INoBz8gQX.js" type="text/javascript" ></script>

<script src="static/QhlSgFWjl35vcaCRa5cKxHZxRWSSluzptQUKz3PHr9s.js" type="text/javascript" ></script>


<script src="static/8WCQyXwicnBgTdLQ4F5jUFtmVXmqG9eUZKvo74wOnIT.js" type="text/javascript" ></script>
<script src="static/9HtLc6nfgO9H72LVVZxetW45ZR623Fx8EhEdydgOq2F.js" type="text/javascript" ></script>
<script src="static/wkrwT3eqoZlWXFPCQRTvkdsdvwzT5Lw2H89f9eTkQdb.js" type="text/javascript" ></script>


<script type="text/javascript">
        $(function(){

            var viewModelName = "BioCondition_MethodViewModel",
                viewModelInstance = viewModelName + "Instance";

            // load dynamic models - usually objects in a list
                    var TreeSpeciesRichnessRow = function (data) {
            var self = this;
            if (!data) data = {};
            self.transients = {};
            this.speciesNameTree =  new SpeciesViewModel(data['speciesNameTree'], speciesLists);
        };
        var ShrubSpeciesRichnessRow = function (data) {
            var self = this;
            if (!data) data = {};
            self.transients = {};
            this.speciesNameShrub =  new SpeciesViewModel(data['speciesNameShrub'], speciesLists);
        };
        var GrassSpeciesRichnessRow = function (data) {
            var self = this;
            if (!data) data = {};
            self.transients = {};
            this.speciesNameGrass =  new SpeciesViewModel(data['speciesNameGrass'], speciesLists);
        };
        var ForbsAndOtherNonGrassGroundSpeciesRichnessRow = function (data) {
            var self = this;
            if (!data) data = {};
            self.transients = {};
            this.speciesNameForb =  new SpeciesViewModel(data['speciesNameForb'], speciesLists);
        };
        var NonNativeSpeciesRichnessRow = function (data) {
            var self = this;
            if (!data) data = {};
            self.transients = {};
            this.speciesNameNonNative =  new SpeciesViewModel(data['speciesNameNonNative'], speciesLists);
        };
        var CwdLengthsRow = function (data) {
            var self = this;
            if (!data) data = {};
            self.transients = {};
            this.cwdLength = ko.observable(orZero(data['cwdLength']));
        };
        var GroundCoverRow = function (data) {
            var self = this;
            if (!data) data = {};
            self.transients = {};
            this.groundCoverType = ko.observable(orBlank(data['groundCoverType']));
            this.plot1 = ko.observable(orZero(data['plot1']));
            this.plot2 = ko.observable(orZero(data['plot2']));
            this.plot3 = ko.observable(orZero(data['plot3']));
            this.plot4 = ko.observable(orZero(data['plot4']));
            this.plot5 = ko.observable(orZero(data['plot5']));
                    self.plotsMean = ko.computed(function () {
                        if (isNaN(Number(self.plot1())) || isNaN(Number(self.plot2())) || isNaN(Number(self.plot3())) || isNaN(Number(self.plot4())) || isNaN(Number(self.plot5()))) { return 0; }
                        return Number(self.plot1()) + Number(self.plot2()) + Number(self.plot3()) + Number(self.plot4()) + Number(self.plot5());
                    });
                    self.groundCoverScore = ko.computed(function () {
                        if (isNaN(Number(self.plot1())) || isNaN(Number(self.plot2())) || isNaN(Number(self.plot3())) || isNaN(Number(self.plot4())) || isNaN(Number(self.plot5()))) { return 0; }
                        return Number(self.plot1()) + Number(self.plot2()) + Number(self.plot3()) + Number(self.plot4()) + Number(self.plot5());
                    });
        };
        var TreeCanopyRecordsRow = function (data) {
            var self = this;
            if (!data) data = {};
            self.transients = {};
            this.treeOrTreeGroup = ko.observable(orBlank(data['treeOrTreeGroup']));
            self.transients.treeOrTreeGroupConstraints = ["C","S","E"];
            this.treeType = ko.observable(orBlank(data['treeType']));
            self.transients.treeTypeConstraints = ["native","exotic"];
            this.distance = ko.observable(orZero(data['distance']));
            this.totalTCCover = ko.observable(orZero(data['totalTCCover']));
        };
        var ShrubCanopyRecordsRow = function (data) {
            var self = this;
            if (!data) data = {};
            self.transients = {};
            this.shrubType = ko.observable(orBlank(data['shrubType']));
            self.transients.shrubTypeConstraints = ["native","exotic"];
            this.distance = ko.observable(orZero(data['distance']));
            this.totalSCCover = ko.observable(orZero(data['totalSCCover']));
        };
        var speciesLists = [];
        var site = {};


            this[viewModelName] = function (output, config) {
                var self = this;
                self.name = "BioCondition Method";
                self.outputId = orBlank(output.outputId);

                self.data = {};
                self.transients = {};
                var notCompleted = output.outputNotCompleted;

                if (notCompleted === undefined) {
                    notCompleted = config.collapsedByDefault;
                }
                self.outputNotCompleted = ko.observable(notCompleted);
                self.transients.optional = config.optional || false;
                self.transients.questionText = config.optionalQuestionText || 'Not applicable';
                self.transients.dummy = ko.observable();

                // add declarations for dynamic data
                
            self.data.bioregion = ko.observable();
            self.transients.bioregionConstraints = ["BRB - Brigalow Belt","CHC - Channel Country","CQC - Central Queensland Coast","CYP - Cape York Peninsula","DEU - Desert Uplands","EIU - Einasleigh Uplands","GUP - Gulf Plains","MGD - Mitchell Grass Downs","MUL - Mulga Lands","NET - New England Tableland","NWH - Northwest Highlands","SEQ - Southeast Queensland","WET - Wet Tropics"];

            self.data.regionalEcosystem = ko.observable();
            self.transients.regionalEcosystemConstraints = ["1.3.5","1.3.6","1.3.6x1","1.3.7a","1.3.7b","1.3.8","1.5.2","1.5.3","1.5.4","1.5.6","1.5.6b","1.5.6x2","1.5.7a","1.7.1","1.7.1x1","1.7.1x3","1.7.1x4","1.9.1","1.9.1x1","1.9.1x1","1.9.1x2","1.9.2","1.9.4","1.9.5","1.9.5b","1.9.7","1.10.2","1.10.3","1.10.6","1.11.2","1.11.2x1","1.11.2x2","1.11.2x3","1.11.2x4","1.11.3","1.11.3x1","1.11.4","1.12.1","1.12.1x1","4.3.1","4.3.2","4.3.3","4.3.4","4.3.8","4.3.10","4.3.12","4.3.14","4.3.15","4.3.16","4.3.17","4.3.18","4.3.19","4.3.20","4.4.1","4.5.1","4.5.2","4.5.3","4.5.4","4.5.5","4.5.6","4.5.8","4.5.9","4.7.1","4.7.2","4.7.4","4.9.1","4.9.1a","4.9.2","4.9.4","4.9.5","4.9.7","4.9.7a","4.9.8","4.9.10","4.9.11","4.9.12","4.9.13","4.9.14","4.9.15","4.9.16","4.9.17","5.3.2","5.3.4","5.3.5","5.3.6","5.3.7","5.3.8","5.3.8a","5.3.9","5.3.10","5.3.11","5.3.12","5.3.12a","5.3.12b","5.3.13","5.3.13a","5.3.14","5.3.15","5.3.16","5.3.16a","5.3.16b","5.3.17","5.3.18b","5.3.18","5.3.18a","5.3.19","5.3.20","5.3.21","5.3.22","5.3.22a","5.3.22b","5.5.1","5.5.2","5.5.3","5.5.4","5.5.5","5.5.6","5.5.6a","5.6.1","5.6.2","5.6.3","5.6.4","5.6.5","5.6.6","5.6.7","5.6.8","5.7.1","5.7.2","5.7.3","5.7.4","5.7.5","5.7.6","5.7.7","5.7.8","5.7.9","5.7.10","5.7.11","5.7.12","5.7.13","5.7.14","5.9.1","5.9.1x1","5.9.2","5.9.3","5.9.3a","5.9.3x1","5.9.4","5.9.5","6.3.1","6.3.2","6.3.2a","6.3.3","6.3.4","6.3.5","6.3.6","6.3.7","6.3.8","6.3.9","6.3.10","6.3.11","6.3.11b","6.3.12","6.3.13","6.3.14","6.3.15","6.3.16","6.3.17","6.3.18","6.3.21","6.3.22","6.3.24","6.3.25","6.4.1","6.4.3","6.4.4","6.5.3","6.5.6","6.5.8","6.5.9","6.5.11","6.5.13","6.5.14","6.5.15","6.5.15a","6.5.16","6.5.18","6.5.1","6.5.7","6.5.10","6.5.2","6.5.17","6.6.1","6.6.1b","6.6.2","6.7.1","6.7.2","6.7.5","6.7.6","6.7.7","6.7.9","6.7.10","6.7.11","6.7.12","6.7.13","6.7.14","6.7.15","6.7.16","6.7.17","6.9.2","6.9.3","6.9.4","8.2.2","8.2.8a","8.3.6c","8.5.7","8.11.3b","8.12.5b","8.3.5","8.2.13b","8.3.2","8.11.3c","10.3.1","10.3.14a","10.3.6a","10.3.28a","10.5.1a","10.5.5a","10.7.2a","10.7.3a","10.7.7a","10.3.3a","10.3.4","10.3.4a","10.3.12a","10.3.13a","10.3.27a","10.4.3a","10.5.2","10.5.2a","10.5.4","10.5.4a","10.5.12","10.7.4","10.7.5","10.7.11a","10.9.3a","10.10.3","11.3.1","11.3.2","11.3.21","11.4.3","11.4.3a","11.4.3b","11.4.10","11.5.15","11.8.3","11.8.15","11.9.4a","11.9.4c","11.9.5","11.9.6","11.10.1","11.11.18","11.12.21","11.3.4","11.3.17","11.3.23","11.8.2a","11.8.8","11.1.2","11.2.3","11.3.25","11.3.26","11.3.36","11.4.12","11.5.8","11.11.15","11.11.15a","11.11.4","11.12.1","11.12.4","11.3.3","11.3.6","11.3.7","11.3.30","11.3.30a","11.3.32","11.3.35","11.3.35a","11.3.37","11.4.6","11.4.9","11.5.1","11.5.3","11.7.1","11.7.2","11.8.5","11.8.11","11.9.7","11.9.9","11.9.9a","11.9.10","11.10.3","11.11.1","11.12.2","11.12.2a","11.12.9","11.12.9a","11.12.16","11.12.16a","11.3.9","11.3.25b","11.3.29a","11.5.12a","11.3.10","11.3.27i","11.3.33","11.4.2","11.4.4","11.4.5","11.5.9","11.5.9a","11.5.10","11.5.12","11.7.3","11.11.6","11.11.8","11.11.9","11.11.13","11.11.16","11.11.19","11.12.7","11.12.10","11.12.14","11.12.15","11.12.18","12.2.1","12.2.5","12.2.6","12.2.8","12.2.9","12.3.3","12.3.3c","12.3.5","12.3.11","12.3.12","12.5.2x1","12.5.3","12.5.4","12.5.6","12.5.6a","12.5.7","12.5.13","12.8.21","12.9-10.11","12.9-10.15","12.9-10.19","12.11.3","12.11.5a","12.11.23","12.12.15","12.8.16","12.3.8","12.8.17","12.8.24","12.9-10.2","12.9-10.7","12.9-10.19a","12.2.7","12.3.1","12.3.7","12.11.6","12.11.7","12.12.12","12.9-10.6","13.3.3","13.3.4","13.9.2","13.12.8","13.12.9","13.12.10"];

            self.data.property = ko.observable();

            self.data.transectBearing = ko.observable();

            self.data.patchArea = ko.observable();

            self.data.assessmentSiteDescription = ko.observable();

            self.data.benchmarkEucalyptLargeTreeDBH = ko.observable();

            self.data.benchmarkEucalyptLargeTreeNo = ko.observable();

            self.data.benchmarkNonEucalyptLargeTreeNo = ko.observable();

            self.data.benchmarkNonEucalyptLargeTreeDBH = ko.observable();

            self.data.benchmarkCWD = ko.observable();

            self.data.benchmarkTreeEDLHeight = ko.observable();

            self.data.benchmarkSubCanopyHeight = ko.observable();

            self.data.benchmarkEdlSpeciesRecruitment = ko.observable();

            self.data.benchmarkNumTreeSpeciesTotal = ko.observable();

            self.data.benchmarkNumShrubSpeciesTotal = ko.observable();

            self.data.benchmarkNumGrassSpeciesTotal = ko.observable();

            self.data.benchmarkNumForbSpeciesTotal = ko.observable();

            self.data.benchmarkSpeciesCoverExotic = ko.observable();

            self.data.numLargeEucalypt = ko.observable();

            self.data.numLargeNonEucalypt = ko.observable();

            self.data.totalLargeTrees = ko.observable();

            self.data.numLargeEucalyptPerHa = ko.observable();

            self.data.numLargeNonEucalyptPerHa = ko.observable();

            self.data.totalLargeTreesPerHa = ko.observable();

            self.data.largeTreesScore = ko.observable();

            self.data.emergentHeight = ko.observable();

            self.data.treeCanopyHeight = ko.observable();

            self.data.subcanopyHeight = ko.observable();

            self.data.emergentHeightScore = ko.observable();

            self.data.edlCanopyHeightScore = ko.observable();

            self.data.subcanopyHeightScore = ko.observable();

            self.data.aveCanopyHeightScore = ko.observable();

            self.data.proportionDominantCanopySpeciesWithEvidenceOfRecruitment = ko.observable();

            self.data.edlRecruitmentScore = ko.observable();

            self.data.treeSpeciesRichness = ko.observableArray([]);
            self.selectedtreeSpeciesRichnessRow = ko.observable();
        

            self.loadtreeSpeciesRichness = function (data, append) {
                if (!append) {
                    self.data.treeSpeciesRichness([]);
                }
                if (data === undefined) {
                    self.addtreeSpeciesRichnessRow();
                } else {
                    $.each(data, function (i, obj) {
                        self.data.treeSpeciesRichness.push(new TreeSpeciesRichnessRow(obj));
                    });
                }
            };

            self.addtreeSpeciesRichnessRow = function () {
                var newRow = new TreeSpeciesRichnessRow();
                self.data.treeSpeciesRichness.push(newRow);
                
            };
            self.removetreeSpeciesRichnessRow = function (row) {
                self.data.treeSpeciesRichness.remove(row);
                
            };
            self.treeSpeciesRichnessrowCount = function () {
                return self.data.treeSpeciesRichness().length;
            };

            self.treeSpeciesRichnessTableDataUploadVisible = ko.observable(false);
            self.showtreeSpeciesRichnessTableDataUpload = function() {
                self.treeSpeciesRichnessTableDataUploadVisible(!self.treeSpeciesRichnessTableDataUploadVisible());
            };

            self.treeSpeciesRichnessTableDataUploadOptions = {
                    url:'/activity/ajaxUpload',
                    done:function(e, data) {
                        if (data.result.error) {
                            self.uploadFailed(data.result.error);
                        }
                        else {
                            self.loadtreeSpeciesRichness(data.result.data, self.appendTableRows());
                        }
                    },
                    fail:function(e, data) {
                        var message = 'Please contact MERIT support and attach your spreadsheet to help us resolve the problem';
                        self.uploadFailed(data);

                    },
                    uploadTemplateId: "treeSpeciesRichnesstemplate-upload",
                    downloadTemplateId: "treeSpeciesRichnesstemplate-download",
                    formData:{type:'BioCondition Method', listName:'treeSpeciesRichness'}
            };
            self.appendTableRows = ko.observable(true);
            self.uploadFailed = function(message) {
                        var text = "<span class='label label-important'>Important</span><h4>There was an error uploading your data.</h4>";
                        text += "<p>"+message+"</p>";
                        bootbox.alert(text)
            };

            self.data.numTreeSpecies = ko.observable();

            self.data.numTreeSpeciesTotal = ko.observable();

            self.data.numUnknownTreeSpecies = ko.observable();

            self.data.totalTreeSpeciesRichness = ko.observable();

            self.data.shrubSpeciesRichness = ko.observableArray([]);
            self.selectedshrubSpeciesRichnessRow = ko.observable();
        

            self.loadshrubSpeciesRichness = function (data, append) {
                if (!append) {
                    self.data.shrubSpeciesRichness([]);
                }
                if (data === undefined) {
                    self.addshrubSpeciesRichnessRow();
                } else {
                    $.each(data, function (i, obj) {
                        self.data.shrubSpeciesRichness.push(new ShrubSpeciesRichnessRow(obj));
                    });
                }
            };

            self.addshrubSpeciesRichnessRow = function () {
                var newRow = new ShrubSpeciesRichnessRow();
                self.data.shrubSpeciesRichness.push(newRow);
                
            };
            self.removeshrubSpeciesRichnessRow = function (row) {
                self.data.shrubSpeciesRichness.remove(row);
                
            };
            self.shrubSpeciesRichnessrowCount = function () {
                return self.data.shrubSpeciesRichness().length;
            };

            self.shrubSpeciesRichnessTableDataUploadVisible = ko.observable(false);
            self.showshrubSpeciesRichnessTableDataUpload = function() {
                self.shrubSpeciesRichnessTableDataUploadVisible(!self.shrubSpeciesRichnessTableDataUploadVisible());
            };

            self.shrubSpeciesRichnessTableDataUploadOptions = {
                    url:'/activity/ajaxUpload',
                    done:function(e, data) {
                        if (data.result.error) {
                            self.uploadFailed(data.result.error);
                        }
                        else {
                            self.loadshrubSpeciesRichness(data.result.data, self.appendTableRows());
                        }
                    },
                    fail:function(e, data) {
                        var message = 'Please contact MERIT support and attach your spreadsheet to help us resolve the problem';
                        self.uploadFailed(data);

                    },
                    uploadTemplateId: "shrubSpeciesRichnesstemplate-upload",
                    downloadTemplateId: "shrubSpeciesRichnesstemplate-download",
                    formData:{type:'BioCondition Method', listName:'shrubSpeciesRichness'}
            };
            self.appendTableRows = ko.observable(true);
            self.uploadFailed = function(message) {
                        var text = "<span class='label label-important'>Important</span><h4>There was an error uploading your data.</h4>";
                        text += "<p>"+message+"</p>";
                        bootbox.alert(text)
            };

            self.data.numShrubSpecies = ko.observable();

            self.data.numUnknownShrubSpecies = ko.observable();

            self.data.numShrubSpeciesTotal = ko.observable();

            self.data.grassSpeciesRichness = ko.observableArray([]);
            self.selectedgrassSpeciesRichnessRow = ko.observable();
        

            self.loadgrassSpeciesRichness = function (data, append) {
                if (!append) {
                    self.data.grassSpeciesRichness([]);
                }
                if (data === undefined) {
                    self.addgrassSpeciesRichnessRow();
                } else {
                    $.each(data, function (i, obj) {
                        self.data.grassSpeciesRichness.push(new GrassSpeciesRichnessRow(obj));
                    });
                }
            };

            self.addgrassSpeciesRichnessRow = function () {
                var newRow = new GrassSpeciesRichnessRow();
                self.data.grassSpeciesRichness.push(newRow);
                
            };
            self.removegrassSpeciesRichnessRow = function (row) {
                self.data.grassSpeciesRichness.remove(row);
                
            };
            self.grassSpeciesRichnessrowCount = function () {
                return self.data.grassSpeciesRichness().length;
            };

            self.grassSpeciesRichnessTableDataUploadVisible = ko.observable(false);
            self.showgrassSpeciesRichnessTableDataUpload = function() {
                self.grassSpeciesRichnessTableDataUploadVisible(!self.grassSpeciesRichnessTableDataUploadVisible());
            };

            self.grassSpeciesRichnessTableDataUploadOptions = {
                    url:'/activity/ajaxUpload',
                    done:function(e, data) {
                        if (data.result.error) {
                            self.uploadFailed(data.result.error);
                        }
                        else {
                            self.loadgrassSpeciesRichness(data.result.data, self.appendTableRows());
                        }
                    },
                    fail:function(e, data) {
                        var message = 'Please contact MERIT support and attach your spreadsheet to help us resolve the problem';
                        self.uploadFailed(data);

                    },
                    uploadTemplateId: "grassSpeciesRichnesstemplate-upload",
                    downloadTemplateId: "grassSpeciesRichnesstemplate-download",
                    formData:{type:'BioCondition Method', listName:'grassSpeciesRichness'}
            };
            self.appendTableRows = ko.observable(true);
            self.uploadFailed = function(message) {
                        var text = "<span class='label label-important'>Important</span><h4>There was an error uploading your data.</h4>";
                        text += "<p>"+message+"</p>";
                        bootbox.alert(text)
            };

            self.data.numGrassSpecies = ko.observable();

            self.data.numUnknownGrassSpecies = ko.observable();

            self.data.numGrassSpeciesTotal = ko.observable();

            self.data.forbsAndOtherNonGrassGroundSpeciesRichness = ko.observableArray([]);
            self.selectedforbsAndOtherNonGrassGroundSpeciesRichnessRow = ko.observable();
        

            self.loadforbsAndOtherNonGrassGroundSpeciesRichness = function (data, append) {
                if (!append) {
                    self.data.forbsAndOtherNonGrassGroundSpeciesRichness([]);
                }
                if (data === undefined) {
                    self.addforbsAndOtherNonGrassGroundSpeciesRichnessRow();
                } else {
                    $.each(data, function (i, obj) {
                        self.data.forbsAndOtherNonGrassGroundSpeciesRichness.push(new ForbsAndOtherNonGrassGroundSpeciesRichnessRow(obj));
                    });
                }
            };

            self.addforbsAndOtherNonGrassGroundSpeciesRichnessRow = function () {
                var newRow = new ForbsAndOtherNonGrassGroundSpeciesRichnessRow();
                self.data.forbsAndOtherNonGrassGroundSpeciesRichness.push(newRow);
                
            };
            self.removeforbsAndOtherNonGrassGroundSpeciesRichnessRow = function (row) {
                self.data.forbsAndOtherNonGrassGroundSpeciesRichness.remove(row);
                
            };
            self.forbsAndOtherNonGrassGroundSpeciesRichnessrowCount = function () {
                return self.data.forbsAndOtherNonGrassGroundSpeciesRichness().length;
            };

            self.forbsAndOtherNonGrassGroundSpeciesRichnessTableDataUploadVisible = ko.observable(false);
            self.showforbsAndOtherNonGrassGroundSpeciesRichnessTableDataUpload = function() {
                self.forbsAndOtherNonGrassGroundSpeciesRichnessTableDataUploadVisible(!self.forbsAndOtherNonGrassGroundSpeciesRichnessTableDataUploadVisible());
            };

            self.forbsAndOtherNonGrassGroundSpeciesRichnessTableDataUploadOptions = {
                    url:'/activity/ajaxUpload',
                    done:function(e, data) {
                        if (data.result.error) {
                            self.uploadFailed(data.result.error);
                        }
                        else {
                            self.loadforbsAndOtherNonGrassGroundSpeciesRichness(data.result.data, self.appendTableRows());
                        }
                    },
                    fail:function(e, data) {
                        var message = 'Please contact MERIT support and attach your spreadsheet to help us resolve the problem';
                        self.uploadFailed(data);

                    },
                    uploadTemplateId: "forbsAndOtherNonGrassGroundSpeciesRichnesstemplate-upload",
                    downloadTemplateId: "forbsAndOtherNonGrassGroundSpeciesRichnesstemplate-download",
                    formData:{type:'BioCondition Method', listName:'forbsAndOtherNonGrassGroundSpeciesRichness'}
            };
            self.appendTableRows = ko.observable(true);
            self.uploadFailed = function(message) {
                        var text = "<span class='label label-important'>Important</span><h4>There was an error uploading your data.</h4>";
                        text += "<p>"+message+"</p>";
                        bootbox.alert(text)
            };

            self.data.numForbSpecies = ko.observable();

            self.data.numUnknownForbSpecies = ko.observable();

            self.data.numForbSpeciesTotal = ko.observable();

            self.data.nonNativeSpeciesRichness = ko.observableArray([]);
            self.selectednonNativeSpeciesRichnessRow = ko.observable();
        

            self.loadnonNativeSpeciesRichness = function (data, append) {
                if (!append) {
                    self.data.nonNativeSpeciesRichness([]);
                }
                if (data === undefined) {
                    self.addnonNativeSpeciesRichnessRow();
                } else {
                    $.each(data, function (i, obj) {
                        self.data.nonNativeSpeciesRichness.push(new NonNativeSpeciesRichnessRow(obj));
                    });
                }
            };

            self.addnonNativeSpeciesRichnessRow = function () {
                var newRow = new NonNativeSpeciesRichnessRow();
                self.data.nonNativeSpeciesRichness.push(newRow);
                
            };
            self.removenonNativeSpeciesRichnessRow = function (row) {
                self.data.nonNativeSpeciesRichness.remove(row);
                
            };
            self.nonNativeSpeciesRichnessrowCount = function () {
                return self.data.nonNativeSpeciesRichness().length;
            };

            self.nonNativeSpeciesRichnessTableDataUploadVisible = ko.observable(false);
            self.shownonNativeSpeciesRichnessTableDataUpload = function() {
                self.nonNativeSpeciesRichnessTableDataUploadVisible(!self.nonNativeSpeciesRichnessTableDataUploadVisible());
            };

            self.nonNativeSpeciesRichnessTableDataUploadOptions = {
                    url:'/activity/ajaxUpload',
                    done:function(e, data) {
                        if (data.result.error) {
                            self.uploadFailed(data.result.error);
                        }
                        else {
                            self.loadnonNativeSpeciesRichness(data.result.data, self.appendTableRows());
                        }
                    },
                    fail:function(e, data) {
                        var message = 'Please contact MERIT support and attach your spreadsheet to help us resolve the problem';
                        self.uploadFailed(data);

                    },
                    uploadTemplateId: "nonNativeSpeciesRichnesstemplate-upload",
                    downloadTemplateId: "nonNativeSpeciesRichnesstemplate-download",
                    formData:{type:'BioCondition Method', listName:'nonNativeSpeciesRichness'}
            };
            self.appendTableRows = ko.observable(true);
            self.uploadFailed = function(message) {
                        var text = "<span class='label label-important'>Important</span><h4>There was an error uploading your data.</h4>";
                        text += "<p>"+message+"</p>";
                        bootbox.alert(text)
            };

            self.data.numNonNativeSpecies = ko.observable();

            self.data.numUnknownNonNativeSpecies = ko.observable();

            self.data.numNonNativeSpeciesTotal = ko.observable();

            self.data.nonNativePlantCoverPercent = ko.observable();

            self.data.nonNativePlantCoverScore = ko.observable();

            self.data.cwdLengths = ko.observableArray([]);
            self.selectedcwdLengthsRow = ko.observable();
        

            self.loadcwdLengths = function (data, append) {
                if (!append) {
                    self.data.cwdLengths([]);
                }
                if (data === undefined) {
                    self.addcwdLengthsRow();
                } else {
                    $.each(data, function (i, obj) {
                        self.data.cwdLengths.push(new CwdLengthsRow(obj));
                    });
                }
            };

            self.addcwdLengthsRow = function () {
                var newRow = new CwdLengthsRow();
                self.data.cwdLengths.push(newRow);
                
            };
            self.removecwdLengthsRow = function (row) {
                self.data.cwdLengths.remove(row);
                
            };
            self.cwdLengthsrowCount = function () {
                return self.data.cwdLengths().length;
            };

            self.cwdLengthsTableDataUploadVisible = ko.observable(false);
            self.showcwdLengthsTableDataUpload = function() {
                self.cwdLengthsTableDataUploadVisible(!self.cwdLengthsTableDataUploadVisible());
            };

            self.cwdLengthsTableDataUploadOptions = {
                    url:'/activity/ajaxUpload',
                    done:function(e, data) {
                        if (data.result.error) {
                            self.uploadFailed(data.result.error);
                        }
                        else {
                            self.loadcwdLengths(data.result.data, self.appendTableRows());
                        }
                    },
                    fail:function(e, data) {
                        var message = 'Please contact MERIT support and attach your spreadsheet to help us resolve the problem';
                        self.uploadFailed(data);

                    },
                    uploadTemplateId: "cwdLengthstemplate-upload",
                    downloadTemplateId: "cwdLengthstemplate-download",
                    formData:{type:'BioCondition Method', listName:'cwdLengths'}
            };
            self.appendTableRows = ko.observable(true);
            self.uploadFailed = function(message) {
                        var text = "<span class='label label-important'>Important</span><h4>There was an error uploading your data.</h4>";
                        text += "<p>"+message+"</p>";
                        bootbox.alert(text)
            };

            self.data.totalCwdLength = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.cwdLengths().length; i++) {
                    var value = self.data.cwdLengths()[i].cwdLength();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.cwdScore = ko.observable();

            self.data.groundCover = ko.observableArray([]);
            self.selectedgroundCoverRow = ko.observable();
        

            self.loadgroundCover = function (data, append) {
                if (!append) {
                    self.data.groundCover([]);
                }
                if (data === undefined) {
                                        self.data.groundCover.push(new GroundCoverRow({"groundCoverType":"% Native Perennial ('decreaser') grass cover*"}));
                    self.data.groundCover.push(new GroundCoverRow({"groundCoverType":"% Native other grass cover (if relevant)*"}));
                    self.data.groundCover.push(new GroundCoverRow({"groundCoverType":"% Native forbs and other species (non-grass)"}));
                    self.data.groundCover.push(new GroundCoverRow({"groundCoverType":"% Native shrubs (< 1m height)"}));
                    self.data.groundCover.push(new GroundCoverRow({"groundCoverType":"% Non-native grass"}));
                    self.data.groundCover.push(new GroundCoverRow({"groundCoverType":"% Non-native forbs and shrubs"}));
                    self.data.groundCover.push(new GroundCoverRow({"groundCoverType":"% Litter*"}));
                    self.data.groundCover.push(new GroundCoverRow({"groundCoverType":"% Rock"}));
                    self.data.groundCover.push(new GroundCoverRow({"groundCoverType":"% Bare ground"}));
                    self.data.groundCover.push(new GroundCoverRow({"groundCoverType":"% Cryptograms"}));
                } else {
                    $.each(data, function (i, obj) {
                        self.data.groundCover.push(new GroundCoverRow(obj));
                    });
                }
            };

            self.addgroundCoverRow = function () {
                var newRow = new GroundCoverRow();
                self.data.groundCover.push(newRow);
                
            };
            self.removegroundCoverRow = function (row) {
                self.data.groundCover.remove(row);
                
            };
            self.groundCoverrowCount = function () {
                return self.data.groundCover().length;
            };

            self.groundCoverTableDataUploadVisible = ko.observable(false);
            self.showgroundCoverTableDataUpload = function() {
                self.groundCoverTableDataUploadVisible(!self.groundCoverTableDataUploadVisible());
            };

            self.groundCoverTableDataUploadOptions = {
                    url:'/activity/ajaxUpload',
                    done:function(e, data) {
                        if (data.result.error) {
                            self.uploadFailed(data.result.error);
                        }
                        else {
                            self.loadgroundCover(data.result.data, self.appendTableRows());
                        }
                    },
                    fail:function(e, data) {
                        var message = 'Please contact MERIT support and attach your spreadsheet to help us resolve the problem';
                        self.uploadFailed(data);

                    },
                    uploadTemplateId: "groundCovertemplate-upload",
                    downloadTemplateId: "groundCovertemplate-download",
                    formData:{type:'BioCondition Method', listName:'groundCover'}
            };
            self.appendTableRows = ko.observable(true);
            self.uploadFailed = function(message) {
                        var text = "<span class='label label-important'>Important</span><h4>There was an error uploading your data.</h4>";
                        text += "<p>"+message+"</p>";
                        bootbox.alert(text)
            };

            self.data.totalPlot1 = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.groundCover().length; i++) {
                    var value = self.data.groundCover()[i].plot1();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.totalPlot2 = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.groundCover().length; i++) {
                    var value = self.data.groundCover()[i].plot2();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.totalPlot3 = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.groundCover().length; i++) {
                    var value = self.data.groundCover()[i].plot3();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.totalPlot4 = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.groundCover().length; i++) {
                    var value = self.data.groundCover()[i].plot4();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.totalPlot5 = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.groundCover().length; i++) {
                    var value = self.data.groundCover()[i].plot5();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.treeCanopyRecords = ko.observableArray([]);
            self.selectedtreeCanopyRecordsRow = ko.observable();
        

            self.loadtreeCanopyRecords = function (data, append) {
                if (!append) {
                    self.data.treeCanopyRecords([]);
                }
                if (data === undefined) {
                    self.addtreeCanopyRecordsRow();
                } else {
                    $.each(data, function (i, obj) {
                        self.data.treeCanopyRecords.push(new TreeCanopyRecordsRow(obj));
                    });
                }
            };

            self.addtreeCanopyRecordsRow = function () {
                var newRow = new TreeCanopyRecordsRow();
                self.data.treeCanopyRecords.push(newRow);
                
            };
            self.removetreeCanopyRecordsRow = function (row) {
                self.data.treeCanopyRecords.remove(row);
                
            };
            self.treeCanopyRecordsrowCount = function () {
                return self.data.treeCanopyRecords().length;
            };

            self.treeCanopyRecordsTableDataUploadVisible = ko.observable(false);
            self.showtreeCanopyRecordsTableDataUpload = function() {
                self.treeCanopyRecordsTableDataUploadVisible(!self.treeCanopyRecordsTableDataUploadVisible());
            };

            self.treeCanopyRecordsTableDataUploadOptions = {
                    url:'/activity/ajaxUpload',
                    done:function(e, data) {
                        if (data.result.error) {
                            self.uploadFailed(data.result.error);
                        }
                        else {
                            self.loadtreeCanopyRecords(data.result.data, self.appendTableRows());
                        }
                    },
                    fail:function(e, data) {
                        var message = 'Please contact MERIT support and attach your spreadsheet to help us resolve the problem';
                        self.uploadFailed(data);

                    },
                    uploadTemplateId: "treeCanopyRecordstemplate-upload",
                    downloadTemplateId: "treeCanopyRecordstemplate-download",
                    formData:{type:'BioCondition Method', listName:'treeCanopyRecords'}
            };
            self.appendTableRows = ko.observable(true);
            self.uploadFailed = function(message) {
                        var text = "<span class='label label-important'>Important</span><h4>There was an error uploading your data.</h4>";
                        text += "<p>"+message+"</p>";
                        bootbox.alert(text)
            };

            self.data.percentCoverC = ko.observable();

            self.data.percentCoverS = ko.observable();

            self.data.percentCoverE = ko.observable();

            self.data.coverScoreC = ko.observable();

            self.data.coverScoreS = ko.observable();

            self.data.coverScoreE = ko.observable();

            self.data.treeCanopyCoverScoreAve = ko.observable();

            self.data.shrubCanopyRecords = ko.observableArray([]);
            self.selectedshrubCanopyRecordsRow = ko.observable();
        

            self.loadshrubCanopyRecords = function (data, append) {
                if (!append) {
                    self.data.shrubCanopyRecords([]);
                }
                if (data === undefined) {
                    self.addshrubCanopyRecordsRow();
                } else {
                    $.each(data, function (i, obj) {
                        self.data.shrubCanopyRecords.push(new ShrubCanopyRecordsRow(obj));
                    });
                }
            };

            self.addshrubCanopyRecordsRow = function () {
                var newRow = new ShrubCanopyRecordsRow();
                self.data.shrubCanopyRecords.push(newRow);
                
            };
            self.removeshrubCanopyRecordsRow = function (row) {
                self.data.shrubCanopyRecords.remove(row);
                
            };
            self.shrubCanopyRecordsrowCount = function () {
                return self.data.shrubCanopyRecords().length;
            };

            self.shrubCanopyRecordsTableDataUploadVisible = ko.observable(false);
            self.showshrubCanopyRecordsTableDataUpload = function() {
                self.shrubCanopyRecordsTableDataUploadVisible(!self.shrubCanopyRecordsTableDataUploadVisible());
            };

            self.shrubCanopyRecordsTableDataUploadOptions = {
                    url:'/activity/ajaxUpload',
                    done:function(e, data) {
                        if (data.result.error) {
                            self.uploadFailed(data.result.error);
                        }
                        else {
                            self.loadshrubCanopyRecords(data.result.data, self.appendTableRows());
                        }
                    },
                    fail:function(e, data) {
                        var message = 'Please contact MERIT support and attach your spreadsheet to help us resolve the problem';
                        self.uploadFailed(data);

                    },
                    uploadTemplateId: "shrubCanopyRecordstemplate-upload",
                    downloadTemplateId: "shrubCanopyRecordstemplate-download",
                    formData:{type:'BioCondition Method', listName:'shrubCanopyRecords'}
            };
            self.appendTableRows = ko.observable(true);
            self.uploadFailed = function(message) {
                        var text = "<span class='label label-important'>Important</span><h4>There was an error uploading your data.</h4>";
                        text += "<p>"+message+"</p>";
                        bootbox.alert(text)
            };

            self.data.percentCoverNative = ko.observable();

            self.data.percentCoverExotic = ko.observable();

            self.data.shrubCanopyCoverScoreN = ko.observable();

            self.data.patchSize = ko.observable();
            self.transients.patchSizeConstraints = ["< 5 ha remnant AND/OR high-value regrowth",">= 5 – 25 ha remnant AND/OR high-value regrowth",">= 25 – 100 ha remnant",">= 25 – 200 ha remnant and high-value regrowth",">= 25 – 200 ha high-value regrowth",">= 100 – 200 ha remnant","> 200 ha remnant and high-value regrowth","> 200 ha high-value regrowth",">= 200 ha remnant"];

            self.data.connectivity = ko.observable();
            self.transients.connectivityConstraints = ["Low - The assessment unit is not connected using any of the below descriptions","Medium - The assessment unit is connected with adjacent remnant vegetation along > 10% to < 50% of its perimeter","Medium - The assessment unit is connected with adjacent remnant vegetation along < 10% of its perimeter AND is connected with adjacent regrowth native vegetation > 25% of its perimeter","High - The assessment unit is connected with adjacent remnant vegetation along 50% to 75% of its perimeter","Very high - The assessment unit is connected with adjacent remnant vegetation along > 75% of its perimeter","Very high - The assessment unit includes > 500 ha remnant vegetation"];

            self.data.landscapeContext = ko.observable();
            self.transients.landscapeContextConstraints = ["Low - < 10% remnant vegetation AND < 30% native non-remnant vegetation (regrowth)","Medium - >= 10% to 30% remnant vegetation AND < 30% regrowth","Medium - < 10% remnant vegetation AND >= 30% regrowth","High - >= 30% to 75% remnant vegetation","High - >= 10% to 30% remnant vegetation AND >= 30% regrowth","Very high - >75% remnant vegetation"];

            self.data.distanceFromWater = ko.observable();
            self.transients.distanceFromWaterConstraints = ["0 to 500 m from water point","500 m to 1 km from water point","1 km to 3 km from water point","3 km to 5 km from water point","> 5 km from water point"];

            self.data.fragmentedLandscape = ko.observable();
            self.transients.fragmentedLandscapeConstraints = ["Yes","No"];

            self.data.patchSizeScore = ko.observable();

            self.data.connectivityScore = ko.observable();

            self.data.landscapeContextScore = ko.observable();

            self.data.distanceFromWaterScore = ko.observable();

            self.data.siteBcScore = ko.observable();
            self.transients.site = site;

                // this will be called when generating a savable model to remove transient properties
                self.removeBeforeSave = function (jsData) {
                    // add code to remove any transients added by the dynamic tags
                                    delete jsData.selectedgroundCoverRow;
                delete jsData.groundCoverTableDataUploadOptions
                delete jsData.groundCoverTableDataUploadVisible

                    delete jsData.activityType;
                    delete jsData.transients;
                    return jsData;
                };

                // this returns a JS object ready for saving
                self.modelForSaving = function () {
                    // get model as a plain javascript object
                    var jsData = ko.mapping.toJS(self, {'ignore':['transients']});
                    if (self.outputNotCompleted()) {
                        jsData.data = {};
                    }
                    // get rid of any transient observables
                    return self.removeBeforeSave(jsData);
                };

                // this is a version of toJSON that just returns the model as it will be saved
                // it is used for detecting when the model is modified (in a way that should invoke a save)
                // the ko.toJSON conversion is preserved so we can use it to view the active model for debugging
                self.modelAsJSON = function () {
                    return JSON.stringify(self.modelForSaving());
                };

                self.loadData = function (data) {
                    // load dynamic data
                                    self.data['bioregion'](data['bioregion']);
                self.data['regionalEcosystem'](data['regionalEcosystem']);
                self.data['property'](data['property']);
                self.data['transectBearing'](orZero(data['transectBearing']));
                self.data['patchArea'](orZero(data['patchArea']));
                self.data['assessmentSiteDescription'](data['assessmentSiteDescription']);
                self.data['benchmarkEucalyptLargeTreeDBH'](orZero(data['benchmarkEucalyptLargeTreeDBH']));
                self.data['benchmarkEucalyptLargeTreeNo'](orZero(data['benchmarkEucalyptLargeTreeNo']));
                self.data['benchmarkNonEucalyptLargeTreeNo'](orZero(data['benchmarkNonEucalyptLargeTreeNo']));
                self.data['benchmarkNonEucalyptLargeTreeDBH'](orZero(data['benchmarkNonEucalyptLargeTreeDBH']));
                self.data['benchmarkCWD'](orZero(data['benchmarkCWD']));
                self.data['benchmarkTreeEDLHeight'](orZero(data['benchmarkTreeEDLHeight']));
                self.data['benchmarkSubCanopyHeight'](orZero(data['benchmarkSubCanopyHeight']));
                self.data['benchmarkEdlSpeciesRecruitment'](orZero(data['benchmarkEdlSpeciesRecruitment']));
                self.data['benchmarkNumTreeSpeciesTotal'](orZero(data['benchmarkNumTreeSpeciesTotal']));
                self.data['benchmarkNumShrubSpeciesTotal'](orZero(data['benchmarkNumShrubSpeciesTotal']));
                self.data['benchmarkNumGrassSpeciesTotal'](orZero(data['benchmarkNumGrassSpeciesTotal']));
                self.data['benchmarkNumForbSpeciesTotal'](orZero(data['benchmarkNumForbSpeciesTotal']));
                self.data['benchmarkSpeciesCoverExotic'](orZero(data['benchmarkSpeciesCoverExotic']));
                self.data['numLargeEucalypt'](orZero(data['numLargeEucalypt']));
                self.data['numLargeNonEucalypt'](orZero(data['numLargeNonEucalypt']));
                self.data['totalLargeTrees'](orZero(data['totalLargeTrees']));
                self.data['numLargeEucalyptPerHa'](orZero(data['numLargeEucalyptPerHa']));
                self.data['numLargeNonEucalyptPerHa'](orZero(data['numLargeNonEucalyptPerHa']));
                self.data['totalLargeTreesPerHa'](orZero(data['totalLargeTreesPerHa']));
                self.data['largeTreesScore'](orZero(data['largeTreesScore']));
                self.data['emergentHeight'](orZero(data['emergentHeight']));
                self.data['treeCanopyHeight'](orZero(data['treeCanopyHeight']));
                self.data['subcanopyHeight'](orZero(data['subcanopyHeight']));
                self.data['emergentHeightScore'](orZero(data['emergentHeightScore']));
                self.data['edlCanopyHeightScore'](orZero(data['edlCanopyHeightScore']));
                self.data['subcanopyHeightScore'](orZero(data['subcanopyHeightScore']));
                self.data['aveCanopyHeightScore'](orZero(data['aveCanopyHeightScore']));
                self.data['proportionDominantCanopySpeciesWithEvidenceOfRecruitment'](orZero(data['proportionDominantCanopySpeciesWithEvidenceOfRecruitment']));
                self.data['edlRecruitmentScore'](orZero(data['edlRecruitmentScore']));
                self.loadtreeSpeciesRichness(data.treeSpeciesRichness);
                self.data['numTreeSpecies'](orZero(data['numTreeSpecies']));
                self.data['numTreeSpeciesTotal'](orZero(data['numTreeSpeciesTotal']));
                self.data['numUnknownTreeSpecies'](orZero(data['numUnknownTreeSpecies']));
                self.data['totalTreeSpeciesRichness'](orZero(data['totalTreeSpeciesRichness']));
                self.loadshrubSpeciesRichness(data.shrubSpeciesRichness);
                self.data['numShrubSpecies'](orZero(data['numShrubSpecies']));
                self.data['numUnknownShrubSpecies'](orZero(data['numUnknownShrubSpecies']));
                self.data['numShrubSpeciesTotal'](orZero(data['numShrubSpeciesTotal']));
                self.loadgrassSpeciesRichness(data.grassSpeciesRichness);
                self.data['numGrassSpecies'](orZero(data['numGrassSpecies']));
                self.data['numUnknownGrassSpecies'](orZero(data['numUnknownGrassSpecies']));
                self.data['numGrassSpeciesTotal'](orZero(data['numGrassSpeciesTotal']));
                self.loadforbsAndOtherNonGrassGroundSpeciesRichness(data.forbsAndOtherNonGrassGroundSpeciesRichness);
                self.data['numForbSpecies'](orZero(data['numForbSpecies']));
                self.data['numUnknownForbSpecies'](orZero(data['numUnknownForbSpecies']));
                self.data['numForbSpeciesTotal'](orZero(data['numForbSpeciesTotal']));
                self.loadnonNativeSpeciesRichness(data.nonNativeSpeciesRichness);
                self.data['numNonNativeSpecies'](orZero(data['numNonNativeSpecies']));
                self.data['numUnknownNonNativeSpecies'](orZero(data['numUnknownNonNativeSpecies']));
                self.data['numNonNativeSpeciesTotal'](orZero(data['numNonNativeSpeciesTotal']));
                self.data['nonNativePlantCoverPercent'](orZero(data['nonNativePlantCoverPercent']));
                self.data['nonNativePlantCoverScore'](orZero(data['nonNativePlantCoverScore']));
                self.loadcwdLengths(data.cwdLengths);
                self.data['cwdScore'](orZero(data['cwdScore']));
                self.loadgroundCover(data.groundCover);
                self.loadtreeCanopyRecords(data.treeCanopyRecords);
                self.data['percentCoverC'](orZero(data['percentCoverC']));
                self.data['percentCoverS'](orZero(data['percentCoverS']));
                self.data['percentCoverE'](orZero(data['percentCoverE']));
                self.data['coverScoreC'](orZero(data['coverScoreC']));
                self.data['coverScoreS'](orZero(data['coverScoreS']));
                self.data['coverScoreE'](orZero(data['coverScoreE']));
                self.data['treeCanopyCoverScoreAve'](orZero(data['treeCanopyCoverScoreAve']));
                self.loadshrubCanopyRecords(data.shrubCanopyRecords);
                self.data['percentCoverNative'](orZero(data['percentCoverNative']));
                self.data['percentCoverExotic'](orZero(data['percentCoverExotic']));
                self.data['shrubCanopyCoverScoreN'](orZero(data['shrubCanopyCoverScoreN']));
                self.data['patchSize'](data['patchSize']);
                self.data['connectivity'](data['connectivity']);
                self.data['landscapeContext'](data['landscapeContext']);
                self.data['distanceFromWater'](data['distanceFromWater']);
                self.data['fragmentedLandscape'](data['fragmentedLandscape']);
                self.data['patchSizeScore'](orZero(data['patchSizeScore']));
                self.data['connectivityScore'](orZero(data['connectivityScore']));
                self.data['landscapeContextScore'](orZero(data['landscapeContextScore']));
                self.data['distanceFromWaterScore'](orZero(data['distanceFromWaterScore']));
                self.data['siteBcScore'](orZero(data['siteBcScore']));


                    // if there is no data in tables then add an empty row for the user to add data
                    if (typeof self.addRow === 'function' && self.rowCount() === 0) {
                        self.addRow();
                    }
                    self.transients.dummy.notifySubscribers();
                };
            };


            var savedData = activity;
            if (!savedData.outputs) {
                savedData.outputs = [];
            }
            var savedOutput = {};
            if (savedData) {

                $.each(savedData.outputs, function(i, tmpOutput) {
                    if (tmpOutput.name === 'BioCondition Method') {
                        savedOutput = tmpOutput;
                    }
                });
            }

            var config = JSON.parse('\u007b\u007d');
            window[viewModelInstance] = new this[viewModelName](savedOutput, config);
            var output = savedOutput.data ? savedOutput.data : {};

            window[viewModelInstance].loadData(output);
            window[viewModelInstance].dirtyFlag = ko.dirtyFlag(window[viewModelInstance], false);

            ko.applyBindings(window[viewModelInstance], document.getElementById("koBioCondition_Method"));

            // this resets the baseline for detecting changes to the model
            // - shouldn't be required if everything behaves itself but acts as a backup for
            //   any binding side-effects
            // - note that it is not foolproof as applying the bindings happens asynchronously and there
            //   is no easy way to detect its completion
            window[viewModelInstance].dirtyFlag.reset();

            // register with the master controller so this model can participate in the save cycle
            master.register(window[viewModelInstance], window[viewModelInstance].modelForSaving,
            window[viewModelInstance].dirtyFlag.isDirty, window[viewModelInstance].dirtyFlag.reset);
        });

        </script><script type="text/javascript">


    /* Master controller for page. This handles saving each model as required. */
    var Master = function () {
        var self = this;
        this.subscribers = [];
        // client models register their name and methods to participate in saving
        self.register = function (modelInstanceName, getMethod, isDirtyMethod, resetMethod) {
            this.subscribers.push({
                model: modelInstanceName,
                get: getMethod,
                isDirty: isDirtyMethod,
                reset: resetMethod
            });
        };
        // master isDirty flag for the whole page - can control button enabling
        this.isDirty  = function () {
            var dirty = false;
            $.each(this.subscribers, function(i, obj) {
                dirty = dirty || obj.isDirty();
            });
            return dirty;
        };

        this.validate = function() {
            var valid = $('#validation-container').validationEngine('validate');
            if (valid) {
                // Check that forms with multiple optional sections have at least one of those sections completed.
                var optionalCount = 0;
                var notCompletedCount = 0;
                $.each(self.subscribers, function(i, obj) {
                    if (obj.model !== 'activityModel' && obj.model !== 'photoPoints') {
                        if (obj.model.transients.optional) {
                            optionalCount++;
                            if (obj.model.outputNotCompleted()) {
                                notCompletedCount++;
                            }
                        }
                    }
                });
                if (optionalCount > 1 && notCompletedCount == optionalCount) {
                   valid = false;
                   bootbox.alert("<p>To 'Save changes', the mandatory fields of at least one section of this form must be completed.</p>"+
                        "<p>If all sections are 'Not applicable' please contact your grant manager to discuss alternate form options</p>");
                }
            }

            return valid;
        };
        /**
         * Makes an ajax call to save any sections that have been modified. This includes the activity
         * itself and each output.
         *
         * Modified outputs are injected as a list into the activity object. If there is nothing to save
         * in the activity itself, then the root is an object that is empty except for the outputs list.
         *
         * NOTE that the model for each section must register itself to be included in this save.
         *
         * Validates the entire page before saving.
         * @return -1 if the page was not modified, 0 if validation failed, 1 if validation succeeded (or was not requested).
         */
        this.save = function (validate) {
            // Ensure any active change is committed - the knockout binding typically fires on blur.
            $( document.activeElement ).blur();

            if (validate === undefined) {
                validate = true;
            }
            var activityData, outputs = [];

            var success = true;
            if (validate) {
                success = self.validate();
            }
            if (!self.isDirty()) {
                mobileBindings.onSaveActivity(-1, null);
                return -1;
            }
            if (success) {
                $.each(this.subscribers, function(i, obj) {
                    if (obj.model === 'activityModel') {
                        activityData = obj.get();
                    } else {
                        outputs.push(obj.get());
                    }
                });

                if (activityData === undefined) { activityData = {}}
                activityData.outputs = outputs;

                var toSave = JSON.stringify(activityData);
                mobileBindings.onSaveActivity(1, toSave);

            }
            else {
                mobileBindings.onSaveActivity(0, null);
            }
            return success?1:0;
        };

        this.reset = function () {
            $.each(this.subscribers, function(i, obj) {
                if (obj.isDirty()) {
                    obj.reset();
                }
            });
        };

        this.addSite = function(site) {
            var viewModel = ko.dataFor(document.getElementById('site'));
            viewModel.transients.sites.push(site);
            viewModel.siteId(site.siteId);
        }
    };

    if (mobileBindings == undefined) {
        var mobileBindings = {
        
            loadActivity:function(){return "{}"},
        
        
            loadSites:function(){return "[]"},
        
        
            loadThemes:function(){return "[]"},
        

        supportsNewSite:function() { return true; },
        onSaveActivity:function(){},
        createNewSite:function(){}
    };
}
var master = new Master();
var activity = JSON.parse(mobileBindings.loadActivity());
var sites = JSON.parse(mobileBindings.loadSites());
var themes = JSON.parse(mobileBindings.loadThemes());

$(function(){

var scroll = false;

$('#validation-container').validationEngine('attach', {scroll: scroll});

$('.helphover').popover({animation: true, trigger:'hover'});

$('#reset').click(function () {
master.reset();
});

function ViewModel (act, sites, themes) {
var self = this;
var today = new Date().toISOStringNoMillis();

self.activityId = act.activityId;
self.description = ko.observable(act.description);
self.notes = ko.observable(act.notes);
self.startDate = ko.observable(act.startDate || today).extend({simpleDate: false});
self.endDate = ko.observable(act.endDate).extend({simpleDate: false});
self.plannedStartDate = ko.observable(act.plannedStartDate).extend({simpleDate: false});
self.plannedEndDate = ko.observable(act.plannedEndDate).extend({simpleDate: false});
self.eventPurpose = ko.observable(act.eventPurpose);
self.fieldNotes = ko.observable(act.fieldNotes);
self.associatedProgram = ko.observable(act.associatedProgram);
self.associatedSubProgram = ko.observable(act.associatedSubProgram);
self.progress = ko.observable(act.progress);
self.mainTheme = ko.observable(act.mainTheme);
self.type = ko.observable(act.type);
self.siteId = ko.observable(act.siteId);
self.projectId = act.projectId;
self.transients = {};
self.transients.sites = ko.observableArray(sites);
self.transients.photoPoints = ko.computed(function() {
    var site = $.grep(self.transients.sites(), function(site, index) { return site.siteId == self.siteId(); })[0];
     if (site) {
         return site.photoPoints ? site.photoPoints : site.poi;
     }
     return [];
});
self.transients.activityProgressValues = ['planned','started','finished'];
self.transients.themes = themes?themes:[];
self.transients.markedAsFinished = ko.observable(act.progress === 'finished');
self.transients.markedAsFinished.subscribe(function (finished) {
    self.progress(finished ? 'finished' : 'started');
    if (finished || !self.endDate()) {
        self.endDate(today);
    }
});
self.transients.siteImgUrl = ko.computed(function() {
    if (self.siteId()) {
         var site = $.grep(self.transients.sites(), function(site, index) { return site.siteId == self.siteId(); })[0];
         if (site) {
            var lat,lon;
            if (site.centroidLat !== undefined && site.centroidLon !== undefined) {
                lat = site.centroidLat;
                lon = site.centroidLon;
            }
            else if (site.extent && site.extent.geometry && site.extent.geometry.centre) {
                lat = site.extent.geometry.centre[1];
                lon = site.extent.geometry.centre[0];
            }
            if (lat !== undefined && lon !== undefined) {
                $('#siteLocationImage').show();
                return fcConfig.googleStaticUrl+lat+","+lon;
            }
         }
    }
    return "";
});
self.siteLoadError = function(data, event) {
    $('#siteLocationImage').hide();
};

self.transients.newSiteSupported = ko.observable( mobileBindings.supportsNewSite());

self.modelForSaving = function () {
    // get model as a plain javascript object
    var jsData = ko.toJS(self);
    delete jsData.transients;
    return jsData;
};
self.modelAsJSON = function () {
    return JSON.stringify(self.modelForSaving());
};

self.save = function (callback, key) {
};

self.createNewSite = function() {
    mobileBindings.createNewSite();
}

self.notImplemented = function () {
    alert("Not implemented yet.")
};

self.attachPhotoPoint = function(e) {
    console.log(e);
};
self.dirtyFlag = ko.dirtyFlag(self, false);

// make sure progress moves to started if we save any data (unless already finished)
// (do this here so the model becomes dirty)
self.progress(self.transients.markedAsFinished() ? 'finished' : 'started');
}


var viewModel = new ViewModel(activity, sites, themes);

ko.applyBindings(viewModel);

master.register('activityModel', viewModel.modelForSaving, viewModel.dirtyFlag.isDirty, viewModel.dirtyFlag.reset);


});


</script>
</body>
</html>