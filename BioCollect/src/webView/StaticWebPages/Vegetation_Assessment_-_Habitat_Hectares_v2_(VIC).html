

<!DOCTYPE html>
<head>
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    
    <script src="static/t5OGphSUjwdNOoxNKgdRTTh1RBtmzhMXxHDYYeR4lYj.js" type="text/javascript" ></script>
<link href="static/090onaZX1M508oSWqGmMeETZ9NkUA9p4CCTW3MUpRPc.css" type="text/css" rel="stylesheet" media="screen, projection" />

<link href="static/VySgOjkVOsD8Jt8ujXROVRjZeDLAAwVhMF5WqPZ8Ajf.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="http://www.ala.org.au/wp-content/themes/ala2011/images/favicon.ico" rel="shortcut icon" />
<!--[if lt IE 9]><script src="static/Yh1Txee3hFzExJ4P1str7tGV24zQMEYtxqtlYJ5ukR0.js" type="text/javascript" ></script><![endif]-->
<link href="static/Qwaw257M4sHcJuspEDRbeQoTceByqRmOCHNaZWpOxuc.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="static/AcXIjLTuc87n8sfxBjJRQSoBIUwP9RnCyK8Sv82i7eV.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="static/doSKUivnfI9gXmPKZ2XG4W5xIABYgKaf5Dwf3LtjNVr.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="static/fx5pGfEFSRJi6nyez3s8fUsjDL8WJ0IB04Njm7T2VAJ.css" type="text/css" rel="stylesheet" media="all" />
<link href="static/iHX8x0PqEmsjgyBEeq6NRvjAytsYzmt25tsjtHoHXDq.css" type="text/css" rel="stylesheet" media="screen,print" />




<link href="static/KYGDEVRRaKjNbTXJkHmicmzo9vFrnnzCnGLcxKjR04f.css" type="text/css" rel="stylesheet" media="screen,print" />

<link href="static/exPgH85S7hDuxmySlOZhM0sayvRJla83G3HHYJNzaUB.css" type="text/css" rel="stylesheet" media="screen,print" />
<link href="static/tNjfADEdRvZz6orXSyopLhQhlHwq7bH7hcAZQiGZMoc.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="/static/RrjzrZ0Ci0GPLETIr8x8KUMjfJtZKvifrUtMCedwKRB.png" rel="shortcut icon" />
<link href="static/4zsVqykqBON8U5Es5kfffXBSGJlbI8VrPDW4hSn1SWJ.css" type="text/css" rel="stylesheet" media="screen, projection" />


<link href="static/sCFm7bBsIMFGQHTSlBbhMHQCXWhOsbBr5z4bu1OueIE.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="static/tUELnv7Uvq6ppWNUWOlaow3JGSTTIf8hJ2VYvh7Oahj.css" type="text/css" rel="stylesheet" media="screen, projection" />
<link href="/static/OKcRcjAeA1yuXD9r4fZA1Uw2HEwL7gYvjc6HdrZXIYP.png" rel="shortcut icon" />
<link href="/static/UxF0saaqmikaj74l2WFcCyPMm9hEEs8if7IBy0GNAnd.png" rel="shortcut icon" />
<link href="/static/zs4hrJqt7I802RlaZiXbmbDBarpNPZF8V8fCQJ2RVTM.png" rel="shortcut icon" />
<link href="/static/SvC1e8bSiCPFh8mObbEThgbJIaGZi72ATzqobK6QnnB.gif" rel="shortcut icon" />
<link href="/static/BA9MhIHZnH0zMcKJWIWsTurHhQTpDYE6akqM5excaZI.gif" rel="shortcut icon" />

<script type="text/javascript">
    var fcConfig = {
        bieUrl: "#",
        speciesProfileUrl: "https://fieldcapture-test.ala.org.au/proxy/speciesProfile",
        googleStaticUrl:"http://maps.googleapis.com/maps/api/staticmap?maptype=terrian&zoom=12&sensor=false&size=350x250&markers=color:red%7C"
        },
        here = document.location.href;
    </script>
    

    <meta name="layout" content="mobile"/>

    
    
    
</if>

    <style type="text/css">
        input[type=checkbox] {  -webkit-transform: scale(1.5); }
        .checkbox-list label { min-height: 40px; }
        .speciesAutocompleteRow {min-height:40px;}
        .datepicker td, .datepicker th {
            width:40px;
            height:40px;
            vertical-align: middle;
        }
    </style>
</head>

<body>

<div id="content" class="clearfix">
    
<div class="container-fluid validationEngineContainer" id="validation-container">
<div id="koActivityMainBlock">

    <div class="row-fluid">
        <div class="span12">
            <!-- Common activity fields -->

            <div class="row-fluid space-after">
                <div class="span4">

                    <label class="for-readonly">Type</label>
                    <span class="readonly-text" data-bind="text:type"></span>
                </div>
                <div class="span8">

                    <label class="for-readonly">Description</label>
                    <span class="readonly-text" data-bind="text:description"></span>
                </div>
            </div>


            <div class="row-fluid space-after">
                <div class="span4">
                    <label class="for-readonly inline">Planned start date</label>
                    <span class="readonly-text" data-bind="text:plannedStartDate.formattedDate"></span>
                </div>
                <div class="span8">
                    <label class="for-readonly inline">Planned end date</label>
                    <span class="readonly-text" data-bind="text:plannedEndDate.formattedDate"></span>
                </div>
            </div>

            <div class="well">
                <div class="row-fluid">

                    <span class="span8">
                    <div class="row-fluid space-after">

                        <div class="span6 required">
                            <label for="startDate"><b>Actual start date</b>
                                <a href='#' class='helphover' data-original-title='Start date' data-placement='top' data-content='Date the activity was started.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a>
                            </label>


                            <div class="input-append">
                                <input data-bind='datepicker:startDate.date' name='startDate' id='startDate' type='text' size='16' class='input-xlarge' readonly='readonly' targetField='startDate.date' data-validation-engine='validate[required]' />
<span class='add-on open-datepicker'>
  <i class='icon-th'>&nbsp;</i>
</span>
                            </div>

                        </div>
                        <div class="span6" data-bind="css:{required:transients.markedAsFinished}">
                            <label for="endDate"><b>Actual end date</b>
                                <a href='#' class='helphover' data-original-title='End date' data-placement='top' data-content='Date the activity finished.'>
  <i class='icon-question-sign'>&nbsp;</i>
</a>
                            </label>

                            <div class="input-append">
                                <input data-bind='datepicker:endDate.date' name='endDate' id='endDate' type='text' size='16' class='input-xlarge' readonly='readonly' targetField='endDate.date' data-validation-engine='validate[future[startDate]]' />
<span class='add-on open-datepicker'>
  <i class='icon-th'>&nbsp;</i>
</span>
                            </div>

                        </div>
                    </div>
                    <div class="row-fluid space-after">
                        <div class="span6">
                            <label for="theme"><b>Major theme</b></label>
                            <select id="theme" data-bind="value:mainTheme, options:transients.themes, optionsCaption:'Choose..'" class="input-xlarge" style="width:90%">
                            </select>
                        </div>

                        <div class="span6">
                            <label><b>Progress</b></label>
                            <label for="activityComplete"><input type="checkbox" id="activityComplete" data-bind="checked:transients.markedAsFinished" style="margin-right:1em;"><span>This activity is complete</span></label>

                        </div>

                    </div>
                    <div class="row-fluid">
                        <div class="span6">
                            <label for="site"><b>Site</b></label>
                            <select id='site' style='width:90%' data-bind='options:transients.sites,optionsText:"name",optionsValue:"siteId",value:siteId,optionsCaption:"Choose a site..."'>&nbsp;</select>

                        </div>

                        <div class="span3">

                            <button class="btn btn-info" style="margin-top:25px;" data-bind="visible:transients.newSiteSupported,click:createNewSite">Create new Site</button>
                        </div>
                    </div>

                    
                        
                            
                                
                            
                            
                                
                                    
                                    
                                    
                                    

                                
                            
                        

                    
                    </span>
                    <span class="span4">

                        <img id="siteLocationImage" width="100%" data-bind="event:{error:siteLoadError}, attr:{src:transients.siteImgUrl}, visible:transients.siteImgUrl()"/>


                    </span>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- ko stopBinding: true -->

    
    
    
    
    <div class="output-block" id="koVegetation_Assessment_-_Survey_Information">
            <h3 data-bind="css:{modified:dirtyFlag.isDirty},attr:{title:'Has been modified'}">Vegetation Assessment - Survey Information</h3>
        <div data-bind="if:transients.optional">
            <label class="checkbox" ><input type="checkbox" data-bind="checked:outputNotCompleted"> <span data-bind="text:transients.questionText"></span> </label>
        </div>
        <div id="Vegetation_Assessment_-_Survey_Information-content" data-bind="visible:!outputNotCompleted()">
        <!-- add the dynamic components -->
            <div class="row-fluid space-after output-section" >
<div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Assessor:</label></span><input  class="span8 input-small" data-bind='value:data.assessor'  type='text' class='input-small'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Property:</label></span><input  class="span8 input-small" data-bind='value:data.property'  type='text' class='input-small'/></span></div></div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Habitat zone Id:</label></span><input  class="span8 input-small" data-bind='value:data.habitatZone'  type='text' class='input-small'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Habitat zone area (Ha):</label></span><input class="input-small" style="text-align:center" data-bind='value:data.zoneAreaHa' data-validation-engine='validate[custom[number],min[0]]' type='number' class='input-mini'/></span></div></div><div class="span4">
<div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>Plot No.:</label></span><input  class="span8 input-small" data-bind='value:data.plotId'  type='text' class='input-small'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>GPS ref. (NW 20m Plot):</label></span><input class="input-small" style="text-align:center" data-bind='value:data.gps20mPlot' data-validation-engine='validate[custom[number],min[0]]' type='number' class='input-mini'/></span></div><div class="row-fluid"><span class="span12">    <span  class="span4 preLabel"><label>GPS ref. (NW 40m Plot):</label></span><input class="input-small" style="text-align:center" data-bind='value:data.gps40mPlot' data-validation-engine='validate[custom[number],min[0]]' type='number' class='input-mini'/></span></div></div></div>

        </div>
        
    </div>
    

    
    
    
    <style type="text/css">
        table.nativeLifeFormsCover th {white-space:normal;}
        table.nativeLifeFormsCover tbody td:nth-child(1) {width:10%;}
        table.nativeLifeFormsCover tbody td:nth-child(1)
        table.nativeLifeFormsCover tbody td:nth-child(2) {width:4%;text-align:center;}
        table.nativeLifeFormsCover tbody td:nth-child(2)
        table.nativeLifeFormsCover tbody td:nth-child(3) {width:4%;text-align:center;}
        table.nativeLifeFormsCover tbody td:nth-child(3)
        table.nativeLifeFormsCover tbody td:nth-child(4) {width:4%;text-align:center;}
        table.nativeLifeFormsCover tbody td:nth-child(4)
        table.nativeLifeFormsCover tbody td:nth-child(5) {width:4%;text-align:center;}
        table.nativeLifeFormsCover tbody td:nth-child(5)
        table.nativeLifeFormsCover tbody td:nth-child(6) {width:4%;text-align:center;}
        table.nativeLifeFormsCover tbody td:nth-child(6)
        table.nativeLifeFormsCover tbody td:nth-child(7) {width:4%;text-align:center;}
        table.nativeLifeFormsCover tbody td:nth-child(7)
        table.nativeLifeFormsCover tbody td:nth-child(8) {width:4%;text-align:center;}
        table.nativeLifeFormsCover tbody td:nth-child(8)
        table.nativeLifeFormsCover tbody td:nth-child(9) {width:4%;text-align:center;}
        table.nativeLifeFormsCover tbody td:nth-child(9)
        table.nativeLifeFormsCover tbody td:nth-child(10) {width:4%;text-align:center;}
        table.nativeLifeFormsCover tbody td:nth-child(10)
        table.nativeLifeFormsCover tbody td:nth-child(11) {width:4%;text-align:center;}
        table.nativeLifeFormsCover tbody td:nth-child(11)
        table.nativeLifeFormsCover tbody td:nth-child(12) {width:4%;text-align:center;}
        table.nativeLifeFormsCover tbody td:nth-child(12)
        table.nativeLifeFormsCover tbody td:nth-child(13) {width:4%;text-align:center;}
        table.nativeLifeFormsCover tbody td:nth-child(13)
        table.nativeLifeFormsCover tbody td:nth-child(14) {width:4%;text-align:center;}
        table.nativeLifeFormsCover tbody td:nth-child(14)
        table.nativeLifeFormsCover tbody td:nth-child(15) {width:4%;text-align:center;}
        table.nativeLifeFormsCover tbody td:nth-child(15)
        table.nativeLifeFormsCover tbody td:nth-child(16) {width:4%;text-align:center;}
        table.nativeLifeFormsCover tbody td:nth-child(16)
        table.nativeLifeFormsCover tbody td:nth-child(17) {width:4%;text-align:center;}
        table.nativeLifeFormsCover tbody td:nth-child(17)
        table.nativeLifeFormsCover tbody td:nth-child(18) {width:4%;text-align:center;}
        table.nativeLifeFormsCover tbody td:nth-child(18)
        table.nativeLifeFormsCover tbody td:nth-child(19) {width:4%;text-align:center;}
        table.nativeLifeFormsCover tbody td:nth-child(19)
        table.nativeLifeFormsCover tbody td:nth-child(20) {width:4%;text-align:center;}
        table.nativeLifeFormsCover tbody td:nth-child(20)
        table.nativeLifeFormsCover tbody td:nth-child(21) {width:4%;text-align:center;}
        table.nativeLifeFormsCover tbody td:nth-child(21)
        table.nativeLifeFormsCover tbody td:nth-child(22) {width:4%;text-align:center;}
        table.nativeLifeFormsCover tbody td:nth-child(22)
        table.nativeLifeFormsCover td:last-child {width:4%;text-align:center;}
        table.nativeLifeFormsCover textarea {width:100%; box-sizing:border-box; }
        table.nativeLifeFormsCover select {width:100%; box-sizing:border-box; }
    </style><style type="text/css">
        table.nativeSpeciesStructure th {white-space:normal;}
        table.nativeSpeciesStructure tbody td:nth-child(1) {width:10%;}
        table.nativeSpeciesStructure tbody td:nth-child(1)
        table.nativeSpeciesStructure tbody td:nth-child(2) {width:4%;text-align:center;}
        table.nativeSpeciesStructure tbody td:nth-child(2)
        table.nativeSpeciesStructure tbody td:nth-child(3) {width:4%;text-align:center;}
        table.nativeSpeciesStructure tbody td:nth-child(3)
        table.nativeSpeciesStructure tbody td:nth-child(4) {width:4%;text-align:center;}
        table.nativeSpeciesStructure tbody td:nth-child(4)
        table.nativeSpeciesStructure tbody td:nth-child(5) {width:4%;text-align:center;}
        table.nativeSpeciesStructure tbody td:nth-child(5)
        table.nativeSpeciesStructure tbody td:nth-child(6) {width:4%;text-align:center;}
        table.nativeSpeciesStructure tbody td:nth-child(6)
        table.nativeSpeciesStructure tbody td:nth-child(7) {width:4%;text-align:center;}
        table.nativeSpeciesStructure tbody td:nth-child(7)
        table.nativeSpeciesStructure tbody td:nth-child(8) {width:4%;text-align:center;}
        table.nativeSpeciesStructure tbody td:nth-child(8)
        table.nativeSpeciesStructure tbody td:nth-child(9) {width:4%;text-align:center;}
        table.nativeSpeciesStructure tbody td:nth-child(9)
        table.nativeSpeciesStructure tbody td:nth-child(10) {width:4%;text-align:center;}
        table.nativeSpeciesStructure tbody td:nth-child(10)
        table.nativeSpeciesStructure tbody td:nth-child(11) {width:4%;text-align:center;}
        table.nativeSpeciesStructure tbody td:nth-child(11)
        table.nativeSpeciesStructure tbody td:nth-child(12) {width:4%;text-align:center;}
        table.nativeSpeciesStructure tbody td:nth-child(12)
        table.nativeSpeciesStructure tbody td:nth-child(13) {width:4%;text-align:center;}
        table.nativeSpeciesStructure tbody td:nth-child(13)
        table.nativeSpeciesStructure tbody td:nth-child(14) {width:4%;text-align:center;}
        table.nativeSpeciesStructure tbody td:nth-child(14)
        table.nativeSpeciesStructure tbody td:nth-child(15) {width:4%;text-align:center;}
        table.nativeSpeciesStructure tbody td:nth-child(15)
        table.nativeSpeciesStructure tbody td:nth-child(16) {width:4%;text-align:center;}
        table.nativeSpeciesStructure tbody td:nth-child(16)
        table.nativeSpeciesStructure tbody td:nth-child(17) {width:4%;text-align:center;}
        table.nativeSpeciesStructure tbody td:nth-child(17)
        table.nativeSpeciesStructure tbody td:nth-child(18) {width:4%;text-align:center;}
        table.nativeSpeciesStructure tbody td:nth-child(18)
        table.nativeSpeciesStructure tbody td:nth-child(19) {width:4%;text-align:center;}
        table.nativeSpeciesStructure tbody td:nth-child(19)
        table.nativeSpeciesStructure tbody td:nth-child(20) {width:4%;text-align:center;}
        table.nativeSpeciesStructure tbody td:nth-child(20)
        table.nativeSpeciesStructure td:last-child {width:4%;text-align:center;}
        table.nativeSpeciesStructure textarea {width:100%; box-sizing:border-box; }
        table.nativeSpeciesStructure select {width:100%; box-sizing:border-box; }
    </style>
    <div class="output-block" id="koNative_Species">
            <h3 data-bind="css:{modified:dirtyFlag.isDirty},attr:{title:'Has been modified'}">Native Species</h3>
        <div data-bind="if:transients.optional">
            <label class="checkbox" ><input type="checkbox" data-bind="checked:outputNotCompleted"> <span data-bind="text:transients.questionText"></span> </label>
        </div>
        <div id="Native_Species-content" data-bind="visible:!outputNotCompleted()">
        <!-- add the dynamic components -->
            <div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>Life Forms</h4></span></span></div>
<div class="row-fluid ">
            <table class="table table-bordered nativeLifeFormsCover " >
                <thead><tr><th>% Cover estimate by Life Form</th><th>ET<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='ET - Eucalypt tree (Eucalypts and allied genera &gt; 5m tall (not Mallee Trees))'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>T<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='T - Non-eucalypt tree (Woody plants greater than 5 m tall (not eucalypts), that may be canopy or understorey trees.)'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>MT<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='MT - Mallee tree (Eucalypts with multiple stems arising from a lignotuber.)'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>S<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='S - Shrub (Upright woody plants up to 5m tall (includes immature eucalypts).)'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>PS<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='PS - Prostrate shrub (Prostrate woody species (stems grow horizontally), usually less than 40 cm in height.)'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>F<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='F - Forb (Non-woody dicot plants (generally not with grass-like leaves), excludes carpet-forming or prostrate forbs.)'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>CPF<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='CPF - Carpet-forming or prostrate forb (Non-woody dicot plants (generally non grass-like leaves) that are prostrate or carpet-forming forbs. Many species are ephemeral.)'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>TG<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='TG - Tussock grass (Grasses that form discrete tussocks.)'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>NTG<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='NTG - Non-tussock grass (Grasses that scramble, climb, spread in mats or hummocks by rhizomes or stolons.)'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>PNM<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='PNM - Perennial non-grass monocot (Monocot plants with perennial foliage that are not grasses. Leaves are usually coarse-textured, narrow and strap-like. Includes many sedges, rushes, large lilies and large monocots that have woody bases or trunks such as grass trees and palms.)'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>EGM<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='EGM - Ephemeral or geophyte monocot (Monocot plants with narrow, strap-like leaves that appear seasonally. Includes annual species and plants which emerge annually from underground e.g. many terrestrial orchids and lilies.)'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>GF<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='GF - Ground fern (Ferns without a trunk, growing on the ground.)'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>TF<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='TF - Tree fern (Ferns with a trunk.)'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>EP<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='EP - Epiphyte (Non-parasitic plants that grow entirely upon other plants (root system not in the soil or water). Includes numerous ferns. Excludes Aerial Parasites.)                    '>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>CV<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='CV - Canopy  (Woody vines or lianas that ascend to the tree canopy.)'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>SC<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='SC - Small climber (Small climbing or twining plants which generally use other understorey species for support.)'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>AP<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='AP - Aerial parasite (Parasitic plants that grow from the trunk, branches or foliage of other plants, with no root system in the soil or water.)                    '>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>L<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='L - Lichen (Organisms composed of fungus and green or blue-green algae. Includes crustose (crust-forming) and foliose (leaf-like) lichens. May grow on the ground, rocks, logs or tree trunks.)                    '>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>B<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='B - Bryophyte (Small non-flowering, non- vascular green plants (Includes mosses, liverworts and hornworts). May grow on the ground, rocks, logs or tree trunks.)                    '>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>Log<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='Log - Log (Dead trunks or branches at least 10cm in diameter either detached from living plants and lying on the ground or dead stumps &lt;1.3m)'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th>R<a href='#' class='helphover' data-original-title='' data-placement='top' data-content='R - Rock (Exposed bare rock of at least 10 cm x 10 cm (not covered in living organisms). Smaller stones are treated as bare ground.)'>
  <i class='icon-question-sign'>&nbsp;</i>
</a></th><th></th>
                </tr></thead>
                <tbody data-bind="template:{name:'nativeLifeFormsCoverviewTmpl', foreach: data.nativeLifeFormsCover}"></tbody>
                <script id="nativeLifeFormsCoverviewTmpl" type="text/html"><tr>
                    <td><span >null</span></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormET' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormT' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormMT' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormS' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormPS' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormF' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormCPF' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormTG' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormNTG' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormPNM' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormEGM' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormGF' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormTF' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormEP' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormCV' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormSC' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormAP' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormL' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormB' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormLog' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormR' data-validation-engine='validate[min[0],max[100],custom[number]]' type='number' class='input-mini'/></td>
                    <td><i data-bind='click:$root.removenativeLifeFormsCoverRow' class='icon-remove'></i></td>
                </tr></script>
                <tfoot>
                </tfoot>
            </table>
        </div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>Species List</h4></span></span></div>
<div class="row-fluid ">
            <table class="table table-bordered nativeSpeciesStructure " >
                <thead><tr><th>Species name</th><th>ET</th><th>T</th><th>MT</th><th>S</th><th>PS</th><th>F</th><th>CPF</th><th>TG</th><th>NTG</th><th>PNM</th><th>EGM</th><th>GF</th><th>TF</th><th>EP</th><th>CV</th><th>SC</th><th>AP</th><th>L</th><th>B</th><th></th>
                </tr></thead>
                <tbody data-bind="template:{name:'nativeSpeciesStructureviewTmpl', foreach: data.nativeSpeciesStructure}"></tbody>
                <script id="nativeSpeciesStructureviewTmpl" type="text/html"><tr>
                    <td>
<span class="input-prepend input-append" data-bind="with:species">
    <span class="add-on" data-bind="visible:!transients.editing(), css:{'btn-success':name()}"><i class="icon-white" data-bind="css:{'icon-ok':listId()!='unmatched' && name(), 'icon-question-sign':listId()=='unmatched' || listId() == 'error-unmatched'}"></i></span><span class="add-on" data-bind="visible:transients.editing()"><img src="static/Xo2jbaJ5EFqa59u9g4c4ybpCpw3wFWKhQdzZwNmmktO.gif" alt="saving icon" /></span><input type="text" data-bind="value:transients.textFieldValue,event:{focusout:focusLost},autocomplete:{url:'https://fieldcapture-test.ala.org.au/search/species', render: renderItem, listId: list, result:speciesSelected, valueChangeCallback:textFieldChanged}" />
    <span class="add-on" data-bind="visible: !transients.editing() && name()">
        <a href="#" data-bind="popover: {title: name, content: transients.speciesInformation}"><i class="icon-info-sign"></i></a>
    </span>
</span>
</td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormSpET' data-validation-engine='validate[min[0],max[1],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormSpT' data-validation-engine='validate[min[0],max[1],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormSpMT' data-validation-engine='validate[min[0],max[1],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormSpS' data-validation-engine='validate[min[0],max[1],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormSpPS' data-validation-engine='validate[min[0],max[1],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormSpF' data-validation-engine='validate[min[0],max[1],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormSpCPF' data-validation-engine='validate[min[0],max[1],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormSpTG' data-validation-engine='validate[min[0],max[1],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormSpNTG' data-validation-engine='validate[min[0],max[1],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormSpPNM' data-validation-engine='validate[min[0],max[1],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormSpEGM' data-validation-engine='validate[min[0],max[1],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormSpGF' data-validation-engine='validate[min[0],max[1],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormSpTF' data-validation-engine='validate[min[0],max[1],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormSpEP' data-validation-engine='validate[min[0],max[1],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormSpCV' data-validation-engine='validate[min[0],max[1],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormSpSC' data-validation-engine='validate[min[0],max[1],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormSpAP' data-validation-engine='validate[min[0],max[1],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormSpL' data-validation-engine='validate[min[0],max[1],custom[number]]' type='number' class='input-mini'/></td>
                    <td><input class="input-mini" style="text-align:center" data-bind='value:lifeFormSpB' data-validation-engine='validate[min[0],max[1],custom[number]]' type='number' class='input-mini'/></td>
                    <td><i data-bind='click:$root.removenativeSpeciesStructureRow' class='icon-remove'></i></td>
                </tr></script>
                <tfoot>
                <tr>
                    <td><span ></span></td>
                    <td><span  data-bind='text:data.speciesCount'></span></td>
                    <td><span  class="value" data-bind='text:data.speciesCountET'></span></td>
                    <td><span  class="value" data-bind='text:data.speciesCountT'></span></td>
                    <td><span  class="value" data-bind='text:data.speciesCountMT'></span></td>
                    <td><span  class="value" data-bind='text:data.speciesCountS'></span></td>
                    <td><span  class="value" data-bind='text:data.speciesCountPS'></span></td>
                    <td><span  class="value" data-bind='text:data.speciesCountF'></span></td>
                    <td><span  class="value" data-bind='text:data.speciesCountCPF'></span></td>
                    <td><span  class="value" data-bind='text:data.speciesCountTG'></span></td>
                    <td><span  class="value" data-bind='text:data.speciesCountNTG'></span></td>
                    <td><span  class="value" data-bind='text:data.speciesCountPNM'></span></td>
                    <td><span  class="value" data-bind='text:data.speciesCountEGM'></span></td>
                    <td><span  class="value" data-bind='text:data.speciesCountGF'></span></td>
                    <td><span  class="value" data-bind='text:data.speciesCountTG'></span></td>
                    <td><span  class="value" data-bind='text:data.speciesCountEP'></span></td>
                    <td><span  class="value" data-bind='text:data.speciesCountCV'></span></td>
                    <td><span  class="value" data-bind='text:data.speciesCountSC'></span></td>
                    <td><span  class="value" data-bind='text:data.speciesCountAP'></span></td>
                    <td><span  class="value" data-bind='text:data.speciesCountL'></span></td>
                    <td><span  class="value" data-bind='text:data.speciesCountB'></span></td>
                    <td></td>
                </tr>
                <tr><td colspan="21" style="text-align:left;">
                        <button type="button" class="btn btn-small" data-bind="click:addnativeSpeciesStructureRow">
                        <i class="icon-plus"></i> Add a row</button></td></tr> <script id="nativeSpeciesStructuretemplate-upload" type="text/x-tmpl">{% %}</script>
                       <script id="nativeSpeciesStructuretemplate-download" type="text/x-tmpl">{% %}</script>                </tfoot>
            </table>
        </div>

        </div>
        
    </div>
    

    
    
    
    <style type="text/css">
        table.perennialWeedLifeForms th {white-space:normal;}
        table.perennialWeedLifeForms tbody td:nth-child(1) {width:30%;}
        table.perennialWeedLifeForms tbody td:nth-child(1)
        table.perennialWeedLifeForms td:last-child {width:4%;text-align:center;}
        table.perennialWeedLifeForms textarea {width:100%; box-sizing:border-box; }
        table.perennialWeedLifeForms select {width:100%; box-sizing:border-box; }
    </style><style type="text/css">
        table.perennialWeedSpecies th {white-space:normal;}
        table.perennialWeedSpecies tbody td:nth-child(1) {width:35%;}
        table.perennialWeedSpecies tbody td:nth-child(1)
        table.perennialWeedSpecies td:last-child {width:4%;text-align:center;}
        table.perennialWeedSpecies textarea {width:100%; box-sizing:border-box; }
        table.perennialWeedSpecies select {width:100%; box-sizing:border-box; }
    </style><style type="text/css">
        table.annualWeedLifeForms th {white-space:normal;}
        table.annualWeedLifeForms tbody td:nth-child(1) {width:30%;}
        table.annualWeedLifeForms tbody td:nth-child(1)
        table.annualWeedLifeForms td:last-child {width:4%;text-align:center;}
        table.annualWeedLifeForms textarea {width:100%; box-sizing:border-box; }
        table.annualWeedLifeForms select {width:100%; box-sizing:border-box; }
    </style><style type="text/css">
        table.annualWeedSpecies th {white-space:normal;}
        table.annualWeedSpecies tbody td:nth-child(1) {width:35%;}
        table.annualWeedSpecies tbody td:nth-child(1)
        table.annualWeedSpecies td:last-child {width:4%;text-align:center;}
        table.annualWeedSpecies textarea {width:100%; box-sizing:border-box; }
        table.annualWeedSpecies select {width:100%; box-sizing:border-box; }
    </style>
    <div class="output-block" id="koWeed_Species">
            <h3 data-bind="css:{modified:dirtyFlag.isDirty},attr:{title:'Has been modified'}">Weed Species</h3>
        <div data-bind="if:transients.optional">
            <label class="checkbox" ><input type="checkbox" data-bind="checked:outputNotCompleted"> <span data-bind="text:transients.questionText"></span> </label>
        </div>
        <div id="Weed_Species-content" data-bind="visible:!outputNotCompleted()">
        <!-- add the dynamic components -->
            <div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>Perennial Weeds</h4> (Estimate weed life form cover within the plot only)</span></span></div>
<div class="row-fluid">
            <table class="table table-bordered perennialWeedLifeForms">
                <thead><tr><th><b>Perennial Weeds</b> <i>(estimate weed life form cover within the plot only)</i></th><th>Woody weeds</th><th>Grassy herbaceous weeds</th><th>Bryophytes and lichens</th>
                </tr></thead>
                <tbody>
                    <tr><td class="shaded">GS largest weed life form cover estimates</td>
                    <td><span data-bind='ticks:data.perennialWeedLifeForms.get(0,0)'></span></td>
                    <td><span data-bind='ticks:data.perennialWeedLifeForms.get(0,1)'></span></td>
                    <td><span data-bind='ticks:data.perennialWeedLifeForms.get(0,2)'></span></td>
                    </tr>
                    <tr><td class="shaded">Non-GS largest weed life form cover estimates</td>
                    <td><span data-bind='ticks:data.perennialWeedLifeForms.get(1,0)'></span></td>
                    <td><span data-bind='ticks:data.perennialWeedLifeForms.get(1,1)'></span></td>
                    <td><span data-bind='ticks:data.perennialWeedLifeForms.get(1,2)'></span></td>
                    </tr>
                </tr></tbody>
                <tfoot>
                </tfoot>
            </table>
        </div>
<div class="row-fluid ">
            <table class="table table-bordered perennialWeedSpecies " >
                <thead><tr><th>Species List:</th><th>Comments</th><th></th>
                </tr></thead>
                <tbody data-bind="template:{name:'perennialWeedSpeciesviewTmpl', foreach: data.perennialWeedSpecies}"></tbody>
                <script id="perennialWeedSpeciesviewTmpl" type="text/html"><tr>
                    <td>
<span class="input-prepend input-append" data-bind="with:perennialWeedSpeciesName">
    <span class="add-on" data-bind="visible:!transients.editing(), css:{'btn-success':name()}"><i class="icon-white" data-bind="css:{'icon-ok':listId()!='unmatched' && name(), 'icon-question-sign':listId()=='unmatched' || listId() == 'error-unmatched'}"></i></span><span class="add-on" data-bind="visible:transients.editing()"><img src="static/Xo2jbaJ5EFqa59u9g4c4ybpCpw3wFWKhQdzZwNmmktO.gif" alt="saving icon" /></span><input type="text" data-bind="value:transients.textFieldValue,event:{focusout:focusLost},autocomplete:{url:'https://fieldcapture-test.ala.org.au/search/species', render: renderItem, listId: list, result:speciesSelected, valueChangeCallback:textFieldChanged}" />
    <span class="add-on" data-bind="visible: !transients.editing() && name()">
        <a href="#" data-bind="popover: {title: name, content: transients.speciesInformation}"><i class="icon-info-sign"></i></a>
    </span>
</span>
</td>
                    <td><textarea  data-bind='value:perennialWeedSpeciesComments'></textarea></td>
                    <td><i data-bind='click:$root.removeperennialWeedSpeciesRow' class='icon-remove'></i></td>
                </tr></script>
                <tfoot>
                <tr><td colspan="3" style="text-align:left;">
                        <button type="button" class="btn btn-small" data-bind="click:addperennialWeedSpeciesRow">
                        <i class="icon-plus"></i> Add a row</button></td></tr> <script id="perennialWeedSpeciestemplate-upload" type="text/x-tmpl">{% %}</script>
                       <script id="perennialWeedSpeciestemplate-download" type="text/x-tmpl">{% %}</script>                </tfoot>
            </table>
        </div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>Annual Weeds</h4> (Estimate weed life form cover within the plot only)</span></span></div>
<div class="row-fluid">
            <table class="table table-bordered annualWeedLifeForms">
                <thead><tr><th><b>Annual Weeds</b> <i>(estimate weed life form cover within the plot only)</i></th><th>Grassy herbaceous weeds</th><th>Bryophytes and lichens</th>
                </tr></thead>
                <tbody>
                    <tr><td class="shaded">GS largest weed life form cover estimates</td>
                    <td><span data-bind='ticks:data.annualWeedLifeForms.get(0,0)'></span></td>
                    <td><span data-bind='ticks:data.annualWeedLifeForms.get(0,1)'></span></td>
                    </tr>
                    <tr><td class="shaded">Non-GS largest weed life form cover estimates</td>
                    <td><span data-bind='ticks:data.annualWeedLifeForms.get(1,0)'></span></td>
                    <td><span data-bind='ticks:data.annualWeedLifeForms.get(1,1)'></span></td>
                    </tr>
                </tr></tbody>
                <tfoot>
                </tfoot>
            </table>
        </div>
<div class="row-fluid ">
            <table class="table table-bordered annualWeedSpecies " >
                <thead><tr><th>Species List:</th><th>Comments</th><th></th>
                </tr></thead>
                <tbody data-bind="template:{name:'annualWeedSpeciesviewTmpl', foreach: data.annualWeedSpecies}"></tbody>
                <script id="annualWeedSpeciesviewTmpl" type="text/html"><tr>
                    <td>
<span class="input-prepend input-append" data-bind="with:annualWeedSpeciesName">
    <span class="add-on" data-bind="visible:!transients.editing(), css:{'btn-success':name()}"><i class="icon-white" data-bind="css:{'icon-ok':listId()!='unmatched' && name(), 'icon-question-sign':listId()=='unmatched' || listId() == 'error-unmatched'}"></i></span><span class="add-on" data-bind="visible:transients.editing()"><img src="static/Xo2jbaJ5EFqa59u9g4c4ybpCpw3wFWKhQdzZwNmmktO.gif" alt="saving icon" /></span><input type="text" data-bind="value:transients.textFieldValue,event:{focusout:focusLost},autocomplete:{url:'https://fieldcapture-test.ala.org.au/search/species', render: renderItem, listId: list, result:speciesSelected, valueChangeCallback:textFieldChanged}" />
    <span class="add-on" data-bind="visible: !transients.editing() && name()">
        <a href="#" data-bind="popover: {title: name, content: transients.speciesInformation}"><i class="icon-info-sign"></i></a>
    </span>
</span>
</td>
                    <td><textarea  data-bind='value:annualWeedSpeciesComments'></textarea></td>
                    <td><i data-bind='click:$root.removeannualWeedSpeciesRow' class='icon-remove'></i></td>
                </tr></script>
                <tfoot>
                <tr><td colspan="3" style="text-align:left;">
                        <button type="button" class="btn btn-small" data-bind="click:addannualWeedSpeciesRow">
                        <i class="icon-plus"></i> Add a row</button></td></tr> <script id="annualWeedSpeciestemplate-upload" type="text/x-tmpl">{% %}</script>
                       <script id="annualWeedSpeciestemplate-download" type="text/x-tmpl">{% %}</script>                </tfoot>
            </table>
        </div>

        </div>
        
    </div>
    

    
    
    
    <style type="text/css">
        table.largestTrees th {white-space:normal;}
        table.largestTrees tbody td:nth-child(2) {text-align:center;}
        table.largestTrees tbody td:nth-child(3) {text-align:center;}
        table.largestTrees tbody td:nth-child(4) {text-align:center;}
        table.largestTrees tbody td:nth-child(5) {text-align:center;}
        table.largestTrees tbody td:nth-child(6) {text-align:center;}
        table.largestTrees tbody td:nth-child(7) {text-align:center;}
        table.largestTrees tbody td:nth-child(8) {text-align:center;}
        table.largestTrees tbody td:nth-child(9) {text-align:center;}
        table.largestTrees tbody td:nth-child(10) {text-align:center;}
        table.largestTrees tbody td:nth-child(11) {text-align:center;}
        table.largestTrees td:last-child {width:4%;text-align:center;}
        table.largestTrees textarea {width:100%; box-sizing:border-box; }
        table.largestTrees select {width:100%; box-sizing:border-box; }
    </style><style type="text/css">
        table.otherTrees th {white-space:normal;}
        table.otherTrees tbody td:nth-child(1) {width:10%;}
        table.otherTrees tbody td:nth-child(1)
        table.otherTrees td:last-child {width:4%;text-align:center;}
        table.otherTrees textarea {width:100%; box-sizing:border-box; }
        table.otherTrees select {width:100%; box-sizing:border-box; }
    </style>
    <div class="output-block" id="koTrees">
            <h3 data-bind="css:{modified:dirtyFlag.isDirty},attr:{title:'Has been modified'}">Trees</h3>
        <div data-bind="if:transients.optional">
            <label class="checkbox" ><input type="checkbox" data-bind="checked:outputNotCompleted"> <span data-bind="text:transients.questionText"></span> </label>
        </div>
        <div id="Trees-content" data-bind="visible:!outputNotCompleted()">
        <!-- add the dynamic components -->
            <div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>Largest Trees</h4> (DBH in centimetres)</span></span></div>
<div class="row-fluid ">
            <table class="table table-bordered largestTrees " >
                <thead><tr><th class="required">Relevant tree sample plot size:</th><th>Tree 1</th><th>Tree 2</th><th>Tree 3</th><th>Tree 4</th><th>Tree 5</th><th>Tree 6</th><th>Tree 7</th><th>Tree 8</th><th>Tree 9</th><th>Tree 10</th><th></th>
                </tr></thead>
                <tbody data-bind="template:{name:'largestTreesviewTmpl', foreach: data.largestTrees}"></tbody>
                <script id="largestTreesviewTmpl" type="text/html"><tr>
                    <td><select data-bind='value:largeTreePlotSize,options:transients.largeTreePlotSizeConstraints,optionsCaption:"Please select"' data-validation-engine='validate[required]'></select></td>
                    <td><input class="input-small" style="text-align:center" data-bind='value:largeTree1' data-validation-engine='validate[custom[number],min[0]]' type='number' class='input-mini'/></td>
                    <td><input class="input-small" style="text-align:center" data-bind='value:largeTree2' data-validation-engine='validate[custom[number],min[0]]' type='number' class='input-mini'/></td>
                    <td><input class="input-small" style="text-align:center" data-bind='value:largeTree3' data-validation-engine='validate[custom[number],min[0]]' type='number' class='input-mini'/></td>
                    <td><input class="input-small" style="text-align:center" data-bind='value:largeTree4' data-validation-engine='validate[custom[number],min[0]]' type='number' class='input-mini'/></td>
                    <td><input class="input-small" style="text-align:center" data-bind='value:largeTree5' data-validation-engine='validate[custom[number],min[0]]' type='number' class='input-mini'/></td>
                    <td><input class="input-small" style="text-align:center" data-bind='value:largeTree6' data-validation-engine='validate[custom[number],min[0]]' type='number' class='input-mini'/></td>
                    <td><input class="input-small" style="text-align:center" data-bind='value:largeTree7' data-validation-engine='validate[custom[number],min[0]]' type='number' class='input-mini'/></td>
                    <td><input class="input-small" style="text-align:center" data-bind='value:largeTree8' data-validation-engine='validate[custom[number],min[0]]' type='number' class='input-mini'/></td>
                    <td><input class="input-small" style="text-align:center" data-bind='value:largeTree9' data-validation-engine='validate[custom[number],min[0]]' type='number' class='input-mini'/></td>
                    <td><input class="input-small" style="text-align:center" data-bind='value:largeTree10' data-validation-engine='validate[custom[number],min[0]]' type='number' class='input-mini'/></td>
                    <td><i data-bind='click:$root.removelargestTreesRow' class='icon-remove'></i></td>
                </tr></script>
                <tfoot>
                </tfoot>
            </table>
        </div>
<div class="row-fluid space-after " >
<span class="span12">    <span  class="span12"><h4>Other Trees</h4> <i>(All other trees in plot > 10cm - does not include the 10 largest trees previously recorded)</i></span></span></div>
<div class="row-fluid">
            <table class="table table-bordered otherTrees">
                <thead><tr><th>DBH class (cm)</th><th>10 < 20</th><th>20 < 30</th><th>30 < 40</th><th>40 < 50</th><th>50 < 60</th><th>60 < 70</th><th>70 < 80</th><th>80 < 90</th><th>90 < 100</th><th>100 < 120</th><th>120 < 140</th><th>>= 140</th>
                </tr></thead>
                <tbody>
                    <tr><td class="shaded">Tree tally</td>
                    <td><span data-bind='ticks:data.otherTrees.get(0,0)'></span></td>
                    <td><span data-bind='ticks:data.otherTrees.get(0,1)'></span></td>
                    <td><span data-bind='ticks:data.otherTrees.get(0,2)'></span></td>
                    <td><span data-bind='ticks:data.otherTrees.get(0,3)'></span></td>
                    <td><span data-bind='ticks:data.otherTrees.get(0,4)'></span></td>
                    <td><span data-bind='ticks:data.otherTrees.get(0,5)'></span></td>
                    <td><span data-bind='ticks:data.otherTrees.get(0,6)'></span></td>
                    <td><span data-bind='ticks:data.otherTrees.get(0,7)'></span></td>
                    <td><span data-bind='ticks:data.otherTrees.get(0,8)'></span></td>
                    <td><span data-bind='ticks:data.otherTrees.get(0,9)'></span></td>
                    <td><span data-bind='ticks:data.otherTrees.get(0,10)'></span></td>
                    <td><span data-bind='ticks:data.otherTrees.get(0,11)'></span></td>
                    </tr>
                </tr></tbody>
                <tfoot>
                <tr>
                    <td><span >No. of Trees</span></td>
                    <td><span  data-bind='text:data.totalDbh10to20'></span></td>
                    <td><span  data-bind='text:data.totalDbh20to30'></span></td>
                    <td><span  data-bind='text:data.totalDbh30to40'></span></td>
                    <td><span  data-bind='text:data.totalDbh40to50'></span></td>
                    <td><span  data-bind='text:data.totalDbh50to60'></span></td>
                    <td><span  data-bind='text:data.totalDbh60to70'></span></td>
                    <td><span  data-bind='text:data.totalDbh70to80'></span></td>
                    <td><span  data-bind='text:data.totalDbh80to90'></span></td>
                    <td><span  data-bind='text:data.totalDbh90to100'></span></td>
                    <td><span  data-bind='text:data.totalDbh100to120'></span></td>
                    <td><span  data-bind='text:data.totalDbh120to140'></span></td>
                    <td><span  data-bind='text:data.totalDbh140plus'></span></td>
                </tr>
                </tfoot>
            </table>
        </div>

        </div>
        
    </div>
    

<!-- /ko -->

</div>




</div>

<script src="static/Zbj0J8XhmZDqWqIAz5C46TWLOULGl7LNvdJeBlO9fMb.js" type="text/javascript" ></script>





<script src="static/5zeDycYZFxJsfDd3W1kuhrN47XnIMrbhS6gdHDvcExv.js" type="text/javascript" ></script>

<script src="static/ulxBmo4RrKTNT3DuFHethb4EOZpwQfvefxNXivDIbzp.js" type="text/javascript" ></script>








<!--[if gte IE 8]><script src="static/knxjs4G9Cquc79O3iYW107XikPB1Z1ii8QWrtBpzlSP.js" type="text/javascript" ></script><![endif]-->
<script src="static/nRrltgvxdEHd5BqRR1v4XU3ZStOrhDScuH03g4r8E6O.js" type="text/javascript" ></script>

<script src="static/zP22SFJVnKXoWuBJdbsNhcivH2iXiC57wEOHXSDNudf.js" type="text/javascript" ></script>

<script src="static/QjmKsgTA1QWYxF0gcpdSFROG8mBnzaabMZcvDxBb9Xo.js" type="text/javascript" ></script>






<script src="static/IZCc6ZgD3MepYbz4UqlDLzMDNNghSCivcfGebmF9V2d.js" type="text/javascript" ></script>
<script src="static/I4NiLd8qMXMMgs4hAqHb5YT0jGlQhM4Yp0dku4W1Wng.js" type="text/javascript" ></script>



<script src="static/e9gGniNN5cG3OR4oPVWd5lYoxE5Xf282hFe7d4FTQbq.js" type="text/javascript" ></script>


<script src="static/CRNxISj7t7ZCV7B8M8dFtBK7x7R4tGVO36INoBz8gQX.js" type="text/javascript" ></script>

<script src="static/QhlSgFWjl35vcaCRa5cKxHZxRWSSluzptQUKz3PHr9s.js" type="text/javascript" ></script>


<script src="static/8WCQyXwicnBgTdLQ4F5jUFtmVXmqG9eUZKvo74wOnIT.js" type="text/javascript" ></script>
<script src="static/9HtLc6nfgO9H72LVVZxetW45ZR623Fx8EhEdydgOq2F.js" type="text/javascript" ></script>
<script src="static/wkrwT3eqoZlWXFPCQRTvkdsdvwzT5Lw2H89f9eTkQdb.js" type="text/javascript" ></script>


<script type="text/javascript">
        $(function(){

            var viewModelName = "Vegetation_Assessment_-_Survey_InformationViewModel",
                viewModelInstance = viewModelName + "Instance";

            // load dynamic models - usually objects in a list
                    var speciesLists = [];
        var site = {};


            this[viewModelName] = function (output, config) {
                var self = this;
                self.name = "Vegetation Assessment - Survey Information";
                self.outputId = orBlank(output.outputId);

                self.data = {};
                self.transients = {};
                var notCompleted = output.outputNotCompleted;

                if (notCompleted === undefined) {
                    notCompleted = config.collapsedByDefault;
                }
                self.outputNotCompleted = ko.observable(notCompleted);
                self.transients.optional = config.optional || false;
                self.transients.questionText = config.optionalQuestionText || 'Not applicable';
                self.transients.dummy = ko.observable();

                // add declarations for dynamic data
                
            self.data.assessor = ko.observable();

            self.data.property = ko.observable();

            self.data.habitatZone = ko.observable();

            self.data.zoneAreaHa = ko.observable();

            self.data.plotId = ko.observable();

            self.data.gps20mPlot = ko.observable();

            self.data.gps40mPlot = ko.observable();
            self.transients.site = site;

                // this will be called when generating a savable model to remove transient properties
                self.removeBeforeSave = function (jsData) {
                    // add code to remove any transients added by the dynamic tags
                    
                    delete jsData.activityType;
                    delete jsData.transients;
                    return jsData;
                };

                // this returns a JS object ready for saving
                self.modelForSaving = function () {
                    // get model as a plain javascript object
                    var jsData = ko.mapping.toJS(self, {'ignore':['transients']});
                    if (self.outputNotCompleted()) {
                        jsData.data = {};
                    }
                    // get rid of any transient observables
                    return self.removeBeforeSave(jsData);
                };

                // this is a version of toJSON that just returns the model as it will be saved
                // it is used for detecting when the model is modified (in a way that should invoke a save)
                // the ko.toJSON conversion is preserved so we can use it to view the active model for debugging
                self.modelAsJSON = function () {
                    return JSON.stringify(self.modelForSaving());
                };

                self.loadData = function (data) {
                    // load dynamic data
                                    self.data['assessor'](data['assessor']);
                self.data['property'](data['property']);
                self.data['habitatZone'](data['habitatZone']);
                self.data['zoneAreaHa'](orZero(data['zoneAreaHa']));
                self.data['plotId'](data['plotId']);
                self.data['gps20mPlot'](orZero(data['gps20mPlot']));
                self.data['gps40mPlot'](orZero(data['gps40mPlot']));


                    // if there is no data in tables then add an empty row for the user to add data
                    if (typeof self.addRow === 'function' && self.rowCount() === 0) {
                        self.addRow();
                    }
                    self.transients.dummy.notifySubscribers();
                };
            };


            var savedData = activity;
            if (!savedData.outputs) {
                savedData.outputs = [];
            }
            var savedOutput = {};
            if (savedData) {

                $.each(savedData.outputs, function(i, tmpOutput) {
                    if (tmpOutput.name === 'Vegetation Assessment - Survey Information') {
                        savedOutput = tmpOutput;
                    }
                });
            }

            var config = JSON.parse('\u007b\u007d');
            window[viewModelInstance] = new this[viewModelName](savedOutput, config);
            var output = savedOutput.data ? savedOutput.data : {};

            window[viewModelInstance].loadData(output);
            window[viewModelInstance].dirtyFlag = ko.dirtyFlag(window[viewModelInstance], false);

            ko.applyBindings(window[viewModelInstance], document.getElementById("koVegetation_Assessment_-_Survey_Information"));

            // this resets the baseline for detecting changes to the model
            // - shouldn't be required if everything behaves itself but acts as a backup for
            //   any binding side-effects
            // - note that it is not foolproof as applying the bindings happens asynchronously and there
            //   is no easy way to detect its completion
            window[viewModelInstance].dirtyFlag.reset();

            // register with the master controller so this model can participate in the save cycle
            master.register(window[viewModelInstance], window[viewModelInstance].modelForSaving,
            window[viewModelInstance].dirtyFlag.isDirty, window[viewModelInstance].dirtyFlag.reset);
        });

        </script><script type="text/javascript">
        $(function(){

            var viewModelName = "Native_SpeciesViewModel",
                viewModelInstance = viewModelName + "Instance";

            // load dynamic models - usually objects in a list
                    var NativeLifeFormsCoverRow = function (data) {
            var self = this;
            if (!data) data = {};
            self.transients = {};
            this.lifeFormET = ko.observable(orZero(data['lifeFormET']));
            this.lifeFormT = ko.observable(orZero(data['lifeFormT']));
            this.lifeFormMT = ko.observable(orZero(data['lifeFormMT']));
            this.lifeFormS = ko.observable(orZero(data['lifeFormS']));
            this.lifeFormPS = ko.observable(orZero(data['lifeFormPS']));
            this.lifeFormF = ko.observable(orZero(data['lifeFormF']));
            this.lifeFormCPF = ko.observable(orZero(data['lifeFormCPF']));
            this.lifeFormTG = ko.observable(orZero(data['lifeFormTG']));
            this.lifeFormNTG = ko.observable(orZero(data['lifeFormNTG']));
            this.lifeFormPNM = ko.observable(orZero(data['lifeFormPNM']));
            this.lifeFormEGM = ko.observable(orZero(data['lifeFormEGM']));
            this.lifeFormGF = ko.observable(orZero(data['lifeFormGF']));
            this.lifeFormTF = ko.observable(orZero(data['lifeFormTF']));
            this.lifeFormEP = ko.observable(orZero(data['lifeFormEP']));
            this.lifeFormCV = ko.observable(orZero(data['lifeFormCV']));
            this.lifeFormSC = ko.observable(orZero(data['lifeFormSC']));
            this.lifeFormAP = ko.observable(orZero(data['lifeFormAP']));
            this.lifeFormL = ko.observable(orZero(data['lifeFormL']));
            this.lifeFormB = ko.observable(orZero(data['lifeFormB']));
            this.lifeFormLog = ko.observable(orZero(data['lifeFormLog']));
            this.lifeFormR = ko.observable(orZero(data['lifeFormR']));
                    self.totalNativeCoverPercent = ko.computed(function () {
                        if (isNaN(Number(self.lifeFormET())) || isNaN(Number(self.lifeFormT())) || isNaN(Number(self.lifeFormMT())) || isNaN(Number(self.lifeFormS())) || isNaN(Number(self.lifeFormPS())) || isNaN(Number(self.lifeFormF())) || isNaN(Number(self.lifeFormCPF())) || isNaN(Number(self.lifeFormTG())) || isNaN(Number(self.lifeFormNTG())) || isNaN(Number(self.lifeFormPNM())) || isNaN(Number(self.lifeFormEGM())) || isNaN(Number(self.lifeFormGF())) || isNaN(Number(self.lifeFormTF())) || isNaN(Number(self.lifeFormEP())) || isNaN(Number(self.lifeFormCV())) || isNaN(Number(self.lifeFormSC())) || isNaN(Number(self.lifeFormAP())) || isNaN(Number(self.lifeFormL())) || isNaN(Number(self.lifeFormB())) || isNaN(Number(self.lifeFormLog())) || isNaN(Number(self.lifeFormR()))) { return 0; }
                        return Number(self.lifeFormET()) + Number(self.lifeFormT()) + Number(self.lifeFormMT()) + Number(self.lifeFormS()) + Number(self.lifeFormPS()) + Number(self.lifeFormF()) + Number(self.lifeFormCPF()) + Number(self.lifeFormTG()) + Number(self.lifeFormNTG()) + Number(self.lifeFormPNM()) + Number(self.lifeFormEGM()) + Number(self.lifeFormGF()) + Number(self.lifeFormTF()) + Number(self.lifeFormEP()) + Number(self.lifeFormCV()) + Number(self.lifeFormSC()) + Number(self.lifeFormAP()) + Number(self.lifeFormL()) + Number(self.lifeFormB()) + Number(self.lifeFormLog()) + Number(self.lifeFormR());
                    });
        };
        var NativeSpeciesStructureRow = function (data) {
            var self = this;
            if (!data) data = {};
            self.transients = {};
            this.species =  new SpeciesViewModel(data['species'], speciesLists);
            this.lifeFormSpET = ko.observable(orZero(data['lifeFormSpET']));
            this.lifeFormSpT = ko.observable(orZero(data['lifeFormSpT']));
            this.lifeFormSpMT = ko.observable(orZero(data['lifeFormSpMT']));
            this.lifeFormSpS = ko.observable(orZero(data['lifeFormSpS']));
            this.lifeFormSpPS = ko.observable(orZero(data['lifeFormSpPS']));
            this.lifeFormSpF = ko.observable(orZero(data['lifeFormSpF']));
            this.lifeFormSpCPF = ko.observable(orZero(data['lifeFormSpCPF']));
            this.lifeFormSpTG = ko.observable(orZero(data['lifeFormSpTG']));
            this.lifeFormSpNTG = ko.observable(orZero(data['lifeFormSpNTG']));
            this.lifeFormSpPNM = ko.observable(orZero(data['lifeFormSpPNM']));
            this.lifeFormSpEGM = ko.observable(orZero(data['lifeFormSpEGM']));
            this.lifeFormSpGF = ko.observable(orZero(data['lifeFormSpGF']));
            this.lifeFormSpTF = ko.observable(orZero(data['lifeFormSpTF']));
            this.lifeFormSpEP = ko.observable(orZero(data['lifeFormSpEP']));
            this.lifeFormSpCV = ko.observable(orZero(data['lifeFormSpCV']));
            this.lifeFormSpSC = ko.observable(orZero(data['lifeFormSpSC']));
            this.lifeFormSpAP = ko.observable(orZero(data['lifeFormSpAP']));
            this.lifeFormSpL = ko.observable(orZero(data['lifeFormSpL']));
            this.lifeFormSpB = ko.observable(orZero(data['lifeFormSpB']));
        };
        var speciesLists = [];
        var site = {};


            this[viewModelName] = function (output, config) {
                var self = this;
                self.name = "Native Species";
                self.outputId = orBlank(output.outputId);

                self.data = {};
                self.transients = {};
                var notCompleted = output.outputNotCompleted;

                if (notCompleted === undefined) {
                    notCompleted = config.collapsedByDefault;
                }
                self.outputNotCompleted = ko.observable(notCompleted);
                self.transients.optional = config.optional || false;
                self.transients.questionText = config.optionalQuestionText || 'Not applicable';
                self.transients.dummy = ko.observable();

                // add declarations for dynamic data
                
            self.data.nativeLifeFormsCover = ko.observableArray([]);
            self.selectednativeLifeFormsCoverRow = ko.observable();
        

            self.loadnativeLifeFormsCover = function (data, append) {
                if (!append) {
                    self.data.nativeLifeFormsCover([]);
                }
                if (data === undefined) {
                    self.addnativeLifeFormsCoverRow();
                } else {
                    $.each(data, function (i, obj) {
                        self.data.nativeLifeFormsCover.push(new NativeLifeFormsCoverRow(obj));
                    });
                }
            };

            self.addnativeLifeFormsCoverRow = function () {
                var newRow = new NativeLifeFormsCoverRow();
                self.data.nativeLifeFormsCover.push(newRow);
                
            };
            self.removenativeLifeFormsCoverRow = function (row) {
                self.data.nativeLifeFormsCover.remove(row);
                
            };
            self.nativeLifeFormsCoverrowCount = function () {
                return self.data.nativeLifeFormsCover().length;
            };

            self.nativeLifeFormsCoverTableDataUploadVisible = ko.observable(false);
            self.shownativeLifeFormsCoverTableDataUpload = function() {
                self.nativeLifeFormsCoverTableDataUploadVisible(!self.nativeLifeFormsCoverTableDataUploadVisible());
            };

            self.nativeLifeFormsCoverTableDataUploadOptions = {
                    url:'/activity/ajaxUpload',
                    done:function(e, data) {
                        if (data.result.error) {
                            self.uploadFailed(data.result.error);
                        }
                        else {
                            self.loadnativeLifeFormsCover(data.result.data, self.appendTableRows());
                        }
                    },
                    fail:function(e, data) {
                        var message = 'Please contact MERIT support and attach your spreadsheet to help us resolve the problem';
                        self.uploadFailed(data);

                    },
                    uploadTemplateId: "nativeLifeFormsCovertemplate-upload",
                    downloadTemplateId: "nativeLifeFormsCovertemplate-download",
                    formData:{type:'Native Species', listName:'nativeLifeFormsCover'}
            };
            self.appendTableRows = ko.observable(true);
            self.uploadFailed = function(message) {
                        var text = "<span class='label label-important'>Important</span><h4>There was an error uploading your data.</h4>";
                        text += "<p>"+message+"</p>";
                        bootbox.alert(text)
            };

            self.data.nativeSpeciesStructure = ko.observableArray([]);
            self.selectednativeSpeciesStructureRow = ko.observable();
        

            self.loadnativeSpeciesStructure = function (data, append) {
                if (!append) {
                    self.data.nativeSpeciesStructure([]);
                }
                if (data === undefined) {
                    self.addnativeSpeciesStructureRow();
                } else {
                    $.each(data, function (i, obj) {
                        self.data.nativeSpeciesStructure.push(new NativeSpeciesStructureRow(obj));
                    });
                }
            };

            self.addnativeSpeciesStructureRow = function () {
                var newRow = new NativeSpeciesStructureRow();
                self.data.nativeSpeciesStructure.push(newRow);
                
            };
            self.removenativeSpeciesStructureRow = function (row) {
                self.data.nativeSpeciesStructure.remove(row);
                
            };
            self.nativeSpeciesStructurerowCount = function () {
                return self.data.nativeSpeciesStructure().length;
            };

            self.nativeSpeciesStructureTableDataUploadVisible = ko.observable(false);
            self.shownativeSpeciesStructureTableDataUpload = function() {
                self.nativeSpeciesStructureTableDataUploadVisible(!self.nativeSpeciesStructureTableDataUploadVisible());
            };

            self.nativeSpeciesStructureTableDataUploadOptions = {
                    url:'/activity/ajaxUpload',
                    done:function(e, data) {
                        if (data.result.error) {
                            self.uploadFailed(data.result.error);
                        }
                        else {
                            self.loadnativeSpeciesStructure(data.result.data, self.appendTableRows());
                        }
                    },
                    fail:function(e, data) {
                        var message = 'Please contact MERIT support and attach your spreadsheet to help us resolve the problem';
                        self.uploadFailed(data);

                    },
                    uploadTemplateId: "nativeSpeciesStructuretemplate-upload",
                    downloadTemplateId: "nativeSpeciesStructuretemplate-download",
                    formData:{type:'Native Species', listName:'nativeSpeciesStructure'}
            };
            self.appendTableRows = ko.observable(true);
            self.uploadFailed = function(message) {
                        var text = "<span class='label label-important'>Important</span><h4>There was an error uploading your data.</h4>";
                        text += "<p>"+message+"</p>";
                        bootbox.alert(text)
            };

            self.data.speciesCountET = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.nativeSpeciesStructure().length; i++) {
                    var value = self.data.nativeSpeciesStructure()[i].lifeFormSpET();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.speciesCountT = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.nativeSpeciesStructure().length; i++) {
                    var value = self.data.nativeSpeciesStructure()[i].lifeFormSpT();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.speciesCountMT = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.nativeSpeciesStructure().length; i++) {
                    var value = self.data.nativeSpeciesStructure()[i].lifeFormSpMT();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.speciesCountS = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.nativeSpeciesStructure().length; i++) {
                    var value = self.data.nativeSpeciesStructure()[i].lifeFormSpS();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.speciesCountPS = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.nativeSpeciesStructure().length; i++) {
                    var value = self.data.nativeSpeciesStructure()[i].lifeFormSpPS();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.speciesCountF = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.nativeSpeciesStructure().length; i++) {
                    var value = self.data.nativeSpeciesStructure()[i].lifeFormSpF();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.speciesCountCPF = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.nativeSpeciesStructure().length; i++) {
                    var value = self.data.nativeSpeciesStructure()[i].lifeFormSpCPF();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.speciesCountTG = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.nativeSpeciesStructure().length; i++) {
                    var value = self.data.nativeSpeciesStructure()[i].lifeFormSpTG();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.speciesCountNTG = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.nativeSpeciesStructure().length; i++) {
                    var value = self.data.nativeSpeciesStructure()[i].lifeFormSpNTG();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.speciesCountPNM = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.nativeSpeciesStructure().length; i++) {
                    var value = self.data.nativeSpeciesStructure()[i].lifeFormSpPNM();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.speciesCountEGM = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.nativeSpeciesStructure().length; i++) {
                    var value = self.data.nativeSpeciesStructure()[i].lifeFormSpEGM();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.speciesCountGF = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.nativeSpeciesStructure().length; i++) {
                    var value = self.data.nativeSpeciesStructure()[i].lifeFormSpGF();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.speciesCountTF = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.nativeSpeciesStructure().length; i++) {
                    var value = self.data.nativeSpeciesStructure()[i].lifeFormSpTF();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.speciesCountEP = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.nativeSpeciesStructure().length; i++) {
                    var value = self.data.nativeSpeciesStructure()[i].lifeFormSpEP();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.speciesCountCV = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.nativeSpeciesStructure().length; i++) {
                    var value = self.data.nativeSpeciesStructure()[i].lifeFormSpCV();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.speciesCountSC = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.nativeSpeciesStructure().length; i++) {
                    var value = self.data.nativeSpeciesStructure()[i].lifeFormSpSC();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.speciesCountAP = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.nativeSpeciesStructure().length; i++) {
                    var value = self.data.nativeSpeciesStructure()[i].lifeFormSpAP();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.speciesCountL = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.nativeSpeciesStructure().length; i++) {
                    var value = self.data.nativeSpeciesStructure()[i].lifeFormSpL();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.speciesCountB = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.nativeSpeciesStructure().length; i++) {
                    var value = self.data.nativeSpeciesStructure()[i].lifeFormSpB();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.totalSpeciesCount = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.nativeLifeFormsCover().length; i++) {
                    var value = self.data.nativeLifeFormsCover()[i].totalNativeCoverPercent();
                        total = total + Number(value); 
                }
                return total;
            });

            self.data.totalLifeFormsCount = ko.computed(function () {
                var total = 0;
                for(var i = 0; i < self.data.nativeLifeFormsCover().length; i++) {
                    var value = self.data.nativeLifeFormsCover()[i].totalNativeCoverPercent();
                        total = total + Number(value); 
                }
                return total;
            });
            self.transients.site = site;

                // this will be called when generating a savable model to remove transient properties
                self.removeBeforeSave = function (jsData) {
                    // add code to remove any transients added by the dynamic tags
                                    delete jsData.selectednativeLifeFormsCoverRow;
                delete jsData.nativeLifeFormsCoverTableDataUploadOptions
                delete jsData.nativeLifeFormsCoverTableDataUploadVisible
                delete jsData.selectednativeSpeciesStructureRow;
                delete jsData.nativeSpeciesStructureTableDataUploadOptions
                delete jsData.nativeSpeciesStructureTableDataUploadVisible

                    delete jsData.activityType;
                    delete jsData.transients;
                    return jsData;
                };

                // this returns a JS object ready for saving
                self.modelForSaving = function () {
                    // get model as a plain javascript object
                    var jsData = ko.mapping.toJS(self, {'ignore':['transients']});
                    if (self.outputNotCompleted()) {
                        jsData.data = {};
                    }
                    // get rid of any transient observables
                    return self.removeBeforeSave(jsData);
                };

                // this is a version of toJSON that just returns the model as it will be saved
                // it is used for detecting when the model is modified (in a way that should invoke a save)
                // the ko.toJSON conversion is preserved so we can use it to view the active model for debugging
                self.modelAsJSON = function () {
                    return JSON.stringify(self.modelForSaving());
                };

                self.loadData = function (data) {
                    // load dynamic data
                                    self.loadnativeLifeFormsCover(data.nativeLifeFormsCover);
                self.loadnativeSpeciesStructure(data.nativeSpeciesStructure);


                    // if there is no data in tables then add an empty row for the user to add data
                    if (typeof self.addRow === 'function' && self.rowCount() === 0) {
                        self.addRow();
                    }
                    self.transients.dummy.notifySubscribers();
                };
            };


            var savedData = activity;
            if (!savedData.outputs) {
                savedData.outputs = [];
            }
            var savedOutput = {};
            if (savedData) {

                $.each(savedData.outputs, function(i, tmpOutput) {
                    if (tmpOutput.name === 'Native Species') {
                        savedOutput = tmpOutput;
                    }
                });
            }

            var config = JSON.parse('\u007b\u007d');
            window[viewModelInstance] = new this[viewModelName](savedOutput, config);
            var output = savedOutput.data ? savedOutput.data : {};

            window[viewModelInstance].loadData(output);
            window[viewModelInstance].dirtyFlag = ko.dirtyFlag(window[viewModelInstance], false);

            ko.applyBindings(window[viewModelInstance], document.getElementById("koNative_Species"));

            // this resets the baseline for detecting changes to the model
            // - shouldn't be required if everything behaves itself but acts as a backup for
            //   any binding side-effects
            // - note that it is not foolproof as applying the bindings happens asynchronously and there
            //   is no easy way to detect its completion
            window[viewModelInstance].dirtyFlag.reset();

            // register with the master controller so this model can participate in the save cycle
            master.register(window[viewModelInstance], window[viewModelInstance].modelForSaving,
            window[viewModelInstance].dirtyFlag.isDirty, window[viewModelInstance].dirtyFlag.reset);
        });

        </script><script type="text/javascript">
        $(function(){

            var viewModelName = "Weed_SpeciesViewModel",
                viewModelInstance = viewModelName + "Instance";

            // load dynamic models - usually objects in a list
                    var perennialWeedLifeFormsRows = ['perennialGsLargestWeedLifeForm','perennialGsNonLargestWeedLifeForm'];
        var perennialWeedLifeFormsColumns = ['','perennialWoodyWeeds','perennialGrassAndHerbWeeds','perennialBryoAndLichenWeeds'];
        var PerennialWeedSpeciesRow = function (data) {
            var self = this;
            if (!data) data = {};
            self.transients = {};
            this.perennialWeedSpeciesName =  new SpeciesViewModel(data['perennialWeedSpeciesName'], speciesLists);
            this.perennialWeedSpeciesComments = ko.observable(orBlank(data['perennialWeedSpeciesComments']));
        };
        var annualWeedLifeFormsRows = ['annualGsLargestWeedLifeForm','annualGsNonLargestWeedLifeForm'];
        var annualWeedLifeFormsColumns = ['','annualGrassAndHerbWeeds','annualBryoAndLichenWeeds'];
        var AnnualWeedSpeciesRow = function (data) {
            var self = this;
            if (!data) data = {};
            self.transients = {};
            this.annualWeedSpeciesName =  new SpeciesViewModel(data['annualWeedSpeciesName'], speciesLists);
            this.annualWeedSpeciesComments = ko.observable(orBlank(data['annualWeedSpeciesComments']));
        };
        var speciesLists = [];
        var site = {};


            this[viewModelName] = function (output, config) {
                var self = this;
                self.name = "Weed Species";
                self.outputId = orBlank(output.outputId);

                self.data = {};
                self.transients = {};
                var notCompleted = output.outputNotCompleted;

                if (notCompleted === undefined) {
                    notCompleted = config.collapsedByDefault;
                }
                self.outputNotCompleted = ko.observable(notCompleted);
                self.transients.optional = config.optional || false;
                self.transients.questionText = config.optionalQuestionText || 'Not applicable';
                self.transients.dummy = ko.observable();

                // add declarations for dynamic data
                
            self.data.perennialWeedLifeForms = [];//ko.observable([]);
            self.data.perennialWeedLifeForms.init = function (data, columns, rows) {
                var that = this, column;
                if (!data) data = [];
                $.each(columns, function (i, col) {
                    column = {};
                    column.name = col;
                    column.perennialGsLargestWeedLifeForm = ko.observable(data[i] ? orZero(data[i] ? data[i].perennialGsLargestWeedLifeForm : 0) : '0');
                    column.perennialGsNonLargestWeedLifeForm = ko.observable(data[i] ? orZero(data[i] ? data[i].perennialGsNonLargestWeedLifeForm : 0) : '0');
                    that.push(column);

                });
            };
            self.data.perennialWeedLifeForms.get = function (row,col) {
                var value = this[col][perennialWeedLifeFormsRows[row]];
                return value;

            };
            self.loadPerennialWeedLifeForms = function (data) {
                self.data.perennialWeedLifeForms.init(data, perennialWeedLifeFormsColumns, perennialWeedLifeFormsRows);
            };

            self.data.perennialWeedSpecies = ko.observableArray([]);
            self.selectedperennialWeedSpeciesRow = ko.observable();
        

            self.loadperennialWeedSpecies = function (data, append) {
                if (!append) {
                    self.data.perennialWeedSpecies([]);
                }
                if (data === undefined) {
                    self.addperennialWeedSpeciesRow();
                } else {
                    $.each(data, function (i, obj) {
                        self.data.perennialWeedSpecies.push(new PerennialWeedSpeciesRow(obj));
                    });
                }
            };

            self.addperennialWeedSpeciesRow = function () {
                var newRow = new PerennialWeedSpeciesRow();
                self.data.perennialWeedSpecies.push(newRow);
                
            };
            self.removeperennialWeedSpeciesRow = function (row) {
                self.data.perennialWeedSpecies.remove(row);
                
            };
            self.perennialWeedSpeciesrowCount = function () {
                return self.data.perennialWeedSpecies().length;
            };

            self.perennialWeedSpeciesTableDataUploadVisible = ko.observable(false);
            self.showperennialWeedSpeciesTableDataUpload = function() {
                self.perennialWeedSpeciesTableDataUploadVisible(!self.perennialWeedSpeciesTableDataUploadVisible());
            };

            self.perennialWeedSpeciesTableDataUploadOptions = {
                    url:'/activity/ajaxUpload',
                    done:function(e, data) {
                        if (data.result.error) {
                            self.uploadFailed(data.result.error);
                        }
                        else {
                            self.loadperennialWeedSpecies(data.result.data, self.appendTableRows());
                        }
                    },
                    fail:function(e, data) {
                        var message = 'Please contact MERIT support and attach your spreadsheet to help us resolve the problem';
                        self.uploadFailed(data);

                    },
                    uploadTemplateId: "perennialWeedSpeciestemplate-upload",
                    downloadTemplateId: "perennialWeedSpeciestemplate-download",
                    formData:{type:'Weed Species', listName:'perennialWeedSpecies'}
            };
            self.appendTableRows = ko.observable(true);
            self.uploadFailed = function(message) {
                        var text = "<span class='label label-important'>Important</span><h4>There was an error uploading your data.</h4>";
                        text += "<p>"+message+"</p>";
                        bootbox.alert(text)
            };

            self.data.annualWeedLifeForms = [];//ko.observable([]);
            self.data.annualWeedLifeForms.init = function (data, columns, rows) {
                var that = this, column;
                if (!data) data = [];
                $.each(columns, function (i, col) {
                    column = {};
                    column.name = col;
                    column.annualGsLargestWeedLifeForm = ko.observable(data[i] ? orZero(data[i] ? data[i].annualGsLargestWeedLifeForm : 0) : '0');
                    column.annualGsNonLargestWeedLifeForm = ko.observable(data[i] ? orZero(data[i] ? data[i].annualGsNonLargestWeedLifeForm : 0) : '0');
                    that.push(column);

                });
            };
            self.data.annualWeedLifeForms.get = function (row,col) {
                var value = this[col][annualWeedLifeFormsRows[row]];
                return value;

            };
            self.loadAnnualWeedLifeForms = function (data) {
                self.data.annualWeedLifeForms.init(data, annualWeedLifeFormsColumns, annualWeedLifeFormsRows);
            };

            self.data.annualWeedSpecies = ko.observableArray([]);
            self.selectedannualWeedSpeciesRow = ko.observable();
        

            self.loadannualWeedSpecies = function (data, append) {
                if (!append) {
                    self.data.annualWeedSpecies([]);
                }
                if (data === undefined) {
                    self.addannualWeedSpeciesRow();
                } else {
                    $.each(data, function (i, obj) {
                        self.data.annualWeedSpecies.push(new AnnualWeedSpeciesRow(obj));
                    });
                }
            };

            self.addannualWeedSpeciesRow = function () {
                var newRow = new AnnualWeedSpeciesRow();
                self.data.annualWeedSpecies.push(newRow);
                
            };
            self.removeannualWeedSpeciesRow = function (row) {
                self.data.annualWeedSpecies.remove(row);
                
            };
            self.annualWeedSpeciesrowCount = function () {
                return self.data.annualWeedSpecies().length;
            };

            self.annualWeedSpeciesTableDataUploadVisible = ko.observable(false);
            self.showannualWeedSpeciesTableDataUpload = function() {
                self.annualWeedSpeciesTableDataUploadVisible(!self.annualWeedSpeciesTableDataUploadVisible());
            };

            self.annualWeedSpeciesTableDataUploadOptions = {
                    url:'/activity/ajaxUpload',
                    done:function(e, data) {
                        if (data.result.error) {
                            self.uploadFailed(data.result.error);
                        }
                        else {
                            self.loadannualWeedSpecies(data.result.data, self.appendTableRows());
                        }
                    },
                    fail:function(e, data) {
                        var message = 'Please contact MERIT support and attach your spreadsheet to help us resolve the problem';
                        self.uploadFailed(data);

                    },
                    uploadTemplateId: "annualWeedSpeciestemplate-upload",
                    downloadTemplateId: "annualWeedSpeciestemplate-download",
                    formData:{type:'Weed Species', listName:'annualWeedSpecies'}
            };
            self.appendTableRows = ko.observable(true);
            self.uploadFailed = function(message) {
                        var text = "<span class='label label-important'>Important</span><h4>There was an error uploading your data.</h4>";
                        text += "<p>"+message+"</p>";
                        bootbox.alert(text)
            };
            self.transients.site = site;

                // this will be called when generating a savable model to remove transient properties
                self.removeBeforeSave = function (jsData) {
                    // add code to remove any transients added by the dynamic tags
                                    delete jsData.selectedperennialWeedSpeciesRow;
                delete jsData.perennialWeedSpeciesTableDataUploadOptions
                delete jsData.perennialWeedSpeciesTableDataUploadVisible
                delete jsData.selectedannualWeedSpeciesRow;
                delete jsData.annualWeedSpeciesTableDataUploadOptions
                delete jsData.annualWeedSpeciesTableDataUploadVisible

                    delete jsData.activityType;
                    delete jsData.transients;
                    return jsData;
                };

                // this returns a JS object ready for saving
                self.modelForSaving = function () {
                    // get model as a plain javascript object
                    var jsData = ko.mapping.toJS(self, {'ignore':['transients']});
                    if (self.outputNotCompleted()) {
                        jsData.data = {};
                    }
                    // get rid of any transient observables
                    return self.removeBeforeSave(jsData);
                };

                // this is a version of toJSON that just returns the model as it will be saved
                // it is used for detecting when the model is modified (in a way that should invoke a save)
                // the ko.toJSON conversion is preserved so we can use it to view the active model for debugging
                self.modelAsJSON = function () {
                    return JSON.stringify(self.modelForSaving());
                };

                self.loadData = function (data) {
                    // load dynamic data
                                    self.loadPerennialWeedLifeForms(data.perennialWeedLifeForms);
                self.loadperennialWeedSpecies(data.perennialWeedSpecies);
                self.loadAnnualWeedLifeForms(data.annualWeedLifeForms);
                self.loadannualWeedSpecies(data.annualWeedSpecies);


                    // if there is no data in tables then add an empty row for the user to add data
                    if (typeof self.addRow === 'function' && self.rowCount() === 0) {
                        self.addRow();
                    }
                    self.transients.dummy.notifySubscribers();
                };
            };


            var savedData = activity;
            if (!savedData.outputs) {
                savedData.outputs = [];
            }
            var savedOutput = {};
            if (savedData) {

                $.each(savedData.outputs, function(i, tmpOutput) {
                    if (tmpOutput.name === 'Weed Species') {
                        savedOutput = tmpOutput;
                    }
                });
            }

            var config = JSON.parse('\u007b\u007d');
            window[viewModelInstance] = new this[viewModelName](savedOutput, config);
            var output = savedOutput.data ? savedOutput.data : {};

            window[viewModelInstance].loadData(output);
            window[viewModelInstance].dirtyFlag = ko.dirtyFlag(window[viewModelInstance], false);

            ko.applyBindings(window[viewModelInstance], document.getElementById("koWeed_Species"));

            // this resets the baseline for detecting changes to the model
            // - shouldn't be required if everything behaves itself but acts as a backup for
            //   any binding side-effects
            // - note that it is not foolproof as applying the bindings happens asynchronously and there
            //   is no easy way to detect its completion
            window[viewModelInstance].dirtyFlag.reset();

            // register with the master controller so this model can participate in the save cycle
            master.register(window[viewModelInstance], window[viewModelInstance].modelForSaving,
            window[viewModelInstance].dirtyFlag.isDirty, window[viewModelInstance].dirtyFlag.reset);
        });

        </script><script type="text/javascript">
        $(function(){

            var viewModelName = "TreesViewModel",
                viewModelInstance = viewModelName + "Instance";

            // load dynamic models - usually objects in a list
                    var LargestTreesRow = function (data) {
            var self = this;
            if (!data) data = {};
            self.transients = {};
            this.largeTreePlotSize = ko.observable(orBlank(data['largeTreePlotSize']));
            self.transients.largeTreePlotSizeConstraints = ["20 sq. metres","40 sq. metres"];
            this.largeTree1 = ko.observable(orZero(data['largeTree1']));
            this.largeTree2 = ko.observable(orZero(data['largeTree2']));
            this.largeTree3 = ko.observable(orZero(data['largeTree3']));
            this.largeTree4 = ko.observable(orZero(data['largeTree4']));
            this.largeTree5 = ko.observable(orZero(data['largeTree5']));
            this.largeTree6 = ko.observable(orZero(data['largeTree6']));
            this.largeTree7 = ko.observable(orZero(data['largeTree7']));
            this.largeTree8 = ko.observable(orZero(data['largeTree8']));
            this.largeTree9 = ko.observable(orZero(data['largeTree9']));
            this.largeTree10 = ko.observable(orZero(data['largeTree10']));
        };
        var otherTreesRows = ['tally'];
        var otherTreesColumns = ['Tree tally','dbh10to20','dbh20to30','dbh30to40','dbh40to50','dbh50to60','dbh60to70','dbh70to80','dbh80to90','dbh90to100','dbh100to120','dbh120to140','dbh140plus'];
        var speciesLists = [];
        var site = {};


            this[viewModelName] = function (output, config) {
                var self = this;
                self.name = "Trees";
                self.outputId = orBlank(output.outputId);

                self.data = {};
                self.transients = {};
                var notCompleted = output.outputNotCompleted;

                if (notCompleted === undefined) {
                    notCompleted = config.collapsedByDefault;
                }
                self.outputNotCompleted = ko.observable(notCompleted);
                self.transients.optional = config.optional || false;
                self.transients.questionText = config.optionalQuestionText || 'Not applicable';
                self.transients.dummy = ko.observable();

                // add declarations for dynamic data
                
            self.data.largestTrees = ko.observableArray([]);
            self.selectedlargestTreesRow = ko.observable();
        

            self.loadlargestTrees = function (data, append) {
                if (!append) {
                    self.data.largestTrees([]);
                }
                if (data === undefined) {
                    self.addlargestTreesRow();
                } else {
                    $.each(data, function (i, obj) {
                        self.data.largestTrees.push(new LargestTreesRow(obj));
                    });
                }
            };

            self.addlargestTreesRow = function () {
                var newRow = new LargestTreesRow();
                self.data.largestTrees.push(newRow);
                
            };
            self.removelargestTreesRow = function (row) {
                self.data.largestTrees.remove(row);
                
            };
            self.largestTreesrowCount = function () {
                return self.data.largestTrees().length;
            };

            self.largestTreesTableDataUploadVisible = ko.observable(false);
            self.showlargestTreesTableDataUpload = function() {
                self.largestTreesTableDataUploadVisible(!self.largestTreesTableDataUploadVisible());
            };

            self.largestTreesTableDataUploadOptions = {
                    url:'/activity/ajaxUpload',
                    done:function(e, data) {
                        if (data.result.error) {
                            self.uploadFailed(data.result.error);
                        }
                        else {
                            self.loadlargestTrees(data.result.data, self.appendTableRows());
                        }
                    },
                    fail:function(e, data) {
                        var message = 'Please contact MERIT support and attach your spreadsheet to help us resolve the problem';
                        self.uploadFailed(data);

                    },
                    uploadTemplateId: "largestTreestemplate-upload",
                    downloadTemplateId: "largestTreestemplate-download",
                    formData:{type:'Trees', listName:'largestTrees'}
            };
            self.appendTableRows = ko.observable(true);
            self.uploadFailed = function(message) {
                        var text = "<span class='label label-important'>Important</span><h4>There was an error uploading your data.</h4>";
                        text += "<p>"+message+"</p>";
                        bootbox.alert(text)
            };

            self.data.otherTrees = [];//ko.observable([]);
            self.data.otherTrees.init = function (data, columns, rows) {
                var that = this, column;
                if (!data) data = [];
                $.each(columns, function (i, col) {
                    column = {};
                    column.name = col;
                    column.tally = ko.observable(data[i] ? orZero(data[i] ? data[i].tally : 0) : '0');
                    that.push(column);

                });
            };
            self.data.otherTrees.get = function (row,col) {
                var value = this[col][otherTreesRows[row]];
                return value;

            };
            self.loadOtherTrees = function (data) {
                self.data.otherTrees.init(data, otherTreesColumns, otherTreesRows);
            };
            self.transients.site = site;

                // this will be called when generating a savable model to remove transient properties
                self.removeBeforeSave = function (jsData) {
                    // add code to remove any transients added by the dynamic tags
                                    delete jsData.selectedlargestTreesRow;
                delete jsData.largestTreesTableDataUploadOptions
                delete jsData.largestTreesTableDataUploadVisible

                    delete jsData.activityType;
                    delete jsData.transients;
                    return jsData;
                };

                // this returns a JS object ready for saving
                self.modelForSaving = function () {
                    // get model as a plain javascript object
                    var jsData = ko.mapping.toJS(self, {'ignore':['transients']});
                    if (self.outputNotCompleted()) {
                        jsData.data = {};
                    }
                    // get rid of any transient observables
                    return self.removeBeforeSave(jsData);
                };

                // this is a version of toJSON that just returns the model as it will be saved
                // it is used for detecting when the model is modified (in a way that should invoke a save)
                // the ko.toJSON conversion is preserved so we can use it to view the active model for debugging
                self.modelAsJSON = function () {
                    return JSON.stringify(self.modelForSaving());
                };

                self.loadData = function (data) {
                    // load dynamic data
                                    self.loadlargestTrees(data.largestTrees);
                self.loadOtherTrees(data.otherTrees);


                    // if there is no data in tables then add an empty row for the user to add data
                    if (typeof self.addRow === 'function' && self.rowCount() === 0) {
                        self.addRow();
                    }
                    self.transients.dummy.notifySubscribers();
                };
            };


            var savedData = activity;
            if (!savedData.outputs) {
                savedData.outputs = [];
            }
            var savedOutput = {};
            if (savedData) {

                $.each(savedData.outputs, function(i, tmpOutput) {
                    if (tmpOutput.name === 'Trees') {
                        savedOutput = tmpOutput;
                    }
                });
            }

            var config = JSON.parse('\u007b\u007d');
            window[viewModelInstance] = new this[viewModelName](savedOutput, config);
            var output = savedOutput.data ? savedOutput.data : {};

            window[viewModelInstance].loadData(output);
            window[viewModelInstance].dirtyFlag = ko.dirtyFlag(window[viewModelInstance], false);

            ko.applyBindings(window[viewModelInstance], document.getElementById("koTrees"));

            // this resets the baseline for detecting changes to the model
            // - shouldn't be required if everything behaves itself but acts as a backup for
            //   any binding side-effects
            // - note that it is not foolproof as applying the bindings happens asynchronously and there
            //   is no easy way to detect its completion
            window[viewModelInstance].dirtyFlag.reset();

            // register with the master controller so this model can participate in the save cycle
            master.register(window[viewModelInstance], window[viewModelInstance].modelForSaving,
            window[viewModelInstance].dirtyFlag.isDirty, window[viewModelInstance].dirtyFlag.reset);
        });

        </script><script type="text/javascript">


    /* Master controller for page. This handles saving each model as required. */
    var Master = function () {
        var self = this;
        this.subscribers = [];
        // client models register their name and methods to participate in saving
        self.register = function (modelInstanceName, getMethod, isDirtyMethod, resetMethod) {
            this.subscribers.push({
                model: modelInstanceName,
                get: getMethod,
                isDirty: isDirtyMethod,
                reset: resetMethod
            });
        };
        // master isDirty flag for the whole page - can control button enabling
        this.isDirty  = function () {
            var dirty = false;
            $.each(this.subscribers, function(i, obj) {
                dirty = dirty || obj.isDirty();
            });
            return dirty;
        };

        this.validate = function() {
            var valid = $('#validation-container').validationEngine('validate');
            if (valid) {
                // Check that forms with multiple optional sections have at least one of those sections completed.
                var optionalCount = 0;
                var notCompletedCount = 0;
                $.each(self.subscribers, function(i, obj) {
                    if (obj.model !== 'activityModel' && obj.model !== 'photoPoints') {
                        if (obj.model.transients.optional) {
                            optionalCount++;
                            if (obj.model.outputNotCompleted()) {
                                notCompletedCount++;
                            }
                        }
                    }
                });
                if (optionalCount > 1 && notCompletedCount == optionalCount) {
                   valid = false;
                   bootbox.alert("<p>To 'Save changes', the mandatory fields of at least one section of this form must be completed.</p>"+
                        "<p>If all sections are 'Not applicable' please contact your grant manager to discuss alternate form options</p>");
                }
            }

            return valid;
        };
        /**
         * Makes an ajax call to save any sections that have been modified. This includes the activity
         * itself and each output.
         *
         * Modified outputs are injected as a list into the activity object. If there is nothing to save
         * in the activity itself, then the root is an object that is empty except for the outputs list.
         *
         * NOTE that the model for each section must register itself to be included in this save.
         *
         * Validates the entire page before saving.
         * @return -1 if the page was not modified, 0 if validation failed, 1 if validation succeeded (or was not requested).
         */
        this.save = function (validate) {
            // Ensure any active change is committed - the knockout binding typically fires on blur.
            $( document.activeElement ).blur();

            if (validate === undefined) {
                validate = true;
            }
            var activityData, outputs = [];

            var success = true;
            if (validate) {
                success = self.validate();
            }
            if (!self.isDirty()) {
                mobileBindings.onSaveActivity(-1, null);
                return -1;
            }
            if (success) {
                $.each(this.subscribers, function(i, obj) {
                    if (obj.model === 'activityModel') {
                        activityData = obj.get();
                    } else {
                        outputs.push(obj.get());
                    }
                });

                if (activityData === undefined) { activityData = {}}
                activityData.outputs = outputs;

                var toSave = JSON.stringify(activityData);
                mobileBindings.onSaveActivity(1, toSave);

            }
            else {
                mobileBindings.onSaveActivity(0, null);
            }
            return success?1:0;
        };

        this.reset = function () {
            $.each(this.subscribers, function(i, obj) {
                if (obj.isDirty()) {
                    obj.reset();
                }
            });
        };

        this.addSite = function(site) {
            var viewModel = ko.dataFor(document.getElementById('site'));
            viewModel.transients.sites.push(site);
            viewModel.siteId(site.siteId);
        }
    };

    if (mobileBindings == undefined) {
        var mobileBindings = {
        
            loadActivity:function(){return "{}"},
        
        
            loadSites:function(){return "[]"},
        
        
            loadThemes:function(){return "[]"},
        

        supportsNewSite:function() { return true; },
        onSaveActivity:function(){},
        createNewSite:function(){}
    };
}
var master = new Master();
var activity = JSON.parse(mobileBindings.loadActivity());
var sites = JSON.parse(mobileBindings.loadSites());
var themes = JSON.parse(mobileBindings.loadThemes());

$(function(){

var scroll = false;

$('#validation-container').validationEngine('attach', {scroll: scroll});

$('.helphover').popover({animation: true, trigger:'hover'});

$('#reset').click(function () {
master.reset();
});

function ViewModel (act, sites, themes) {
var self = this;
var today = new Date().toISOStringNoMillis();

self.activityId = act.activityId;
self.description = ko.observable(act.description);
self.notes = ko.observable(act.notes);
self.startDate = ko.observable(act.startDate || today).extend({simpleDate: false});
self.endDate = ko.observable(act.endDate).extend({simpleDate: false});
self.plannedStartDate = ko.observable(act.plannedStartDate).extend({simpleDate: false});
self.plannedEndDate = ko.observable(act.plannedEndDate).extend({simpleDate: false});
self.eventPurpose = ko.observable(act.eventPurpose);
self.fieldNotes = ko.observable(act.fieldNotes);
self.associatedProgram = ko.observable(act.associatedProgram);
self.associatedSubProgram = ko.observable(act.associatedSubProgram);
self.progress = ko.observable(act.progress);
self.mainTheme = ko.observable(act.mainTheme);
self.type = ko.observable(act.type);
self.siteId = ko.observable(act.siteId);
self.projectId = act.projectId;
self.transients = {};
self.transients.sites = ko.observableArray(sites);
self.transients.photoPoints = ko.computed(function() {
    var site = $.grep(self.transients.sites(), function(site, index) { return site.siteId == self.siteId(); })[0];
     if (site) {
         return site.photoPoints ? site.photoPoints : site.poi;
     }
     return [];
});
self.transients.activityProgressValues = ['planned','started','finished'];
self.transients.themes = themes?themes:[];
self.transients.markedAsFinished = ko.observable(act.progress === 'finished');
self.transients.markedAsFinished.subscribe(function (finished) {
    self.progress(finished ? 'finished' : 'started');
    if (finished || !self.endDate()) {
        self.endDate(today);
    }
});
self.transients.siteImgUrl = ko.computed(function() {
    if (self.siteId()) {
         var site = $.grep(self.transients.sites(), function(site, index) { return site.siteId == self.siteId(); })[0];
         if (site) {
            var lat,lon;
            if (site.centroidLat !== undefined && site.centroidLon !== undefined) {
                lat = site.centroidLat;
                lon = site.centroidLon;
            }
            else if (site.extent && site.extent.geometry && site.extent.geometry.centre) {
                lat = site.extent.geometry.centre[1];
                lon = site.extent.geometry.centre[0];
            }
            if (lat !== undefined && lon !== undefined) {
                $('#siteLocationImage').show();
                return fcConfig.googleStaticUrl+lat+","+lon;
            }
         }
    }
    return "";
});
self.siteLoadError = function(data, event) {
    $('#siteLocationImage').hide();
};

self.transients.newSiteSupported = ko.observable( mobileBindings.supportsNewSite());

self.modelForSaving = function () {
    // get model as a plain javascript object
    var jsData = ko.toJS(self);
    delete jsData.transients;
    return jsData;
};
self.modelAsJSON = function () {
    return JSON.stringify(self.modelForSaving());
};

self.save = function (callback, key) {
};

self.createNewSite = function() {
    mobileBindings.createNewSite();
}

self.notImplemented = function () {
    alert("Not implemented yet.")
};

self.attachPhotoPoint = function(e) {
    console.log(e);
};
self.dirtyFlag = ko.dirtyFlag(self, false);

// make sure progress moves to started if we save any data (unless already finished)
// (do this here so the model becomes dirty)
self.progress(self.transients.markedAsFinished() ? 'finished' : 'started');
}


var viewModel = new ViewModel(activity, sites, themes);

ko.applyBindings(viewModel);

master.register('activityModel', viewModel.modelForSaving, viewModel.dirtyFlag.isDirty, viewModel.dirtyFlag.reset);


});


</script>
</body>
</html>